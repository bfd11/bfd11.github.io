import{eQ as k_,fn as V_,dE as Ai,gB as G_,gu as ur,eg as Lr,dD as _c,eR as W_,cS as Y_}from"./index-40f6b818.js";import{r as Vr,f as Lo,g as nu,c as J_,a as $o,b as od,d as su}from"./format-ed83eaa6.js";import{c as ou,a as ad,b as X_,d as Z_}from"./index-b1693c30.js";import{q as Io,d as Q_}from"./index-e5a684b1.js";import"./tslib.es6-c2094241.js";import"./index-44c8c2a4.js";let em=class{};class tm extends em{constructor(){super()}}class rm extends tm{constructor(t){super()}}const im="^https?:",nm="^wss?:";function sm(n){const t=n.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function cd(n,t){const r=sm(n);return typeof r>"u"?!1:new RegExp(t).test(r)}function Ol(n){return cd(n,im)}function Cl(n){return cd(n,nm)}function om(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function ud(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function au(n){return ud(n)&&"method"in n}function Mo(n){return ud(n)&&(pi(n)||Kr(n))}function pi(n){return"result"in n}function Kr(n){return"error"in n}var cu={},jo={},Le={},hd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function t(f,g){var w=f>>>16&65535,x=f&65535,C=g>>>16&65535,U=g&65535;return x*U+(w*U+x*C<<16>>>0)|0}n.mul=Math.imul||t;function r(f,g){return f+g|0}n.add=r;function s(f,g){return f-g|0}n.sub=s;function a(f,g){return f<<g|f>>>32-g}n.rotl=a;function l(f,g){return f<<32-g|f>>>g}n.rotr=l;function p(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}n.isInteger=Number.isInteger||p,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(f){return n.isInteger(f)&&f>=-n.MAX_SAFE_INTEGER&&f<=n.MAX_SAFE_INTEGER}})(hd);Object.defineProperty(Le,"__esModule",{value:!0});var ld=hd;function am(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])<<16>>16}Le.readInt16BE=am;function cm(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])>>>0}Le.readUint16BE=cm;function um(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])<<16>>16}Le.readInt16LE=um;function hm(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])>>>0}Le.readUint16LE=hm;function fd(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>8,t[r+1]=n>>>0,t}Le.writeUint16BE=fd;Le.writeInt16BE=fd;function dd(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t}Le.writeUint16LE=dd;Le.writeInt16LE=dd;function zc(n,t){return t===void 0&&(t=0),n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}Le.readInt32BE=zc;function Hc(n,t){return t===void 0&&(t=0),(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}Le.readUint32BE=Hc;function Bc(n,t){return t===void 0&&(t=0),n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]}Le.readInt32LE=Bc;function Kc(n,t){return t===void 0&&(t=0),(n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t])>>>0}Le.readUint32LE=Kc;function xo(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>24,t[r+1]=n>>>16,t[r+2]=n>>>8,t[r+3]=n>>>0,t}Le.writeUint32BE=xo;Le.writeInt32BE=xo;function Ao(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24,t}Le.writeUint32LE=Ao;Le.writeInt32LE=Ao;function lm(n,t){t===void 0&&(t=0);var r=zc(n,t),s=zc(n,t+4);return r*4294967296+s-(s>>31)*4294967296}Le.readInt64BE=lm;function fm(n,t){t===void 0&&(t=0);var r=Hc(n,t),s=Hc(n,t+4);return r*4294967296+s}Le.readUint64BE=fm;function dm(n,t){t===void 0&&(t=0);var r=Bc(n,t),s=Bc(n,t+4);return s*4294967296+r-(r>>31)*4294967296}Le.readInt64LE=dm;function pm(n,t){t===void 0&&(t=0);var r=Kc(n,t),s=Kc(n,t+4);return s*4294967296+r}Le.readUint64LE=pm;function pd(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),xo(n/4294967296>>>0,t,r),xo(n>>>0,t,r+4),t}Le.writeUint64BE=pd;Le.writeInt64BE=pd;function gd(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ao(n>>>0,t,r),Ao(n/4294967296>>>0,t,r+4),t}Le.writeUint64LE=gd;Le.writeInt64LE=gd;function gm(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,a=1,l=n/8+r-1;l>=r;l--)s+=t[l]*a,a*=256;return s}Le.readUintBE=gm;function vm(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,a=1,l=r;l<r+n/8;l++)s+=t[l]*a,a*=256;return s}Le.readUintLE=vm;function ym(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ld.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var a=1,l=n/8+s-1;l>=s;l--)r[l]=t/a&255,a*=256;return r}Le.writeUintBE=ym;function _m(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ld.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var a=1,l=s;l<s+n/8;l++)r[l]=t/a&255,a*=256;return r}Le.writeUintLE=_m;function mm(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t)}Le.readFloat32BE=mm;function bm(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t,!0)}Le.readFloat32LE=bm;function wm(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t)}Le.readFloat64BE=wm;function Em(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t,!0)}Le.readFloat64LE=Em;function Dm(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n),t}Le.writeFloat32BE=Dm;function Sm(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n,!0),t}Le.writeFloat32LE=Sm;function Im(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n),t}Le.writeFloat64BE=Im;function xm(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n,!0),t}Le.writeFloat64LE=xm;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});function Am(n){for(var t=0;t<n.length;t++)n[t]=0;return n}Sr.wipe=Am;Object.defineProperty(jo,"__esModule",{value:!0});var Zt=Le,kc=Sr,Om=20;function Cm(n,t,r){for(var s=1634760805,a=857760878,l=2036477234,p=1797285236,f=r[3]<<24|r[2]<<16|r[1]<<8|r[0],g=r[7]<<24|r[6]<<16|r[5]<<8|r[4],w=r[11]<<24|r[10]<<16|r[9]<<8|r[8],x=r[15]<<24|r[14]<<16|r[13]<<8|r[12],C=r[19]<<24|r[18]<<16|r[17]<<8|r[16],U=r[23]<<24|r[22]<<16|r[21]<<8|r[20],P=r[27]<<24|r[26]<<16|r[25]<<8|r[24],O=r[31]<<24|r[30]<<16|r[29]<<8|r[28],q=t[3]<<24|t[2]<<16|t[1]<<8|t[0],L=t[7]<<24|t[6]<<16|t[5]<<8|t[4],re=t[11]<<24|t[10]<<16|t[9]<<8|t[8],oe=t[15]<<24|t[14]<<16|t[13]<<8|t[12],ie=s,M=a,H=l,D=p,u=f,m=g,X=w,V=x,ne=C,ce=U,de=P,_=O,S=q,Z=L,W=re,B=oe,K=0;K<Om;K+=2)ie=ie+u|0,S^=ie,S=S>>>32-16|S<<16,ne=ne+S|0,u^=ne,u=u>>>32-12|u<<12,M=M+m|0,Z^=M,Z=Z>>>32-16|Z<<16,ce=ce+Z|0,m^=ce,m=m>>>32-12|m<<12,H=H+X|0,W^=H,W=W>>>32-16|W<<16,de=de+W|0,X^=de,X=X>>>32-12|X<<12,D=D+V|0,B^=D,B=B>>>32-16|B<<16,_=_+B|0,V^=_,V=V>>>32-12|V<<12,H=H+X|0,W^=H,W=W>>>32-8|W<<8,de=de+W|0,X^=de,X=X>>>32-7|X<<7,D=D+V|0,B^=D,B=B>>>32-8|B<<8,_=_+B|0,V^=_,V=V>>>32-7|V<<7,M=M+m|0,Z^=M,Z=Z>>>32-8|Z<<8,ce=ce+Z|0,m^=ce,m=m>>>32-7|m<<7,ie=ie+u|0,S^=ie,S=S>>>32-8|S<<8,ne=ne+S|0,u^=ne,u=u>>>32-7|u<<7,ie=ie+m|0,B^=ie,B=B>>>32-16|B<<16,de=de+B|0,m^=de,m=m>>>32-12|m<<12,M=M+X|0,S^=M,S=S>>>32-16|S<<16,_=_+S|0,X^=_,X=X>>>32-12|X<<12,H=H+V|0,Z^=H,Z=Z>>>32-16|Z<<16,ne=ne+Z|0,V^=ne,V=V>>>32-12|V<<12,D=D+u|0,W^=D,W=W>>>32-16|W<<16,ce=ce+W|0,u^=ce,u=u>>>32-12|u<<12,H=H+V|0,Z^=H,Z=Z>>>32-8|Z<<8,ne=ne+Z|0,V^=ne,V=V>>>32-7|V<<7,D=D+u|0,W^=D,W=W>>>32-8|W<<8,ce=ce+W|0,u^=ce,u=u>>>32-7|u<<7,M=M+X|0,S^=M,S=S>>>32-8|S<<8,_=_+S|0,X^=_,X=X>>>32-7|X<<7,ie=ie+m|0,B^=ie,B=B>>>32-8|B<<8,de=de+B|0,m^=de,m=m>>>32-7|m<<7;Zt.writeUint32LE(ie+s|0,n,0),Zt.writeUint32LE(M+a|0,n,4),Zt.writeUint32LE(H+l|0,n,8),Zt.writeUint32LE(D+p|0,n,12),Zt.writeUint32LE(u+f|0,n,16),Zt.writeUint32LE(m+g|0,n,20),Zt.writeUint32LE(X+w|0,n,24),Zt.writeUint32LE(V+x|0,n,28),Zt.writeUint32LE(ne+C|0,n,32),Zt.writeUint32LE(ce+U|0,n,36),Zt.writeUint32LE(de+P|0,n,40),Zt.writeUint32LE(_+O|0,n,44),Zt.writeUint32LE(S+q|0,n,48),Zt.writeUint32LE(Z+L|0,n,52),Zt.writeUint32LE(W+re|0,n,56),Zt.writeUint32LE(B+oe|0,n,60)}function vd(n,t,r,s,a){if(a===void 0&&(a=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var l,p;if(a===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=new Uint8Array(16),p=l.length-t.length,l.set(t,p)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");l=t,p=a}for(var f=new Uint8Array(64),g=0;g<r.length;g+=64){Cm(f,l,n);for(var w=g;w<g+64&&w<r.length;w++)s[w]=r[w]^f[w-g];Tm(l,0,p)}return kc.wipe(f),a===0&&kc.wipe(l),s}jo.streamXOR=vd;function Pm(n,t,r,s){return s===void 0&&(s=0),kc.wipe(r),vd(n,t,r,r,s)}jo.stream=Pm;function Tm(n,t,r){for(var s=1;r--;)s=s+(n[t]&255)|0,n[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var yd={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});function Nm(n,t,r){return~(n-1)&t|n-1&r}Pi.select=Nm;function Rm(n,t){return(n|0)-(t|0)-1>>>31&1}Pi.lessOrEqual=Rm;function _d(n,t){if(n.length!==t.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^t[s];return 1&r-1>>>8}Pi.compare=_d;function Um(n,t){return n.length===0||t.length===0?!1:_d(n,t)!==0}Pi.equal=Um;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Pi,r=Sr;n.DIGEST_LENGTH=16;var s=function(){function p(f){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=f[0]|f[1]<<8;this._r[0]=g&8191;var w=f[2]|f[3]<<8;this._r[1]=(g>>>13|w<<3)&8191;var x=f[4]|f[5]<<8;this._r[2]=(w>>>10|x<<6)&7939;var C=f[6]|f[7]<<8;this._r[3]=(x>>>7|C<<9)&8191;var U=f[8]|f[9]<<8;this._r[4]=(C>>>4|U<<12)&255,this._r[5]=U>>>1&8190;var P=f[10]|f[11]<<8;this._r[6]=(U>>>14|P<<2)&8191;var O=f[12]|f[13]<<8;this._r[7]=(P>>>11|O<<5)&8065;var q=f[14]|f[15]<<8;this._r[8]=(O>>>8|q<<8)&8191,this._r[9]=q>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return p.prototype._blocks=function(f,g,w){for(var x=this._fin?0:2048,C=this._h[0],U=this._h[1],P=this._h[2],O=this._h[3],q=this._h[4],L=this._h[5],re=this._h[6],oe=this._h[7],ie=this._h[8],M=this._h[9],H=this._r[0],D=this._r[1],u=this._r[2],m=this._r[3],X=this._r[4],V=this._r[5],ne=this._r[6],ce=this._r[7],de=this._r[8],_=this._r[9];w>=16;){var S=f[g+0]|f[g+1]<<8;C+=S&8191;var Z=f[g+2]|f[g+3]<<8;U+=(S>>>13|Z<<3)&8191;var W=f[g+4]|f[g+5]<<8;P+=(Z>>>10|W<<6)&8191;var B=f[g+6]|f[g+7]<<8;O+=(W>>>7|B<<9)&8191;var K=f[g+8]|f[g+9]<<8;q+=(B>>>4|K<<12)&8191,L+=K>>>1&8191;var G=f[g+10]|f[g+11]<<8;re+=(K>>>14|G<<2)&8191;var ee=f[g+12]|f[g+13]<<8;oe+=(G>>>11|ee<<5)&8191;var be=f[g+14]|f[g+15]<<8;ie+=(ee>>>8|be<<8)&8191,M+=be>>>5|x;var se=0,we=se;we+=C*H,we+=U*(5*_),we+=P*(5*de),we+=O*(5*ce),we+=q*(5*ne),se=we>>>13,we&=8191,we+=L*(5*V),we+=re*(5*X),we+=oe*(5*m),we+=ie*(5*u),we+=M*(5*D),se+=we>>>13,we&=8191;var le=se;le+=C*D,le+=U*H,le+=P*(5*_),le+=O*(5*de),le+=q*(5*ce),se=le>>>13,le&=8191,le+=L*(5*ne),le+=re*(5*V),le+=oe*(5*X),le+=ie*(5*m),le+=M*(5*u),se+=le>>>13,le&=8191;var _e=se;_e+=C*u,_e+=U*D,_e+=P*H,_e+=O*(5*_),_e+=q*(5*de),se=_e>>>13,_e&=8191,_e+=L*(5*ce),_e+=re*(5*ne),_e+=oe*(5*V),_e+=ie*(5*X),_e+=M*(5*m),se+=_e>>>13,_e&=8191;var j=se;j+=C*m,j+=U*u,j+=P*D,j+=O*H,j+=q*(5*_),se=j>>>13,j&=8191,j+=L*(5*de),j+=re*(5*ce),j+=oe*(5*ne),j+=ie*(5*V),j+=M*(5*X),se+=j>>>13,j&=8191;var $=se;$+=C*X,$+=U*m,$+=P*u,$+=O*D,$+=q*H,se=$>>>13,$&=8191,$+=L*(5*_),$+=re*(5*de),$+=oe*(5*ce),$+=ie*(5*ne),$+=M*(5*V),se+=$>>>13,$&=8191;var T=se;T+=C*V,T+=U*X,T+=P*m,T+=O*u,T+=q*D,se=T>>>13,T&=8191,T+=L*H,T+=re*(5*_),T+=oe*(5*de),T+=ie*(5*ce),T+=M*(5*ne),se+=T>>>13,T&=8191;var h=se;h+=C*ne,h+=U*V,h+=P*X,h+=O*m,h+=q*u,se=h>>>13,h&=8191,h+=L*D,h+=re*H,h+=oe*(5*_),h+=ie*(5*de),h+=M*(5*ce),se+=h>>>13,h&=8191;var I=se;I+=C*ce,I+=U*ne,I+=P*V,I+=O*X,I+=q*m,se=I>>>13,I&=8191,I+=L*u,I+=re*D,I+=oe*H,I+=ie*(5*_),I+=M*(5*de),se+=I>>>13,I&=8191;var ae=se;ae+=C*de,ae+=U*ce,ae+=P*ne,ae+=O*V,ae+=q*X,se=ae>>>13,ae&=8191,ae+=L*m,ae+=re*u,ae+=oe*D,ae+=ie*H,ae+=M*(5*_),se+=ae>>>13,ae&=8191;var fe=se;fe+=C*_,fe+=U*de,fe+=P*ce,fe+=O*ne,fe+=q*V,se=fe>>>13,fe&=8191,fe+=L*X,fe+=re*m,fe+=oe*u,fe+=ie*D,fe+=M*H,se+=fe>>>13,fe&=8191,se=(se<<2)+se|0,se=se+we|0,we=se&8191,se=se>>>13,le+=se,C=we,U=le,P=_e,O=j,q=$,L=T,re=h,oe=I,ie=ae,M=fe,g+=16,w-=16}this._h[0]=C,this._h[1]=U,this._h[2]=P,this._h[3]=O,this._h[4]=q,this._h[5]=L,this._h[6]=re,this._h[7]=oe,this._h[8]=ie,this._h[9]=M},p.prototype.finish=function(f,g){g===void 0&&(g=0);var w=new Uint16Array(10),x,C,U,P;if(this._leftover){for(P=this._leftover,this._buffer[P++]=1;P<16;P++)this._buffer[P]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(x=this._h[1]>>>13,this._h[1]&=8191,P=2;P<10;P++)this._h[P]+=x,x=this._h[P]>>>13,this._h[P]&=8191;for(this._h[0]+=x*5,x=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=x,x=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=x,w[0]=this._h[0]+5,x=w[0]>>>13,w[0]&=8191,P=1;P<10;P++)w[P]=this._h[P]+x,x=w[P]>>>13,w[P]&=8191;for(w[9]-=1<<13,C=(x^1)-1,P=0;P<10;P++)w[P]&=C;for(C=~C,P=0;P<10;P++)this._h[P]=this._h[P]&C|w[P];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,U=this._h[0]+this._pad[0],this._h[0]=U&65535,P=1;P<8;P++)U=(this._h[P]+this._pad[P]|0)+(U>>>16)|0,this._h[P]=U&65535;return f[g+0]=this._h[0]>>>0,f[g+1]=this._h[0]>>>8,f[g+2]=this._h[1]>>>0,f[g+3]=this._h[1]>>>8,f[g+4]=this._h[2]>>>0,f[g+5]=this._h[2]>>>8,f[g+6]=this._h[3]>>>0,f[g+7]=this._h[3]>>>8,f[g+8]=this._h[4]>>>0,f[g+9]=this._h[4]>>>8,f[g+10]=this._h[5]>>>0,f[g+11]=this._h[5]>>>8,f[g+12]=this._h[6]>>>0,f[g+13]=this._h[6]>>>8,f[g+14]=this._h[7]>>>0,f[g+15]=this._h[7]>>>8,this._finished=!0,this},p.prototype.update=function(f){var g=0,w=f.length,x;if(this._leftover){x=16-this._leftover,x>w&&(x=w);for(var C=0;C<x;C++)this._buffer[this._leftover+C]=f[g+C];if(w-=x,g+=x,this._leftover+=x,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(w>=16&&(x=w-w%16,this._blocks(f,g,x),g+=x,w-=x),w){for(var C=0;C<w;C++)this._buffer[this._leftover+C]=f[g+C];this._leftover+=w}return this},p.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},p.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},p}();n.Poly1305=s;function a(p,f){var g=new s(p);g.update(f);var w=g.digest();return g.clean(),w}n.oneTimeAuth=a;function l(p,f){return p.length!==n.DIGEST_LENGTH||f.length!==n.DIGEST_LENGTH?!1:t.equal(p,f)}n.equal=l})(yd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=jo,r=yd,s=Sr,a=Le,l=Pi;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var p=new Uint8Array(16),f=function(){function g(w){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,w.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(w)}return g.prototype.seal=function(w,x,C,U){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var P=new Uint8Array(16);P.set(w,P.length-w.length);var O=new Uint8Array(32);t.stream(this._key,P,O,4);var q=x.length+this.tagLength,L;if(U){if(U.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");L=U}else L=new Uint8Array(q);return t.streamXOR(this._key,P,x,L,4),this._authenticate(L.subarray(L.length-this.tagLength,L.length),O,L.subarray(0,L.length-this.tagLength),C),s.wipe(P),L},g.prototype.open=function(w,x,C,U){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(x.length<this.tagLength)return null;var P=new Uint8Array(16);P.set(w,P.length-w.length);var O=new Uint8Array(32);t.stream(this._key,P,O,4);var q=new Uint8Array(this.tagLength);if(this._authenticate(q,O,x.subarray(0,x.length-this.tagLength),C),!l.equal(q,x.subarray(x.length-this.tagLength,x.length)))return null;var L=x.length-this.tagLength,re;if(U){if(U.length!==L)throw new Error("ChaCha20Poly1305: incorrect destination length");re=U}else re=new Uint8Array(L);return t.streamXOR(this._key,P,x.subarray(0,x.length-this.tagLength),re,4),s.wipe(P),re},g.prototype.clean=function(){return s.wipe(this._key),this},g.prototype._authenticate=function(w,x,C,U){var P=new r.Poly1305(x);U&&(P.update(U),U.length%16>0&&P.update(p.subarray(U.length%16))),P.update(C),C.length%16>0&&P.update(p.subarray(C.length%16));var O=new Uint8Array(8);U&&a.writeUint64LE(U.length,O),P.update(O),a.writeUint64LE(C.length,O),P.update(O);for(var q=P.digest(),L=0;L<q.length;L++)w[L]=q[L];P.clean(),s.wipe(q),s.wipe(O)},g}();n.ChaCha20Poly1305=f})(cu);var md={},cs={},uu={};Object.defineProperty(uu,"__esModule",{value:!0});function Fm(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}uu.isSerializableHash=Fm;Object.defineProperty(cs,"__esModule",{value:!0});var Qr=uu,Lm=Pi,$m=Sr,bd=function(){function n(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var a=0;a<s.length;a++)s[a]^=54;this._inner.update(s);for(var a=0;a<s.length;a++)s[a]^=106;this._outer.update(s),Qr.isSerializableHash(this._inner)&&Qr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),$m.wipe(s)}return n.prototype.reset=function(){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Qr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Qr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(t){return this._inner.update(t),this},n.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(t){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(t){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},n}();cs.HMAC=bd;function Mm(n,t,r){var s=new bd(n,t);s.update(r);var a=s.digest();return s.clean(),a}cs.hmac=Mm;cs.equal=Lm.equal;Object.defineProperty(md,"__esModule",{value:!0});var Pl=cs,Tl=Sr,jm=function(){function n(t,r,s,a){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=a;var l=Pl.hmac(this._hash,s,r);this._hmac=new Pl.HMAC(t,l),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),Tl.wipe(this._buffer),Tl.wipe(this._counter),this._bufpos=0},n}(),qm=md.HKDF=jm,xn={},qo={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.BrowserRandomSource=void 0;const Nl=65536;class zm{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=Nl)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,Nl)));return r}}zo.BrowserRandomSource=zm;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.NodeRandomSource=void 0;const Hm=Sr;class Bm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof k_<"u"){const t=V_;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let a=0;a<s.length;a++)s[a]=r[a];return(0,Hm.wipe)(r),s}}Ho.NodeRandomSource=Bm;Object.defineProperty(qo,"__esModule",{value:!0});qo.SystemRandomSource=void 0;const Km=zo,km=Ho;class Vm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Km.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new km.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}qo.SystemRandomSource=Vm;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const t=qo,r=Le,s=Sr;n.defaultRandomSource=new t.SystemRandomSource;function a(w,x=n.defaultRandomSource){return x.randomBytes(w)}n.randomBytes=a;function l(w=n.defaultRandomSource){const x=a(4,w),C=(0,r.readUint32LE)(x);return(0,s.wipe)(x),C}n.randomUint32=l;const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(w,x=p,C=n.defaultRandomSource){if(x.length<2)throw new Error("randomString charset is too short");if(x.length>256)throw new Error("randomString charset is too long");let U="";const P=x.length,O=256-256%P;for(;w>0;){const q=a(Math.ceil(w*256/O),C);for(let L=0;L<q.length&&w>0;L++){const re=q[L];re<O&&(U+=x.charAt(re%P),w--)}(0,s.wipe)(q)}return U}n.randomString=f;function g(w,x=p,C=n.defaultRandomSource){const U=Math.ceil(w/(Math.log(x.length)/Math.LN2));return f(U,x,C)}n.randomStringForEntropy=g})(xn);var Bo={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Le,r=Sr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},f.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var x=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&w>0;)this._buffer[this._bufferLength++]=g[x++],w--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(x=l(this._temp,this._state,g,x,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[x++],w--;return this},f.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,x=this._bufferLength,C=w/536870912|0,U=w<<3,P=w%64<56?64:128;this._buffer[x]=128;for(var O=x+1;O<P-8;O++)this._buffer[O]=0;t.writeUint32BE(C,this._buffer,P-8),t.writeUint32BE(U,this._buffer,P-4),l(this._temp,this._state,this._buffer,0,P),this._finished=!0}for(var O=0;O<this.digestLength/4;O++)t.writeUint32BE(this._state[O],g,O*4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){r.wipe(g.state),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();n.SHA256=s;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(f,g,w,x,C){for(;C>=64;){for(var U=g[0],P=g[1],O=g[2],q=g[3],L=g[4],re=g[5],oe=g[6],ie=g[7],M=0;M<16;M++){var H=x+M*4;f[M]=t.readUint32BE(w,H)}for(var M=16;M<64;M++){var D=f[M-2],u=(D>>>17|D<<32-17)^(D>>>19|D<<32-19)^D>>>10;D=f[M-15];var m=(D>>>7|D<<32-7)^(D>>>18|D<<32-18)^D>>>3;f[M]=(u+f[M-7]|0)+(m+f[M-16]|0)}for(var M=0;M<64;M++){var u=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&re^~L&oe)|0)+(ie+(a[M]+f[M]|0)|0)|0,m=((U>>>2|U<<32-2)^(U>>>13|U<<32-13)^(U>>>22|U<<32-22))+(U&P^U&O^P&O)|0;ie=oe,oe=re,re=L,L=q+u|0,q=O,O=P,P=U,U=u+m|0}g[0]+=U,g[1]+=P,g[2]+=O,g[3]+=q,g[4]+=L,g[5]+=re,g[6]+=oe,g[7]+=ie,x+=64,C-=64}return x}function p(f){var g=new s;g.update(f);var w=g.digest();return g.clean(),w}n.hash=p})(Bo);var hu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const t=xn,r=Sr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(M){const H=new Float64Array(16);if(M)for(let D=0;D<M.length;D++)H[D]=M[D];return H}const a=new Uint8Array(32);a[0]=9;const l=s([56129,1]);function p(M){let H=1;for(let D=0;D<16;D++){let u=M[D]+H+65535;H=Math.floor(u/65536),M[D]=u-H*65536}M[0]+=H-1+37*(H-1)}function f(M,H,D){const u=~(D-1);for(let m=0;m<16;m++){const X=u&(M[m]^H[m]);M[m]^=X,H[m]^=X}}function g(M,H){const D=s(),u=s();for(let m=0;m<16;m++)u[m]=H[m];p(u),p(u),p(u);for(let m=0;m<2;m++){D[0]=u[0]-65517;for(let V=1;V<15;V++)D[V]=u[V]-65535-(D[V-1]>>16&1),D[V-1]&=65535;D[15]=u[15]-32767-(D[14]>>16&1);const X=D[15]>>16&1;D[14]&=65535,f(u,D,1-X)}for(let m=0;m<16;m++)M[2*m]=u[m]&255,M[2*m+1]=u[m]>>8}function w(M,H){for(let D=0;D<16;D++)M[D]=H[2*D]+(H[2*D+1]<<8);M[15]&=32767}function x(M,H,D){for(let u=0;u<16;u++)M[u]=H[u]+D[u]}function C(M,H,D){for(let u=0;u<16;u++)M[u]=H[u]-D[u]}function U(M,H,D){let u,m,X=0,V=0,ne=0,ce=0,de=0,_=0,S=0,Z=0,W=0,B=0,K=0,G=0,ee=0,be=0,se=0,we=0,le=0,_e=0,j=0,$=0,T=0,h=0,I=0,ae=0,fe=0,Ie=0,He=0,ke=0,$e=0,dt=0,pt=0,je=D[0],xe=D[1],Re=D[2],Ue=D[3],qe=D[4],Oe=D[5],Fe=D[6],Se=D[7],Ce=D[8],Be=D[9],Ae=D[10],Ve=D[11],We=D[12],et=D[13],tt=D[14],Je=D[15];u=H[0],X+=u*je,V+=u*xe,ne+=u*Re,ce+=u*Ue,de+=u*qe,_+=u*Oe,S+=u*Fe,Z+=u*Se,W+=u*Ce,B+=u*Be,K+=u*Ae,G+=u*Ve,ee+=u*We,be+=u*et,se+=u*tt,we+=u*Je,u=H[1],V+=u*je,ne+=u*xe,ce+=u*Re,de+=u*Ue,_+=u*qe,S+=u*Oe,Z+=u*Fe,W+=u*Se,B+=u*Ce,K+=u*Be,G+=u*Ae,ee+=u*Ve,be+=u*We,se+=u*et,we+=u*tt,le+=u*Je,u=H[2],ne+=u*je,ce+=u*xe,de+=u*Re,_+=u*Ue,S+=u*qe,Z+=u*Oe,W+=u*Fe,B+=u*Se,K+=u*Ce,G+=u*Be,ee+=u*Ae,be+=u*Ve,se+=u*We,we+=u*et,le+=u*tt,_e+=u*Je,u=H[3],ce+=u*je,de+=u*xe,_+=u*Re,S+=u*Ue,Z+=u*qe,W+=u*Oe,B+=u*Fe,K+=u*Se,G+=u*Ce,ee+=u*Be,be+=u*Ae,se+=u*Ve,we+=u*We,le+=u*et,_e+=u*tt,j+=u*Je,u=H[4],de+=u*je,_+=u*xe,S+=u*Re,Z+=u*Ue,W+=u*qe,B+=u*Oe,K+=u*Fe,G+=u*Se,ee+=u*Ce,be+=u*Be,se+=u*Ae,we+=u*Ve,le+=u*We,_e+=u*et,j+=u*tt,$+=u*Je,u=H[5],_+=u*je,S+=u*xe,Z+=u*Re,W+=u*Ue,B+=u*qe,K+=u*Oe,G+=u*Fe,ee+=u*Se,be+=u*Ce,se+=u*Be,we+=u*Ae,le+=u*Ve,_e+=u*We,j+=u*et,$+=u*tt,T+=u*Je,u=H[6],S+=u*je,Z+=u*xe,W+=u*Re,B+=u*Ue,K+=u*qe,G+=u*Oe,ee+=u*Fe,be+=u*Se,se+=u*Ce,we+=u*Be,le+=u*Ae,_e+=u*Ve,j+=u*We,$+=u*et,T+=u*tt,h+=u*Je,u=H[7],Z+=u*je,W+=u*xe,B+=u*Re,K+=u*Ue,G+=u*qe,ee+=u*Oe,be+=u*Fe,se+=u*Se,we+=u*Ce,le+=u*Be,_e+=u*Ae,j+=u*Ve,$+=u*We,T+=u*et,h+=u*tt,I+=u*Je,u=H[8],W+=u*je,B+=u*xe,K+=u*Re,G+=u*Ue,ee+=u*qe,be+=u*Oe,se+=u*Fe,we+=u*Se,le+=u*Ce,_e+=u*Be,j+=u*Ae,$+=u*Ve,T+=u*We,h+=u*et,I+=u*tt,ae+=u*Je,u=H[9],B+=u*je,K+=u*xe,G+=u*Re,ee+=u*Ue,be+=u*qe,se+=u*Oe,we+=u*Fe,le+=u*Se,_e+=u*Ce,j+=u*Be,$+=u*Ae,T+=u*Ve,h+=u*We,I+=u*et,ae+=u*tt,fe+=u*Je,u=H[10],K+=u*je,G+=u*xe,ee+=u*Re,be+=u*Ue,se+=u*qe,we+=u*Oe,le+=u*Fe,_e+=u*Se,j+=u*Ce,$+=u*Be,T+=u*Ae,h+=u*Ve,I+=u*We,ae+=u*et,fe+=u*tt,Ie+=u*Je,u=H[11],G+=u*je,ee+=u*xe,be+=u*Re,se+=u*Ue,we+=u*qe,le+=u*Oe,_e+=u*Fe,j+=u*Se,$+=u*Ce,T+=u*Be,h+=u*Ae,I+=u*Ve,ae+=u*We,fe+=u*et,Ie+=u*tt,He+=u*Je,u=H[12],ee+=u*je,be+=u*xe,se+=u*Re,we+=u*Ue,le+=u*qe,_e+=u*Oe,j+=u*Fe,$+=u*Se,T+=u*Ce,h+=u*Be,I+=u*Ae,ae+=u*Ve,fe+=u*We,Ie+=u*et,He+=u*tt,ke+=u*Je,u=H[13],be+=u*je,se+=u*xe,we+=u*Re,le+=u*Ue,_e+=u*qe,j+=u*Oe,$+=u*Fe,T+=u*Se,h+=u*Ce,I+=u*Be,ae+=u*Ae,fe+=u*Ve,Ie+=u*We,He+=u*et,ke+=u*tt,$e+=u*Je,u=H[14],se+=u*je,we+=u*xe,le+=u*Re,_e+=u*Ue,j+=u*qe,$+=u*Oe,T+=u*Fe,h+=u*Se,I+=u*Ce,ae+=u*Be,fe+=u*Ae,Ie+=u*Ve,He+=u*We,ke+=u*et,$e+=u*tt,dt+=u*Je,u=H[15],we+=u*je,le+=u*xe,_e+=u*Re,j+=u*Ue,$+=u*qe,T+=u*Oe,h+=u*Fe,I+=u*Se,ae+=u*Ce,fe+=u*Be,Ie+=u*Ae,He+=u*Ve,ke+=u*We,$e+=u*et,dt+=u*tt,pt+=u*Je,X+=38*le,V+=38*_e,ne+=38*j,ce+=38*$,de+=38*T,_+=38*h,S+=38*I,Z+=38*ae,W+=38*fe,B+=38*Ie,K+=38*He,G+=38*ke,ee+=38*$e,be+=38*dt,se+=38*pt,m=1,u=X+m+65535,m=Math.floor(u/65536),X=u-m*65536,u=V+m+65535,m=Math.floor(u/65536),V=u-m*65536,u=ne+m+65535,m=Math.floor(u/65536),ne=u-m*65536,u=ce+m+65535,m=Math.floor(u/65536),ce=u-m*65536,u=de+m+65535,m=Math.floor(u/65536),de=u-m*65536,u=_+m+65535,m=Math.floor(u/65536),_=u-m*65536,u=S+m+65535,m=Math.floor(u/65536),S=u-m*65536,u=Z+m+65535,m=Math.floor(u/65536),Z=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=B+m+65535,m=Math.floor(u/65536),B=u-m*65536,u=K+m+65535,m=Math.floor(u/65536),K=u-m*65536,u=G+m+65535,m=Math.floor(u/65536),G=u-m*65536,u=ee+m+65535,m=Math.floor(u/65536),ee=u-m*65536,u=be+m+65535,m=Math.floor(u/65536),be=u-m*65536,u=se+m+65535,m=Math.floor(u/65536),se=u-m*65536,u=we+m+65535,m=Math.floor(u/65536),we=u-m*65536,X+=m-1+37*(m-1),m=1,u=X+m+65535,m=Math.floor(u/65536),X=u-m*65536,u=V+m+65535,m=Math.floor(u/65536),V=u-m*65536,u=ne+m+65535,m=Math.floor(u/65536),ne=u-m*65536,u=ce+m+65535,m=Math.floor(u/65536),ce=u-m*65536,u=de+m+65535,m=Math.floor(u/65536),de=u-m*65536,u=_+m+65535,m=Math.floor(u/65536),_=u-m*65536,u=S+m+65535,m=Math.floor(u/65536),S=u-m*65536,u=Z+m+65535,m=Math.floor(u/65536),Z=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=B+m+65535,m=Math.floor(u/65536),B=u-m*65536,u=K+m+65535,m=Math.floor(u/65536),K=u-m*65536,u=G+m+65535,m=Math.floor(u/65536),G=u-m*65536,u=ee+m+65535,m=Math.floor(u/65536),ee=u-m*65536,u=be+m+65535,m=Math.floor(u/65536),be=u-m*65536,u=se+m+65535,m=Math.floor(u/65536),se=u-m*65536,u=we+m+65535,m=Math.floor(u/65536),we=u-m*65536,X+=m-1+37*(m-1),M[0]=X,M[1]=V,M[2]=ne,M[3]=ce,M[4]=de,M[5]=_,M[6]=S,M[7]=Z,M[8]=W,M[9]=B,M[10]=K,M[11]=G,M[12]=ee,M[13]=be,M[14]=se,M[15]=we}function P(M,H){U(M,H,H)}function O(M,H){const D=s();for(let u=0;u<16;u++)D[u]=H[u];for(let u=253;u>=0;u--)P(D,D),u!==2&&u!==4&&U(D,D,H);for(let u=0;u<16;u++)M[u]=D[u]}function q(M,H){const D=new Uint8Array(32),u=new Float64Array(80),m=s(),X=s(),V=s(),ne=s(),ce=s(),de=s();for(let W=0;W<31;W++)D[W]=M[W];D[31]=M[31]&127|64,D[0]&=248,w(u,H);for(let W=0;W<16;W++)X[W]=u[W];m[0]=ne[0]=1;for(let W=254;W>=0;--W){const B=D[W>>>3]>>>(W&7)&1;f(m,X,B),f(V,ne,B),x(ce,m,V),C(m,m,V),x(V,X,ne),C(X,X,ne),P(ne,ce),P(de,m),U(m,V,m),U(V,X,ce),x(ce,m,V),C(m,m,V),P(X,m),C(V,ne,de),U(m,V,l),x(m,m,ne),U(V,V,m),U(m,ne,de),U(ne,X,u),P(X,ce),f(m,X,B),f(V,ne,B)}for(let W=0;W<16;W++)u[W+16]=m[W],u[W+32]=V[W],u[W+48]=X[W],u[W+64]=ne[W];const _=u.subarray(32),S=u.subarray(16);O(_,_),U(S,S,_);const Z=new Uint8Array(32);return g(Z,S),Z}n.scalarMult=q;function L(M){return q(M,a)}n.scalarMultBase=L;function re(M){if(M.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const H=new Uint8Array(M);return{publicKey:L(H),secretKey:H}}n.generateKeyPairFromSeed=re;function oe(M){const H=(0,t.randomBytes)(32,M),D=re(H);return(0,r.wipe)(H),D}n.generateKeyPair=oe;function ie(M,H,D=!1){if(M.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(H.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=q(M,H);if(D){let m=0;for(let X=0;X<u.length;X++)m|=u[X];if(m===0)throw new Error("X25519: invalid shared key")}return u}n.sharedKey=ie})(hu);function lu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function wd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?lu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Vc(n,t){t||(t=n.reduce((a,l)=>a+l.length,0));const r=wd(t);let s=0;for(const a of n)r.set(a,s),s+=a.length;return lu(r)}function Gm(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var l=n.charAt(a),p=l.charCodeAt(0);if(r[p]!==255)throw new TypeError(l+" is ambiguous");r[p]=a}var f=n.length,g=n.charAt(0),w=Math.log(f)/Math.log(256),x=Math.log(256)/Math.log(f);function C(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var q=0,L=0,re=0,oe=O.length;re!==oe&&O[re]===0;)re++,q++;for(var ie=(oe-re)*x+1>>>0,M=new Uint8Array(ie);re!==oe;){for(var H=O[re],D=0,u=ie-1;(H!==0||D<L)&&u!==-1;u--,D++)H+=256*M[u]>>>0,M[u]=H%f>>>0,H=H/f>>>0;if(H!==0)throw new Error("Non-zero carry");L=D,re++}for(var m=ie-L;m!==ie&&M[m]===0;)m++;for(var X=g.repeat(q);m<ie;++m)X+=n.charAt(M[m]);return X}function U(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var q=0;if(O[q]!==" "){for(var L=0,re=0;O[q]===g;)L++,q++;for(var oe=(O.length-q)*w+1>>>0,ie=new Uint8Array(oe);O[q];){var M=r[O.charCodeAt(q)];if(M===255)return;for(var H=0,D=oe-1;(M!==0||H<re)&&D!==-1;D--,H++)M+=f*ie[D]>>>0,ie[D]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");re=H,q++}if(O[q]!==" "){for(var u=oe-re;u!==oe&&ie[u]===0;)u++;for(var m=new Uint8Array(L+(oe-u)),X=L;u!==oe;)m[X++]=ie[u++];return m}}}function P(O){var q=U(O);if(q)return q;throw new Error(`Non-${t} character`)}return{encode:C,decodeUnsafe:U,decode:P}}var Wm=Gm,Ym=Wm;const Jm=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Xm=n=>new TextEncoder().encode(n),Zm=n=>new TextDecoder().decode(n);class Qm{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class eb{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ed(this,t)}}class tb{constructor(t){this.decoders=t}or(t){return Ed(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ed=(n,t)=>new tb({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class rb{constructor(t,r,s,a){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new Qm(t,r,s),this.decoder=new eb(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ko=({name:n,prefix:t,encode:r,decode:s})=>new rb(n,t,r,s),us=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:a}=Ym(r,t);return Ko({prefix:n,name:t,encode:s,decode:l=>Jm(a(l))})},ib=(n,t,r,s)=>{const a={};for(let x=0;x<t.length;++x)a[t[x]]=x;let l=n.length;for(;n[l-1]==="=";)--l;const p=new Uint8Array(l*r/8|0);let f=0,g=0,w=0;for(let x=0;x<l;++x){const C=a[n[x]];if(C===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|C,f+=r,f>=8&&(f-=8,p[w++]=255&g>>f)}if(f>=r||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return p},nb=(n,t,r)=>{const s=t[t.length-1]==="=",a=(1<<r)-1;let l="",p=0,f=0;for(let g=0;g<n.length;++g)for(f=f<<8|n[g],p+=8;p>r;)p-=r,l+=t[a&f>>p];if(p&&(l+=t[a&f<<r-p]),s)for(;l.length*r&7;)l+="=";return l},Wt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>Ko({prefix:t,name:n,encode(a){return nb(a,s,r)},decode(a){return ib(a,s,r,n)}}),sb=Ko({prefix:"\0",name:"identity",encode:n=>Zm(n),decode:n=>Xm(n)}),ob=Object.freeze(Object.defineProperty({__proto__:null,identity:sb},Symbol.toStringTag,{value:"Module"})),ab=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),cb=Object.freeze(Object.defineProperty({__proto__:null,base2:ab},Symbol.toStringTag,{value:"Module"})),ub=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),hb=Object.freeze(Object.defineProperty({__proto__:null,base8:ub},Symbol.toStringTag,{value:"Module"})),lb=us({prefix:"9",name:"base10",alphabet:"0123456789"}),fb=Object.freeze(Object.defineProperty({__proto__:null,base10:lb},Symbol.toStringTag,{value:"Module"})),db=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pb=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),gb=Object.freeze(Object.defineProperty({__proto__:null,base16:db,base16upper:pb},Symbol.toStringTag,{value:"Module"})),vb=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yb=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_b=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mb=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),bb=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wb=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Eb=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Db=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sb=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ib=Object.freeze(Object.defineProperty({__proto__:null,base32:vb,base32hex:bb,base32hexpad:Eb,base32hexpadupper:Db,base32hexupper:wb,base32pad:_b,base32padupper:mb,base32upper:yb,base32z:Sb},Symbol.toStringTag,{value:"Module"})),xb=us({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ab=us({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ob=Object.freeze(Object.defineProperty({__proto__:null,base36:xb,base36upper:Ab},Symbol.toStringTag,{value:"Module"})),Cb=us({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Pb=us({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Tb=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Cb,base58flickr:Pb},Symbol.toStringTag,{value:"Module"})),Nb=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rb=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ub=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fb=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Lb=Object.freeze(Object.defineProperty({__proto__:null,base64:Nb,base64pad:Rb,base64url:Ub,base64urlpad:Fb},Symbol.toStringTag,{value:"Module"})),Dd=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),$b=Dd.reduce((n,t,r)=>(n[r]=t,n),[]),Mb=Dd.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function jb(n){return n.reduce((t,r)=>(t+=$b[r],t),"")}function qb(n){const t=[];for(const r of n){const s=Mb[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const zb=Ko({prefix:"ðŸš€",name:"base256emoji",encode:jb,decode:qb}),Hb=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:zb},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Rl={...ob,...cb,...hb,...fb,...gb,...Ib,...Ob,...Tb,...Lb,...Hb};function Sd(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const Ul=Sd("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),mc=Sd("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=wd(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),Id={utf8:Ul,"utf-8":Ul,hex:Rl.base16,latin1:mc,ascii:mc,binary:mc,...Rl};function yr(n,t="utf8"){const r=Id[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lu(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function cr(n,t="utf8"){const r=Id[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var ye={},bc={},Wn={},Fl;function Bb(){if(Fl)return Wn;Fl=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.delay=void 0;function n(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Wn.delay=n,Wn}var Gi={},wc={},Wi={},Ll;function Kb(){return Ll||(Ll=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.ONE_THOUSAND=Wi.ONE_HUNDRED=void 0,Wi.ONE_HUNDRED=100,Wi.ONE_THOUSAND=1e3),Wi}var Ec={},$l;function kb(){return $l||($l=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Ec)),Ec}var Ml;function xd(){return Ml||(Ml=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Vr;t.__exportStar(Kb(),n),t.__exportStar(kb(),n)}(wc)),wc}var jl;function Vb(){if(jl)return Gi;jl=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.fromMiliseconds=Gi.toMiliseconds=void 0;const n=xd();function t(s){return s*n.ONE_THOUSAND}Gi.toMiliseconds=t;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Gi.fromMiliseconds=r,Gi}var ql;function Gb(){return ql||(ql=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Vr;t.__exportStar(Bb(),n),t.__exportStar(Vb(),n)}(bc)),bc}var En={},zl;function Wb(){if(zl)return En;zl=1,Object.defineProperty(En,"__esModule",{value:!0}),En.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:a})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return En.Watch=n,En.default=n,En}var Dc={},Yn={},Hl;function Yb(){if(Hl)return Yn;Hl=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.IWatch=void 0;class n{}return Yn.IWatch=n,Yn}var Bl;function Jb(){return Bl||(Bl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Vr.__exportStar(Yb(),n)}(Dc)),Dc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Vr;t.__exportStar(Gb(),n),t.__exportStar(Wb(),n),t.__exportStar(Jb(),n),t.__exportStar(xd(),n)})(ye);var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.getWindowMetadata=void 0;const Kl=ou;function Xb(){let n,t;try{n=Kl.getDocumentOrThrow(),t=Kl.getLocationOrThrow()}catch{return null}function r(){const C=n.getElementsByTagName("link"),U=[];for(let P=0;P<C.length;P++){const O=C[P],q=O.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const L=O.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(L.indexOf("/")===0)re+=L;else{const oe=t.pathname.split("/");oe.pop();const ie=oe.join("/");re+=ie+"/"+L}U.push(re)}else if(L.indexOf("//")===0){const re=t.protocol+L;U.push(re)}else U.push(L)}}return U}function s(...C){const U=n.getElementsByTagName("meta");for(let P=0;P<U.length;P++){const O=U[P],q=["itemprop","property","name"].map(L=>O.getAttribute(L)).filter(L=>L?C.includes(L):!1);if(q.length&&q){const L=O.getAttribute("content");if(L)return L}}return""}function a(){let C=s("name","og:site_name","og:title","twitter:title");return C||(C=n.title),C}function l(){return s("description","og:description","twitter:description","keywords")}const p=a(),f=l(),g=t.origin,w=r();return{description:f,url:g,icons:w,name:p}}fu.getWindowMetadata=Xb;const Zb={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Qb(n,t=[]){const r=[];return Object.keys(n).forEach(s=>{if(t.length&&!t.includes(s))return;const a=n[s];r.push(...a.accounts)}),r}const ew={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function tw(n,t){const{message:r,code:s}=ew[n];return{message:t?`${r} ${t}`:r,code:s}}function Gc(n,t){return Array.isArray(n)?typeof t<"u"&&n.length?n.every(t):!0:!1}var ko={},hs={};Object.defineProperty(hs,"__esModule",{value:!0});function rw(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}hs.safeJsonParse=rw;function iw(n){return typeof n=="string"?n:JSON.stringify(n,(t,r)=>typeof r>"u"?null:r)}hs.safeJsonStringify=iw;var Oo={},Sc={get exports(){return Oo},set exports(n){Oo=n}},kl;function nw(){return kl||(kl=1,function(){let n;function t(){}n=t,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ai<"u"&&Ai.localStorage?Sc.exports=Ai.localStorage:typeof window<"u"&&window.localStorage?Sc.exports=window.localStorage:Sc.exports=new t}()),Oo}var Ic={},Jn={},Vl;function sw(){if(Vl)return Jn;Vl=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.IKeyValueStorage=void 0;class n{}return Jn.IKeyValueStorage=n,Jn}var Xn={},Gl;function ow(){if(Gl)return Xn;Gl=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.parseEntry=void 0;const n=hs;function t(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return Xn.parseEntry=t,Xn}var Wl;function aw(){return Wl||(Wl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Vr;t.__exportStar(sw(),n),t.__exportStar(ow(),n)}(Ic)),Ic}Object.defineProperty(ko,"__esModule",{value:!0});ko.KeyValueStorage=void 0;const Dn=Vr,Yl=hs,cw=Dn.__importDefault(nw()),uw=aw();class Ad{constructor(){this.localStorage=cw.default}getKeys(){return Dn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Dn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(uw.parseEntry)})}getItem(t){return Dn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return Yl.safeJsonParse(r)})}setItem(t,r){return Dn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,Yl.safeJsonStringify(r))})}removeItem(t){return Dn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}ko.KeyValueStorage=Ad;var hw=ko.default=Ad,An={},Zn={},xc={},Qn={};class Zi{}const lw=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Zi},Symbol.toStringTag,{value:"Module"})),fw=G_(lw);var Jl;function dw(){if(Jl)return Qn;Jl=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.IHeartBeat=void 0;const n=fw;class t extends n.IEvents{constructor(s){super()}}return Qn.IHeartBeat=t,Qn}var Xl;function Od(){return Xl||(Xl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Vr.__exportStar(dw(),n)}(xc)),xc}var Ac={},Yi={},Zl;function pw(){if(Zl)return Yi;Zl=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.HEARTBEAT_EVENTS=Yi.HEARTBEAT_INTERVAL=void 0;const n=ye;return Yi.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Yi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Yi}var Ql;function Cd(){return Ql||(Ql=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Vr.__exportStar(pw(),n)}(Ac)),Ac}var ef;function gw(){if(ef)return Zn;ef=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.HeartBeat=void 0;const n=Vr,t=ur,r=ye,s=Od(),a=Cd();class l extends s.IHeartBeat{constructor(f){super(f),this.events=new t.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||a.HEARTBEAT_INTERVAL}static init(f){return n.__awaiter(this,void 0,void 0,function*(){const g=new l(f);return yield g.init(),g})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,g){this.events.on(f,g)}once(f,g){this.events.once(f,g)}off(f,g){this.events.off(f,g)}removeListener(f,g){this.events.removeListener(f,g)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return Zn.HeartBeat=l,Zn}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Vr;t.__exportStar(gw(),n),t.__exportStar(Od(),n),t.__exportStar(Cd(),n)})(An);var Qe={},Oc,tf;function vw(){if(tf)return Oc;tf=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Oc=t;function t(r,s,a){var l=a&&a.stringify||n,p=1;if(typeof r=="object"&&r!==null){var f=s.length+p;if(f===1)return r;var g=new Array(f);g[0]=l(r);for(var w=1;w<f;w++)g[w]=l(s[w]);return g.join(" ")}if(typeof r!="string")return r;var x=s.length;if(x===0)return r;for(var C="",U=1-p,P=-1,O=r&&r.length||0,q=0;q<O;){if(r.charCodeAt(q)===37&&q+1<O){switch(P=P>-1?P:0,r.charCodeAt(q+1)){case 100:case 102:if(U>=x||s[U]==null)break;P<q&&(C+=r.slice(P,q)),C+=Number(s[U]),P=q+2,q++;break;case 105:if(U>=x||s[U]==null)break;P<q&&(C+=r.slice(P,q)),C+=Math.floor(Number(s[U])),P=q+2,q++;break;case 79:case 111:case 106:if(U>=x||s[U]===void 0)break;P<q&&(C+=r.slice(P,q));var L=typeof s[U];if(L==="string"){C+="'"+s[U]+"'",P=q+2,q++;break}if(L==="function"){C+=s[U].name||"<anonymous>",P=q+2,q++;break}C+=l(s[U]),P=q+2,q++;break;case 115:if(U>=x)break;P<q&&(C+=r.slice(P,q)),C+=String(s[U]),P=q+2,q++;break;case 37:P<q&&(C+=r.slice(P,q)),C+="%",P=q+2,q++,U--;break}++U}++q}return P===-1?r:(P<O&&(C+=r.slice(P)),C)}return Oc}var Cc,rf;function yw(){if(rf)return Cc;rf=1;const n=vw();Cc=a;const t=H().console||{},r={mapHttpRequest:O,mapHttpResponse:O,wrapRequestSerializer:q,wrapResponseSerializer:q,wrapErrorSerializer:q,req:O,res:O,err:U};function s(D,u){return Array.isArray(D)?D.filter(function(X){return X!=="!stdSerializers.err"}):D===!0?Object.keys(u):!1}function a(D){D=D||{},D.browser=D.browser||{};const u=D.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const m=D.browser.write||t;D.browser.write&&(D.browser.asObject=!0);const X=D.serializers||{},V=s(D.browser.serialize,X);let ne=D.browser.serialize;Array.isArray(D.browser.serialize)&&D.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ne=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),D.enabled===!1&&(D.level="silent");const de=D.level||"info",_=Object.create(m);_.log||(_.log=L),Object.defineProperty(_,"levelVal",{get:Z}),Object.defineProperty(_,"level",{get:W,set:B});const S={transmit:u,serialize:V,asObject:D.browser.asObject,levels:ce,timestamp:P(D)};_.levels=a.levels,_.level=de,_.setMaxListeners=_.getMaxListeners=_.emit=_.addListener=_.on=_.prependListener=_.once=_.prependOnceListener=_.removeListener=_.removeAllListeners=_.listeners=_.listenerCount=_.eventNames=_.write=_.flush=L,_.serializers=X,_._serialize=V,_._stdErrSerialize=ne,_.child=K,u&&(_._logEvent=C());function Z(){return this.level==="silent"?1/0:this.levels.values[this.level]}function W(){return this._level}function B(G){if(G!=="silent"&&!this.levels.values[G])throw Error("unknown level "+G);this._level=G,l(S,_,"error","log"),l(S,_,"fatal","error"),l(S,_,"warn","error"),l(S,_,"info","log"),l(S,_,"debug","log"),l(S,_,"trace","log")}function K(G,ee){if(!G)throw new Error("missing bindings for child Pino");ee=ee||{},V&&G.serializers&&(ee.serializers=G.serializers);const be=ee.serializers;if(V&&be){var se=Object.assign({},X,be),we=D.browser.serialize===!0?Object.keys(se):V;delete G.serializers,g([G],we,se,this._stdErrSerialize)}function le(_e){this._childLevel=(_e._childLevel|0)+1,this.error=w(_e,G,"error"),this.fatal=w(_e,G,"fatal"),this.warn=w(_e,G,"warn"),this.info=w(_e,G,"info"),this.debug=w(_e,G,"debug"),this.trace=w(_e,G,"trace"),se&&(this.serializers=se,this._serialize=we),u&&(this._logEvent=C([].concat(_e._logEvent.bindings,G)))}return le.prototype=this,new le(this)}return _}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:re,epochTime:oe,unixTime:ie,isoTime:M});function l(D,u,m,X){const V=Object.getPrototypeOf(u);u[m]=u.levelVal>u.levels.values[m]?L:V[m]?V[m]:t[m]||t[X]||L,p(D,u,m)}function p(D,u,m){!D.transmit&&u[m]===L||(u[m]=function(X){return function(){const ne=D.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var _=0;_<ce.length;_++)ce[_]=arguments[_];if(D.serialize&&!D.asObject&&g(ce,this._serialize,this.serializers,this._stdErrSerialize),D.asObject?X.call(de,f(this,m,ce,ne)):X.apply(de,ce),D.transmit){const S=D.transmit.level||u.level,Z=a.levels.values[S],W=a.levels.values[m];if(W<Z)return;x(this,{ts:ne,methodLevel:m,methodValue:W,transmitLevel:S,transmitValue:a.levels.values[D.transmit.level||u.level],send:D.transmit.send,val:u.levelVal},ce)}}}(u[m]))}function f(D,u,m,X){D._serialize&&g(m,D._serialize,D.serializers,D._stdErrSerialize);const V=m.slice();let ne=V[0];const ce={};X&&(ce.time=X),ce.level=a.levels.values[u];let de=(D._childLevel|0)+1;if(de<1&&(de=1),ne!==null&&typeof ne=="object"){for(;de--&&typeof V[0]=="object";)Object.assign(ce,V.shift());ne=V.length?n(V.shift(),V):void 0}else typeof ne=="string"&&(ne=n(V.shift(),V));return ne!==void 0&&(ce.msg=ne),ce}function g(D,u,m,X){for(const V in D)if(X&&D[V]instanceof Error)D[V]=a.stdSerializers.err(D[V]);else if(typeof D[V]=="object"&&!Array.isArray(D[V]))for(const ne in D[V])u&&u.indexOf(ne)>-1&&ne in m&&(D[V][ne]=m[ne](D[V][ne]))}function w(D,u,m){return function(){const X=new Array(1+arguments.length);X[0]=u;for(var V=1;V<X.length;V++)X[V]=arguments[V-1];return D[m].apply(this,X)}}function x(D,u,m){const X=u.send,V=u.ts,ne=u.methodLevel,ce=u.methodValue,de=u.val,_=D._logEvent.bindings;g(m,D._serialize||Object.keys(D.serializers),D.serializers,D._stdErrSerialize===void 0?!0:D._stdErrSerialize),D._logEvent.ts=V,D._logEvent.messages=m.filter(function(S){return _.indexOf(S)===-1}),D._logEvent.level.label=ne,D._logEvent.level.value=ce,X(ne,D._logEvent,de),D._logEvent=C(_)}function C(D){return{ts:0,messages:[],bindings:D||[],level:{label:"",value:0}}}function U(D){const u={type:D.constructor.name,msg:D.message,stack:D.stack};for(const m in D)u[m]===void 0&&(u[m]=D[m]);return u}function P(D){return typeof D.timestamp=="function"?D.timestamp:D.timestamp===!1?re:oe}function O(){return{}}function q(D){return D}function L(){}function re(){return!1}function oe(){return Date.now()}function ie(){return Math.round(Date.now()/1e3)}function M(){return new Date(Date.now()).toISOString()}function H(){function D(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return D(self)||D(window)||D(this)||{}}}return Cc}var Ji={},nf;function Pd(){return nf||(nf=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.PINO_CUSTOM_CONTEXT_KEY=Ji.PINO_LOGGER_DEFAULTS=void 0,Ji.PINO_LOGGER_DEFAULTS={level:"info"},Ji.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Ji}var sr={},sf;function _w(){if(sf)return sr;sf=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.generateChildLogger=sr.formatChildLoggerContext=sr.getLoggerContext=sr.setBrowserLoggerContext=sr.getBrowserLoggerContext=sr.getDefaultLoggerOptions=void 0;const n=Pd();function t(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||n.PINO_LOGGER_DEFAULTS.level})}sr.getDefaultLoggerOptions=t;function r(f,g=n.PINO_CUSTOM_CONTEXT_KEY){return f[g]||""}sr.getBrowserLoggerContext=r;function s(f,g,w=n.PINO_CUSTOM_CONTEXT_KEY){return f[w]=g,f}sr.setBrowserLoggerContext=s;function a(f,g=n.PINO_CUSTOM_CONTEXT_KEY){let w="";return typeof f.bindings>"u"?w=r(f,g):w=f.bindings().context||"",w}sr.getLoggerContext=a;function l(f,g,w=n.PINO_CUSTOM_CONTEXT_KEY){const x=a(f,w);return x.trim()?`${x}/${g}`:g}sr.formatChildLoggerContext=l;function p(f,g,w=n.PINO_CUSTOM_CONTEXT_KEY){const x=l(f,g,w),C=f.child({context:x});return s(C,x,w)}return sr.generateChildLogger=p,sr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const t=Vr,r=t.__importDefault(yw());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Pd(),n),t.__exportStar(_w(),n)})(Qe);class mw extends Zi{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class bw extends Zi{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class ww{constructor(t,r){this.logger=t,this.core=r}}let Ew=class extends Zi{constructor(t,r){super(),this.relayer=t,this.logger=r}},Dw=class extends Zi{constructor(t){super()}},Sw=class{constructor(t,r,s,a){this.core=t,this.logger=r,this.name=s}};class Iw extends Zi{constructor(t,r){super(),this.relayer=t,this.logger=r}}let xw=class extends Zi{constructor(t,r){super(),this.core=t,this.logger=r}},Aw=class{constructor(t,r){this.projectId=t,this.logger=r}},Ow=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},Cw=class{constructor(t){this.client=t}};const Pw=n=>JSON.stringify(n,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),Tw=n=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(t,'$1"$2n"$3');return JSON.parse(r,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function du(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return Tw(n)}catch{return n}}function as(n){return typeof n=="string"?n:Pw(n)||""}var pu={},Td={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Le,r=Sr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},f.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var x=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&w>0;)this._buffer[this._bufferLength++]=g[x++],w--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(x=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,x,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[x++],w--;return this},f.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,x=this._bufferLength,C=w/536870912|0,U=w<<3,P=w%128<112?128:256;this._buffer[x]=128;for(var O=x+1;O<P-8;O++)this._buffer[O]=0;t.writeUint32BE(C,this._buffer,P-8),t.writeUint32BE(U,this._buffer,P-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,P),this._finished=!0}for(var O=0;O<this.digestLength/8;O++)t.writeUint32BE(this._stateHi[O],g,O*8),t.writeUint32BE(this._stateLo[O],g,O*8+4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){r.wipe(g.stateHi),r.wipe(g.stateLo),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();n.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(f,g,w,x,C,U,P){for(var O=w[0],q=w[1],L=w[2],re=w[3],oe=w[4],ie=w[5],M=w[6],H=w[7],D=x[0],u=x[1],m=x[2],X=x[3],V=x[4],ne=x[5],ce=x[6],de=x[7],_,S,Z,W,B,K,G,ee;P>=128;){for(var be=0;be<16;be++){var se=8*be+U;f[be]=t.readUint32BE(C,se),g[be]=t.readUint32BE(C,se+4)}for(var be=0;be<80;be++){var we=O,le=q,_e=L,j=re,$=oe,T=ie,h=M,I=H,ae=D,fe=u,Ie=m,He=X,ke=V,$e=ne,dt=ce,pt=de;if(_=H,S=de,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=(oe>>>14|V<<32-14)^(oe>>>18|V<<32-18)^(V>>>41-32|oe<<32-(41-32)),S=(V>>>14|oe<<32-14)^(V>>>18|oe<<32-18)^(oe>>>41-32|V<<32-(41-32)),B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,_=oe&ie^~oe&M,S=V&ne^~V&ce,B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,_=a[be*2],S=a[be*2+1],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,_=f[be%16],S=g[be%16],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,Z=G&65535|ee<<16,W=B&65535|K<<16,_=Z,S=W,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=(O>>>28|D<<32-28)^(D>>>34-32|O<<32-(34-32))^(D>>>39-32|O<<32-(39-32)),S=(D>>>28|O<<32-28)^(O>>>34-32|D<<32-(34-32))^(O>>>39-32|D<<32-(39-32)),B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,_=O&q^O&L^q&L,S=D&u^D&m^u&m,B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,I=G&65535|ee<<16,pt=B&65535|K<<16,_=j,S=He,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=Z,S=W,B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,j=G&65535|ee<<16,He=B&65535|K<<16,q=we,L=le,re=_e,oe=j,ie=$,M=T,H=h,O=I,u=ae,m=fe,X=Ie,V=He,ne=ke,ce=$e,de=dt,D=pt,be%16===15)for(var se=0;se<16;se++)_=f[se],S=g[se],B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=f[(se+9)%16],S=g[(se+9)%16],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,Z=f[(se+1)%16],W=g[(se+1)%16],_=(Z>>>1|W<<32-1)^(Z>>>8|W<<32-8)^Z>>>7,S=(W>>>1|Z<<32-1)^(W>>>8|Z<<32-8)^(W>>>7|Z<<32-7),B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,Z=f[(se+14)%16],W=g[(se+14)%16],_=(Z>>>19|W<<32-19)^(W>>>61-32|Z<<32-(61-32))^Z>>>6,S=(W>>>19|Z<<32-19)^(Z>>>61-32|W<<32-(61-32))^(W>>>6|Z<<32-6),B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,f[se]=G&65535|ee<<16,g[se]=B&65535|K<<16}_=O,S=D,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[0],S=x[0],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[0]=O=G&65535|ee<<16,x[0]=D=B&65535|K<<16,_=q,S=u,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[1],S=x[1],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[1]=q=G&65535|ee<<16,x[1]=u=B&65535|K<<16,_=L,S=m,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[2],S=x[2],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[2]=L=G&65535|ee<<16,x[2]=m=B&65535|K<<16,_=re,S=X,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[3],S=x[3],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[3]=re=G&65535|ee<<16,x[3]=X=B&65535|K<<16,_=oe,S=V,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[4],S=x[4],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[4]=oe=G&65535|ee<<16,x[4]=V=B&65535|K<<16,_=ie,S=ne,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[5],S=x[5],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[5]=ie=G&65535|ee<<16,x[5]=ne=B&65535|K<<16,_=M,S=ce,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[6],S=x[6],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[6]=M=G&65535|ee<<16,x[6]=ce=B&65535|K<<16,_=H,S=de,B=S&65535,K=S>>>16,G=_&65535,ee=_>>>16,_=w[7],S=x[7],B+=S&65535,K+=S>>>16,G+=_&65535,ee+=_>>>16,K+=B>>>16,G+=K>>>16,ee+=G>>>16,w[7]=H=G&65535|ee<<16,x[7]=de=B&65535|K<<16,U+=128,P-=128}return U}function p(f){var g=new s;g.update(f);var w=g.digest();return g.clean(),w}n.hash=p})(Td);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const t=xn,r=Td,s=Sr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function a(j){const $=new Float64Array(16);if(j)for(let T=0;T<j.length;T++)$[T]=j[T];return $}const l=new Uint8Array(32);l[0]=9;const p=a(),f=a([1]),g=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),w=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),x=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),C=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),U=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(j,$){for(let T=0;T<16;T++)j[T]=$[T]|0}function O(j){let $=1;for(let T=0;T<16;T++){let h=j[T]+$+65535;$=Math.floor(h/65536),j[T]=h-$*65536}j[0]+=$-1+37*($-1)}function q(j,$,T){const h=~(T-1);for(let I=0;I<16;I++){const ae=h&(j[I]^$[I]);j[I]^=ae,$[I]^=ae}}function L(j,$){const T=a(),h=a();for(let I=0;I<16;I++)h[I]=$[I];O(h),O(h),O(h);for(let I=0;I<2;I++){T[0]=h[0]-65517;for(let fe=1;fe<15;fe++)T[fe]=h[fe]-65535-(T[fe-1]>>16&1),T[fe-1]&=65535;T[15]=h[15]-32767-(T[14]>>16&1);const ae=T[15]>>16&1;T[14]&=65535,q(h,T,1-ae)}for(let I=0;I<16;I++)j[2*I]=h[I]&255,j[2*I+1]=h[I]>>8}function re(j,$){let T=0;for(let h=0;h<32;h++)T|=j[h]^$[h];return(1&T-1>>>8)-1}function oe(j,$){const T=new Uint8Array(32),h=new Uint8Array(32);return L(T,j),L(h,$),re(T,h)}function ie(j){const $=new Uint8Array(32);return L($,j),$[0]&1}function M(j,$){for(let T=0;T<16;T++)j[T]=$[2*T]+($[2*T+1]<<8);j[15]&=32767}function H(j,$,T){for(let h=0;h<16;h++)j[h]=$[h]+T[h]}function D(j,$,T){for(let h=0;h<16;h++)j[h]=$[h]-T[h]}function u(j,$,T){let h,I,ae=0,fe=0,Ie=0,He=0,ke=0,$e=0,dt=0,pt=0,je=0,xe=0,Re=0,Ue=0,qe=0,Oe=0,Fe=0,Se=0,Ce=0,Be=0,Ae=0,Ve=0,We=0,et=0,tt=0,Je=0,Qt=0,hr=0,Gr=0,er=0,ri=0,gi=0,Ri=0,bt=T[0],gt=T[1],wt=T[2],Et=T[3],_t=T[4],vt=T[5],Rt=T[6],Ut=T[7],Dt=T[8],Ft=T[9],St=T[10],Ot=T[11],It=T[12],ht=T[13],Lt=T[14],$t=T[15];h=$[0],ae+=h*bt,fe+=h*gt,Ie+=h*wt,He+=h*Et,ke+=h*_t,$e+=h*vt,dt+=h*Rt,pt+=h*Ut,je+=h*Dt,xe+=h*Ft,Re+=h*St,Ue+=h*Ot,qe+=h*It,Oe+=h*ht,Fe+=h*Lt,Se+=h*$t,h=$[1],fe+=h*bt,Ie+=h*gt,He+=h*wt,ke+=h*Et,$e+=h*_t,dt+=h*vt,pt+=h*Rt,je+=h*Ut,xe+=h*Dt,Re+=h*Ft,Ue+=h*St,qe+=h*Ot,Oe+=h*It,Fe+=h*ht,Se+=h*Lt,Ce+=h*$t,h=$[2],Ie+=h*bt,He+=h*gt,ke+=h*wt,$e+=h*Et,dt+=h*_t,pt+=h*vt,je+=h*Rt,xe+=h*Ut,Re+=h*Dt,Ue+=h*Ft,qe+=h*St,Oe+=h*Ot,Fe+=h*It,Se+=h*ht,Ce+=h*Lt,Be+=h*$t,h=$[3],He+=h*bt,ke+=h*gt,$e+=h*wt,dt+=h*Et,pt+=h*_t,je+=h*vt,xe+=h*Rt,Re+=h*Ut,Ue+=h*Dt,qe+=h*Ft,Oe+=h*St,Fe+=h*Ot,Se+=h*It,Ce+=h*ht,Be+=h*Lt,Ae+=h*$t,h=$[4],ke+=h*bt,$e+=h*gt,dt+=h*wt,pt+=h*Et,je+=h*_t,xe+=h*vt,Re+=h*Rt,Ue+=h*Ut,qe+=h*Dt,Oe+=h*Ft,Fe+=h*St,Se+=h*Ot,Ce+=h*It,Be+=h*ht,Ae+=h*Lt,Ve+=h*$t,h=$[5],$e+=h*bt,dt+=h*gt,pt+=h*wt,je+=h*Et,xe+=h*_t,Re+=h*vt,Ue+=h*Rt,qe+=h*Ut,Oe+=h*Dt,Fe+=h*Ft,Se+=h*St,Ce+=h*Ot,Be+=h*It,Ae+=h*ht,Ve+=h*Lt,We+=h*$t,h=$[6],dt+=h*bt,pt+=h*gt,je+=h*wt,xe+=h*Et,Re+=h*_t,Ue+=h*vt,qe+=h*Rt,Oe+=h*Ut,Fe+=h*Dt,Se+=h*Ft,Ce+=h*St,Be+=h*Ot,Ae+=h*It,Ve+=h*ht,We+=h*Lt,et+=h*$t,h=$[7],pt+=h*bt,je+=h*gt,xe+=h*wt,Re+=h*Et,Ue+=h*_t,qe+=h*vt,Oe+=h*Rt,Fe+=h*Ut,Se+=h*Dt,Ce+=h*Ft,Be+=h*St,Ae+=h*Ot,Ve+=h*It,We+=h*ht,et+=h*Lt,tt+=h*$t,h=$[8],je+=h*bt,xe+=h*gt,Re+=h*wt,Ue+=h*Et,qe+=h*_t,Oe+=h*vt,Fe+=h*Rt,Se+=h*Ut,Ce+=h*Dt,Be+=h*Ft,Ae+=h*St,Ve+=h*Ot,We+=h*It,et+=h*ht,tt+=h*Lt,Je+=h*$t,h=$[9],xe+=h*bt,Re+=h*gt,Ue+=h*wt,qe+=h*Et,Oe+=h*_t,Fe+=h*vt,Se+=h*Rt,Ce+=h*Ut,Be+=h*Dt,Ae+=h*Ft,Ve+=h*St,We+=h*Ot,et+=h*It,tt+=h*ht,Je+=h*Lt,Qt+=h*$t,h=$[10],Re+=h*bt,Ue+=h*gt,qe+=h*wt,Oe+=h*Et,Fe+=h*_t,Se+=h*vt,Ce+=h*Rt,Be+=h*Ut,Ae+=h*Dt,Ve+=h*Ft,We+=h*St,et+=h*Ot,tt+=h*It,Je+=h*ht,Qt+=h*Lt,hr+=h*$t,h=$[11],Ue+=h*bt,qe+=h*gt,Oe+=h*wt,Fe+=h*Et,Se+=h*_t,Ce+=h*vt,Be+=h*Rt,Ae+=h*Ut,Ve+=h*Dt,We+=h*Ft,et+=h*St,tt+=h*Ot,Je+=h*It,Qt+=h*ht,hr+=h*Lt,Gr+=h*$t,h=$[12],qe+=h*bt,Oe+=h*gt,Fe+=h*wt,Se+=h*Et,Ce+=h*_t,Be+=h*vt,Ae+=h*Rt,Ve+=h*Ut,We+=h*Dt,et+=h*Ft,tt+=h*St,Je+=h*Ot,Qt+=h*It,hr+=h*ht,Gr+=h*Lt,er+=h*$t,h=$[13],Oe+=h*bt,Fe+=h*gt,Se+=h*wt,Ce+=h*Et,Be+=h*_t,Ae+=h*vt,Ve+=h*Rt,We+=h*Ut,et+=h*Dt,tt+=h*Ft,Je+=h*St,Qt+=h*Ot,hr+=h*It,Gr+=h*ht,er+=h*Lt,ri+=h*$t,h=$[14],Fe+=h*bt,Se+=h*gt,Ce+=h*wt,Be+=h*Et,Ae+=h*_t,Ve+=h*vt,We+=h*Rt,et+=h*Ut,tt+=h*Dt,Je+=h*Ft,Qt+=h*St,hr+=h*Ot,Gr+=h*It,er+=h*ht,ri+=h*Lt,gi+=h*$t,h=$[15],Se+=h*bt,Ce+=h*gt,Be+=h*wt,Ae+=h*Et,Ve+=h*_t,We+=h*vt,et+=h*Rt,tt+=h*Ut,Je+=h*Dt,Qt+=h*Ft,hr+=h*St,Gr+=h*Ot,er+=h*It,ri+=h*ht,gi+=h*Lt,Ri+=h*$t,ae+=38*Ce,fe+=38*Be,Ie+=38*Ae,He+=38*Ve,ke+=38*We,$e+=38*et,dt+=38*tt,pt+=38*Je,je+=38*Qt,xe+=38*hr,Re+=38*Gr,Ue+=38*er,qe+=38*ri,Oe+=38*gi,Fe+=38*Ri,I=1,h=ae+I+65535,I=Math.floor(h/65536),ae=h-I*65536,h=fe+I+65535,I=Math.floor(h/65536),fe=h-I*65536,h=Ie+I+65535,I=Math.floor(h/65536),Ie=h-I*65536,h=He+I+65535,I=Math.floor(h/65536),He=h-I*65536,h=ke+I+65535,I=Math.floor(h/65536),ke=h-I*65536,h=$e+I+65535,I=Math.floor(h/65536),$e=h-I*65536,h=dt+I+65535,I=Math.floor(h/65536),dt=h-I*65536,h=pt+I+65535,I=Math.floor(h/65536),pt=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=xe+I+65535,I=Math.floor(h/65536),xe=h-I*65536,h=Re+I+65535,I=Math.floor(h/65536),Re=h-I*65536,h=Ue+I+65535,I=Math.floor(h/65536),Ue=h-I*65536,h=qe+I+65535,I=Math.floor(h/65536),qe=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Fe+I+65535,I=Math.floor(h/65536),Fe=h-I*65536,h=Se+I+65535,I=Math.floor(h/65536),Se=h-I*65536,ae+=I-1+37*(I-1),I=1,h=ae+I+65535,I=Math.floor(h/65536),ae=h-I*65536,h=fe+I+65535,I=Math.floor(h/65536),fe=h-I*65536,h=Ie+I+65535,I=Math.floor(h/65536),Ie=h-I*65536,h=He+I+65535,I=Math.floor(h/65536),He=h-I*65536,h=ke+I+65535,I=Math.floor(h/65536),ke=h-I*65536,h=$e+I+65535,I=Math.floor(h/65536),$e=h-I*65536,h=dt+I+65535,I=Math.floor(h/65536),dt=h-I*65536,h=pt+I+65535,I=Math.floor(h/65536),pt=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=xe+I+65535,I=Math.floor(h/65536),xe=h-I*65536,h=Re+I+65535,I=Math.floor(h/65536),Re=h-I*65536,h=Ue+I+65535,I=Math.floor(h/65536),Ue=h-I*65536,h=qe+I+65535,I=Math.floor(h/65536),qe=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Fe+I+65535,I=Math.floor(h/65536),Fe=h-I*65536,h=Se+I+65535,I=Math.floor(h/65536),Se=h-I*65536,ae+=I-1+37*(I-1),j[0]=ae,j[1]=fe,j[2]=Ie,j[3]=He,j[4]=ke,j[5]=$e,j[6]=dt,j[7]=pt,j[8]=je,j[9]=xe,j[10]=Re,j[11]=Ue,j[12]=qe,j[13]=Oe,j[14]=Fe,j[15]=Se}function m(j,$){u(j,$,$)}function X(j,$){const T=a();let h;for(h=0;h<16;h++)T[h]=$[h];for(h=253;h>=0;h--)m(T,T),h!==2&&h!==4&&u(T,T,$);for(h=0;h<16;h++)j[h]=T[h]}function V(j,$){const T=a();let h;for(h=0;h<16;h++)T[h]=$[h];for(h=250;h>=0;h--)m(T,T),h!==1&&u(T,T,$);for(h=0;h<16;h++)j[h]=T[h]}function ne(j,$){const T=a(),h=a(),I=a(),ae=a(),fe=a(),Ie=a(),He=a(),ke=a(),$e=a();D(T,j[1],j[0]),D($e,$[1],$[0]),u(T,T,$e),H(h,j[0],j[1]),H($e,$[0],$[1]),u(h,h,$e),u(I,j[3],$[3]),u(I,I,w),u(ae,j[2],$[2]),H(ae,ae,ae),D(fe,h,T),D(Ie,ae,I),H(He,ae,I),H(ke,h,T),u(j[0],fe,Ie),u(j[1],ke,He),u(j[2],He,Ie),u(j[3],fe,ke)}function ce(j,$,T){for(let h=0;h<4;h++)q(j[h],$[h],T)}function de(j,$){const T=a(),h=a(),I=a();X(I,$[2]),u(T,$[0],I),u(h,$[1],I),L(j,h),j[31]^=ie(T)<<7}function _(j,$,T){P(j[0],p),P(j[1],f),P(j[2],f),P(j[3],p);for(let h=255;h>=0;--h){const I=T[h/8|0]>>(h&7)&1;ce(j,$,I),ne($,j),ne(j,j),ce(j,$,I)}}function S(j,$){const T=[a(),a(),a(),a()];P(T[0],x),P(T[1],C),P(T[2],f),u(T[3],x,C),_(j,T,$)}function Z(j){if(j.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const $=(0,r.hash)(j);$[0]&=248,$[31]&=127,$[31]|=64;const T=new Uint8Array(32),h=[a(),a(),a(),a()];S(h,$),de(T,h);const I=new Uint8Array(64);return I.set(j),I.set(T,32),{publicKey:T,secretKey:I}}n.generateKeyPairFromSeed=Z;function W(j){const $=(0,t.randomBytes)(32,j),T=Z($);return(0,s.wipe)($),T}n.generateKeyPair=W;function B(j){if(j.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(j.subarray(32))}n.extractPublicKeyFromSecretKey=B;const K=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function G(j,$){let T,h,I,ae;for(h=63;h>=32;--h){for(T=0,I=h-32,ae=h-12;I<ae;++I)$[I]+=T-16*$[h]*K[I-(h-32)],T=Math.floor(($[I]+128)/256),$[I]-=T*256;$[I]+=T,$[h]=0}for(T=0,I=0;I<32;I++)$[I]+=T-($[31]>>4)*K[I],T=$[I]>>8,$[I]&=255;for(I=0;I<32;I++)$[I]-=T*K[I];for(h=0;h<32;h++)$[h+1]+=$[h]>>8,j[h]=$[h]&255}function ee(j){const $=new Float64Array(64);for(let T=0;T<64;T++)$[T]=j[T];for(let T=0;T<64;T++)j[T]=0;G(j,$)}function be(j,$){const T=new Float64Array(64),h=[a(),a(),a(),a()],I=(0,r.hash)(j.subarray(0,32));I[0]&=248,I[31]&=127,I[31]|=64;const ae=new Uint8Array(64);ae.set(I.subarray(32),32);const fe=new r.SHA512;fe.update(ae.subarray(32)),fe.update($);const Ie=fe.digest();fe.clean(),ee(Ie),S(h,Ie),de(ae,h),fe.reset(),fe.update(ae.subarray(0,32)),fe.update(j.subarray(32)),fe.update($);const He=fe.digest();ee(He);for(let ke=0;ke<32;ke++)T[ke]=Ie[ke];for(let ke=0;ke<32;ke++)for(let $e=0;$e<32;$e++)T[ke+$e]+=He[ke]*I[$e];return G(ae.subarray(32),T),ae}n.sign=be;function se(j,$){const T=a(),h=a(),I=a(),ae=a(),fe=a(),Ie=a(),He=a();return P(j[2],f),M(j[1],$),m(I,j[1]),u(ae,I,g),D(I,I,j[2]),H(ae,j[2],ae),m(fe,ae),m(Ie,fe),u(He,Ie,fe),u(T,He,I),u(T,T,ae),V(T,T),u(T,T,I),u(T,T,ae),u(T,T,ae),u(j[0],T,ae),m(h,j[0]),u(h,h,ae),oe(h,I)&&u(j[0],j[0],U),m(h,j[0]),u(h,h,ae),oe(h,I)?-1:(ie(j[0])===$[31]>>7&&D(j[0],p,j[0]),u(j[3],j[0],j[1]),0)}function we(j,$,T){const h=new Uint8Array(32),I=[a(),a(),a(),a()],ae=[a(),a(),a(),a()];if(T.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(se(ae,j))return!1;const fe=new r.SHA512;fe.update(T.subarray(0,32)),fe.update(j),fe.update($);const Ie=fe.digest();return ee(Ie),_(I,ae,Ie),S(ae,T.subarray(32)),ne(I,ae),de(h,I),!re(T,h)}n.verify=we;function le(j){let $=[a(),a(),a(),a()];if(se($,j))throw new Error("Ed25519: invalid public key");let T=a(),h=a(),I=$[1];H(T,f,I),D(h,f,I),X(h,h),u(T,T,h);let ae=new Uint8Array(32);return L(ae,T),ae}n.convertPublicKeyToX25519=le;function _e(j){const $=(0,r.hash)(j.subarray(0,32));$[0]&=248,$[31]&=127,$[31]|=64;const T=new Uint8Array($.subarray(0,32));return(0,s.wipe)($),T}n.convertSecretKeyToX25519=_e})(pu);const Nw="EdDSA",Rw="JWT",Nd=".",Rd="base64url",Uw="utf8",Fw="utf8",Lw=":",$w="did",Mw="key",of="base58btc",jw="z",qw="K36",zw=32;function Co(n){return cr(yr(as(n),Uw),Rd)}function Ud(n){const t=yr(qw,of),r=jw+cr(Vc([t,n]),of);return[$w,Mw,r].join(Lw)}function Hw(n){return cr(n,Rd)}function Bw(n){return yr([Co(n.header),Co(n.payload)].join(Nd),Fw)}function Kw(n){return[Co(n.header),Co(n.payload),Hw(n.signature)].join(Nd)}function af(n=xn.randomBytes(zw)){return pu.generateKeyPairFromSeed(n)}async function kw(n,t,r,s,a=ye.fromMiliseconds(Date.now())){const l={alg:Nw,typ:Rw},p=Ud(s.publicKey),f=a+r,g={iss:p,sub:n,aud:t,iat:a,exp:f},w=Bw({header:l,payload:g}),x=pu.sign(s.secretKey,w);return Kw({header:l,payload:g,signature:x})}var gu={};Object.defineProperty(gu,"__esModule",{value:!0});var Fd=gu.getWindowMetadata=void 0;const cf=ou;function Vw(){let n,t;try{n=cf.getDocumentOrThrow(),t=cf.getLocationOrThrow()}catch{return null}function r(){const C=n.getElementsByTagName("link"),U=[];for(let P=0;P<C.length;P++){const O=C[P],q=O.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const L=O.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(L.indexOf("/")===0)re+=L;else{const oe=t.pathname.split("/");oe.pop();const ie=oe.join("/");re+=ie+"/"+L}U.push(re)}else if(L.indexOf("//")===0){const re=t.protocol+L;U.push(re)}else U.push(L)}}return U}function s(...C){const U=n.getElementsByTagName("meta");for(let P=0;P<U.length;P++){const O=U[P],q=["itemprop","property","name"].map(L=>O.getAttribute(L)).filter(L=>L?C.includes(L):!1);if(q.length&&q){const L=O.getAttribute("content");if(L)return L}}return""}function a(){let C=s("name","og:site_name","og:title","twitter:title");return C||(C=n.title),C}function l(){return s("description","og:description","twitter:description","keywords")}const p=a(),f=l(),g=t.origin,w=r();return{description:f,url:g,icons:w,name:p}}Fd=gu.getWindowMetadata=Vw;function Ld(n,t){return n.includes(":")?[n]:t.chains||[]}const $d="base10",ar="base16",Wc="base64pad",vu="utf8",Md=0,Qi=1,Gw=0,uf=1,Yc=12,yu=32;function Ww(){const n=hu.generateKeyPair();return{privateKey:cr(n.secretKey,ar),publicKey:cr(n.publicKey,ar)}}function Jc(){const n=xn.randomBytes(yu);return cr(n,ar)}function Yw(n,t){const r=hu.sharedKey(yr(n,ar),yr(t,ar)),s=new qm(Bo.SHA256,r).expand(yu);return cr(s,ar)}function Jw(n){const t=Bo.hash(yr(n,ar));return cr(t,ar)}function In(n){const t=Bo.hash(yr(n,vu));return cr(t,ar)}function Xw(n){return yr(`${n}`,$d)}function ls(n){return Number(cr(n,$d))}function Zw(n){const t=Xw(typeof n.type<"u"?n.type:Md);if(ls(t)===Qi&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?yr(n.senderPublicKey,ar):void 0,s=typeof n.iv<"u"?yr(n.iv,ar):xn.randomBytes(Yc),a=new cu.ChaCha20Poly1305(yr(n.symKey,ar)).seal(s,yr(n.message,vu));return eE({type:t,sealed:a,iv:s,senderPublicKey:r})}function Qw(n){const t=new cu.ChaCha20Poly1305(yr(n.symKey,ar)),{sealed:r,iv:s}=Po(n.encoded),a=t.open(s,r);if(a===null)throw new Error("Failed to decrypt");return cr(a,vu)}function eE(n){if(ls(n.type)===Qi){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return cr(Vc([n.type,n.senderPublicKey,n.iv,n.sealed]),Wc)}return cr(Vc([n.type,n.iv,n.sealed]),Wc)}function Po(n){const t=yr(n,Wc),r=t.slice(Gw,uf),s=uf;if(ls(r)===Qi){const f=s+yu,g=f+Yc,w=t.slice(s,f),x=t.slice(f,g),C=t.slice(g);return{type:r,sealed:C,iv:x,senderPublicKey:w}}const a=s+Yc,l=t.slice(s,a),p=t.slice(a);return{type:r,sealed:p,iv:l}}function tE(n,t){const r=Po(n);return jd({type:ls(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?cr(r.senderPublicKey,ar):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function jd(n){const t=(n==null?void 0:n.type)||Md;if(t===Qi){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function hf(n){return n.type===Qi&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var rE=Object.defineProperty,lf=Object.getOwnPropertySymbols,iE=Object.prototype.hasOwnProperty,nE=Object.prototype.propertyIsEnumerable,ff=(n,t,r)=>t in n?rE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,df=(n,t)=>{for(var r in t||(t={}))iE.call(t,r)&&ff(n,r,t[r]);if(lf)for(var r of lf(t))nE.call(t,r)&&ff(n,r,t[r]);return n};const sE="ReactNative",Oi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},oE="js";function _u(){return typeof _c<"u"&&typeof _c.versions<"u"&&typeof _c.versions.node<"u"}function qd(){return!X_()&&!!ad()&&navigator.product===sE}function mu(){return!_u()&&!!ad()}function bu(){return qd()?Oi.reactNative:_u()?Oi.node:mu()?Oi.browser:Oi.unknown}function aE(n,t){let r=Io.parse(n);return r=df(df({},r),t),n=Io.stringify(r),n}function cE(){return Fd()||{name:"",description:"",url:"",icons:[""]}}function uE(){if(bu()===Oi.reactNative&&typeof Lr<"u"&&typeof(Lr==null?void 0:Lr.Platform)<"u"){const{OS:r,Version:s}=Lr.Platform;return[r,s].join("-")}const n=Q_();if(n===null)return"unknown";const t=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[t,n.name,n.version].join("-"):[t,n.version].join("-")}function hE(){var n;const t=bu();return t===Oi.browser?[t,((n=Z_())==null?void 0:n.host)||"unknown"].join(":"):t}function lE(n,t,r){const s=uE(),a=hE();return[[n,t].join("-"),[oE,r].join("-"),s,a].join("/")}function fE({protocol:n,version:t,relayUrl:r,sdkVersion:s,auth:a,projectId:l,useOnCloseEvent:p}){const f=r.split("?"),g=lE(n,t,s),w={auth:a,ua:g,projectId:l,useOnCloseEvent:p||void 0},x=aE(f[1]||"",w);return f[0]+"?"+x}function Xi(n,t){return n.filter(r=>t.includes(r)).length===n.length}function zd(n){return Object.fromEntries(n.entries())}function Hd(n){return new Map(Object.entries(n))}function Sn(n=ye.FIVE_MINUTES,t){const r=ye.toMiliseconds(n||ye.FIVE_MINUTES);let s,a,l;return{resolve:p=>{l&&s&&(clearTimeout(l),s(p))},reject:p=>{l&&a&&(clearTimeout(l),a(p))},done:()=>new Promise((p,f)=>{l=setTimeout(()=>{f(new Error(t))},r),s=p,a=f})}}function To(n,t,r){return new Promise(async(s,a)=>{const l=setTimeout(()=>a(new Error(r)),t);try{const p=await n;s(p)}catch(p){a(p)}clearTimeout(l)})}function Bd(n,t){if(typeof t=="string"&&t.startsWith(`${n}:`))return t;if(n.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(n.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${n}`)}function dE(n){return Bd("topic",n)}function pE(n){return Bd("id",n)}function Kd(n){const[t,r]=n.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function kr(n,t){return ye.fromMiliseconds((t||Date.now())+ye.toMiliseconds(n))}function xi(n){return Date.now()>=ye.toMiliseconds(n)}function qt(n,t){return`${n}${t?`:${t}`:""}`}async function gE({id:n,topic:t,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let a=s==null?void 0:s.href;if(typeof a!="string")return;a.endsWith("/")&&(a=a.slice(0,-1));const l=`${a}/wc?requestId=${n}&sessionTopic=${t}`,p=bu();p===Oi.browser?l.startsWith("https://")?window.open(l,"_blank","noreferrer noopener"):window.open(l,"_self","noreferrer noopener"):p===Oi.reactNative&&typeof(Lr==null?void 0:Lr.Linking)<"u"&&await Lr.Linking.openURL(l)}catch(s){console.error(s)}}const vE="irn";function Xc(n){return(n==null?void 0:n.relay)||{protocol:vE}}function Eo(n){const t=Zb[n];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${n}`);return t}var yE=Object.defineProperty,pf=Object.getOwnPropertySymbols,_E=Object.prototype.hasOwnProperty,mE=Object.prototype.propertyIsEnumerable,gf=(n,t,r)=>t in n?yE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,bE=(n,t)=>{for(var r in t||(t={}))_E.call(t,r)&&gf(n,r,t[r]);if(pf)for(var r of pf(t))mE.call(t,r)&&gf(n,r,t[r]);return n};function wE(n,t="-"){const r={},s="relay"+t;return Object.keys(n).forEach(a=>{if(a.startsWith(s)){const l=a.replace(s,""),p=n[a];r[l]=p}}),r}function EE(n){const t=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,t),a=n.substring(t+1,r).split("@"),l=typeof r<"u"?n.substring(r):"",p=Io.parse(l);return{protocol:s,topic:DE(a[0]),version:parseInt(a[1],10),symKey:p.symKey,relay:wE(p)}}function DE(n){return n.startsWith("//")?n.substring(2):n}function SE(n,t="-"){const r="relay",s={};return Object.keys(n).forEach(a=>{const l=r+t+a;n[a]&&(s[l]=n[a])}),s}function IE(n){return`${n.protocol}:${n.topic}@${n.version}?`+Io.stringify(bE({symKey:n.symKey},SE(n.relay)))}function On(n){const t=[];return n.forEach(r=>{const[s,a]=r.split(":");t.push(`${s}:${a}`)}),t}function xE(n){const t=[];return Object.values(n).forEach(r=>{t.push(...On(r.accounts))}),t}function AE(n,t){const r=[];return Object.values(n).forEach(s=>{On(s.accounts).includes(t)&&r.push(...s.methods)}),r}function OE(n,t){const r=[];return Object.values(n).forEach(s=>{On(s.accounts).includes(t)&&r.push(...s.events)}),r}function CE(n,t){const r=Do(n,t);if(r)throw new Error(r.message);const s={};for(const[a,l]of Object.entries(n))s[a]={methods:l.methods,events:l.events,chains:l.accounts.map(p=>`${p.split(":")[0]}:${p.split(":")[1]}`)};return s}const PE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},TE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function he(n,t){const{message:r,code:s}=TE[n];return{message:t?`${r} ${t}`:r,code:s}}function kt(n,t){const{message:r,code:s}=PE[n];return{message:t?`${r} ${t}`:r,code:s}}function fs(n,t){return Array.isArray(n)?typeof t<"u"&&n.length?n.every(t):!0:!1}function os(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function or(n){return typeof n>"u"}function Vt(n,t){return t&&or(n)?!0:typeof n=="string"&&!!n.trim().length}function wu(n,t){return t&&or(n)?!0:typeof n=="number"&&!isNaN(n)}function NE(n,t){const{requiredNamespaces:r}=t,s=Object.keys(n.namespaces),a=Object.keys(r);let l=!0;return Xi(a,s)?(s.forEach(p=>{const{accounts:f,methods:g,events:w}=n.namespaces[p],x=On(f),C=r[p];(!Xi(Ld(p,C),x)||!Xi(C.methods,g)||!Xi(C.events,w))&&(l=!1)}),l):!1}function No(n){return Vt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function RE(n){if(Vt(n,!1)&&n.includes(":")){const t=n.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&No(r)}}return!1}function UE(n){if(Vt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function FE(n){var t;return(t=n==null?void 0:n.proposer)==null?void 0:t.publicKey}function LE(n){return n==null?void 0:n.topic}function $E(n,t){let r=null;return Vt(n==null?void 0:n.publicKey,!1)||(r=he("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function vf(n){let t=!0;return fs(n)?n.length&&(t=n.every(r=>Vt(r,!1))):t=!1,t}function ME(n,t,r){let s=null;return fs(t)&&t.length?t.forEach(a=>{s||No(a)||(s=kt("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):No(n)||(s=kt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function jE(n,t,r){let s=null;return Object.entries(n).forEach(([a,l])=>{if(s)return;const p=ME(a,Ld(a,l),`${t} ${r}`);p&&(s=p)}),s}function qE(n,t){let r=null;return fs(n)?n.forEach(s=>{r||RE(s)||(r=kt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=kt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function zE(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=qE(s==null?void 0:s.accounts,`${t} namespace`);a&&(r=a)}),r}function HE(n,t){let r=null;return vf(n==null?void 0:n.methods)?vf(n==null?void 0:n.events)||(r=kt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=kt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function kd(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=HE(s,`${t}, namespace`);a&&(r=a)}),r}function BE(n,t,r){let s=null;if(n&&os(n)){const a=kd(n,t);a&&(s=a);const l=jE(n,t,r);l&&(s=l)}else s=he("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Do(n,t){let r=null;if(n&&os(n)){const s=kd(n,t);s&&(r=s);const a=zE(n,t);a&&(r=a)}else r=he("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Vd(n){return Vt(n.protocol,!0)}function KE(n,t){let r=!1;return t&&!n?r=!0:n&&fs(n)&&n.length&&n.forEach(s=>{r=Vd(s)}),r}function kE(n){return typeof n=="number"}function vr(n){return typeof n<"u"&&typeof n!==null}function VE(n){return!(!n||typeof n!="object"||!n.code||!wu(n.code,!1)||!n.message||!Vt(n.message,!1))}function GE(n){return!(or(n)||!Vt(n.method,!1))}function WE(n){return!(or(n)||or(n.result)&&or(n.error)||!wu(n.id,!1)||!Vt(n.jsonrpc,!1))}function YE(n){return!(or(n)||!Vt(n.name,!1))}function yf(n,t){return!(!No(t)||!xE(n).includes(t))}function JE(n,t,r){return Vt(r,!1)?AE(n,t).includes(r):!1}function XE(n,t,r){return Vt(r,!1)?OE(n,t).includes(r):!1}function _f(n,t,r){let s=null;const a=ZE(n),l=QE(t),p=Object.keys(a),f=Object.keys(l),g=mf(Object.keys(n)),w=mf(Object.keys(t)),x=g.filter(C=>!w.includes(C));return x.length&&(s=he("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${x.toString()}
      Received: ${Object.keys(t).toString()}`)),Xi(p,f)||(s=he("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${p.toString()}
      Approved: ${f.toString()}`)),Object.keys(t).forEach(C=>{if(!C.includes(":")||s)return;const U=On(t[C].accounts);U.includes(C)||(s=he("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${C}
        Required: ${C}
        Approved: ${U.toString()}`))}),p.forEach(C=>{s||(Xi(a[C].methods,l[C].methods)?Xi(a[C].events,l[C].events)||(s=he("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${C}`)):s=he("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${C}`))}),s}function ZE(n){const t={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?t[r]=n[r]:(s=n[r].chains)==null||s.forEach(a=>{t[a]={methods:n[r].methods,events:n[r].events}})}),t}function mf(n){return[...new Set(n.map(t=>t.includes(":")?t.split(":")[0]:t))]}function QE(n){const t={};return Object.keys(n).forEach(r=>{if(r.includes(":"))t[r]=n[r];else{const s=On(n[r].accounts);s==null||s.forEach(a=>{t[a]={accounts:n[r].accounts.filter(l=>l.includes(`${a}:`)),methods:n[r].methods,events:n[r].events}})}}),t}function e3(n,t){return wu(n,!1)&&n<=t.max&&n>=t.min}class Ti extends rm{constructor(t){super(t),this.events=new ur.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(Lo(t.method,t.params||[],t.id||nu().toString()),r)}async requestStrict(t,r){return new Promise(async(s,a)=>{if(!this.connection.connected)try{await this.open()}catch(l){a(l)}this.events.on(`${t.id}`,l=>{Kr(l)?a(l.error):s(l.result)});try{await this.connection.send(t,r)}catch(l){a(l)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Mo(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var Pc,bf;function t3(){return bf||(bf=1,Pc=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),Pc}const r3=()=>typeof Lr<"u"&&typeof Lr.WebSocket<"u"?Lr.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:t3(),i3=()=>typeof window<"u",wf=n=>n.split("?")[0],Ef=10,n3=r3();class s3{constructor(t){if(this.url=t,this.events=new ur.EventEmitter,this.registering=!1,!Cl(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(as(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!Cl(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const a=J_.isReactNative()?void 0:{rejectUnauthorized:!om(t)},l=new n3(t,[],a);i3()?l.onerror=p=>{const f=p;s(this.emitError(f.error))}:l.on("error",p=>{s(this.emitError(p))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?du(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),a=s.message||s.toString(),l=$o(t,a);this.events.emit("payload",l)}parseError(t,r=this.url){return od(t,wf(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ef&&this.events.setMaxListeners(Ef)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${wf(this.url)}`));return this.events.emit("register_error",r),r}}var Ro={},o3={get exports(){return Ro},set exports(n){Ro=n}};(function(n,t){var r=200,s="__lodash_hash_undefined__",a=1,l=2,p=9007199254740991,f="[object Arguments]",g="[object Array]",w="[object AsyncFunction]",x="[object Boolean]",C="[object Date]",U="[object Error]",P="[object Function]",O="[object GeneratorFunction]",q="[object Map]",L="[object Number]",re="[object Null]",oe="[object Object]",ie="[object Promise]",M="[object Proxy]",H="[object RegExp]",D="[object Set]",u="[object String]",m="[object Symbol]",X="[object Undefined]",V="[object WeakMap]",ne="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",_="[object Float64Array]",S="[object Int8Array]",Z="[object Int16Array]",W="[object Int32Array]",B="[object Uint8Array]",K="[object Uint8ClampedArray]",G="[object Uint16Array]",ee="[object Uint32Array]",be=/[\\^$.*+?()[\]{}|]/g,se=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[_]=le[S]=le[Z]=le[W]=le[B]=le[K]=le[G]=le[ee]=!0,le[f]=le[g]=le[ne]=le[x]=le[ce]=le[C]=le[U]=le[P]=le[q]=le[L]=le[oe]=le[H]=le[D]=le[u]=le[V]=!1;var _e=typeof Ai=="object"&&Ai&&Ai.Object===Object&&Ai,j=typeof self=="object"&&self&&self.Object===Object&&self,$=_e||j||Function("return this")(),T=t&&!t.nodeType&&t,h=T&&!0&&n&&!n.nodeType&&n,I=h&&h.exports===T,ae=I&&_e.process,fe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=fe&&fe.isTypedArray;function He(b,N){for(var Q=-1,pe=b==null?0:b.length,at=0,Te=[];++Q<pe;){var lt=b[Q];N(lt,Q,b)&&(Te[at++]=lt)}return Te}function ke(b,N){for(var Q=-1,pe=N.length,at=b.length;++Q<pe;)b[at+Q]=N[Q];return b}function $e(b,N){for(var Q=-1,pe=b==null?0:b.length;++Q<pe;)if(N(b[Q],Q,b))return!0;return!1}function dt(b,N){for(var Q=-1,pe=Array(b);++Q<b;)pe[Q]=N(Q);return pe}function pt(b){return function(N){return b(N)}}function je(b,N){return b.has(N)}function xe(b,N){return b==null?void 0:b[N]}function Re(b){var N=-1,Q=Array(b.size);return b.forEach(function(pe,at){Q[++N]=[at,pe]}),Q}function Ue(b,N){return function(Q){return b(N(Q))}}function qe(b){var N=-1,Q=Array(b.size);return b.forEach(function(pe){Q[++N]=pe}),Q}var Oe=Array.prototype,Fe=Function.prototype,Se=Object.prototype,Ce=$["__core-js_shared__"],Be=Fe.toString,Ae=Se.hasOwnProperty,Ve=function(){var b=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),We=Se.toString,et=RegExp("^"+Be.call(Ae).replace(be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=I?$.Buffer:void 0,Je=$.Symbol,Qt=$.Uint8Array,hr=Se.propertyIsEnumerable,Gr=Oe.splice,er=Je?Je.toStringTag:void 0,ri=Object.getOwnPropertySymbols,gi=tt?tt.isBuffer:void 0,Ri=Ue(Object.keys,Object),bt=_r($,"DataView"),gt=_r($,"Map"),wt=_r($,"Promise"),Et=_r($,"Set"),_t=_r($,"WeakMap"),vt=_r(Object,"create"),Rt=ni(bt),Ut=ni(gt),Dt=ni(wt),Ft=ni(Et),St=ni(_t),Ot=Je?Je.prototype:void 0,It=Ot?Ot.valueOf:void 0;function ht(b){var N=-1,Q=b==null?0:b.length;for(this.clear();++N<Q;){var pe=b[N];this.set(pe[0],pe[1])}}function Lt(){this.__data__=vt?vt(null):{},this.size=0}function $t(b){var N=this.has(b)&&delete this.__data__[b];return this.size-=N?1:0,N}function Wo(b){var N=this.__data__;if(vt){var Q=N[b];return Q===s?void 0:Q}return Ae.call(N,b)?N[b]:void 0}function Yo(b){var N=this.__data__;return vt?N[b]!==void 0:Ae.call(N,b)}function Jo(b,N){var Q=this.__data__;return this.size+=this.has(b)?0:1,Q[b]=vt&&N===void 0?s:N,this}ht.prototype.clear=Lt,ht.prototype.delete=$t,ht.prototype.get=Wo,ht.prototype.has=Yo,ht.prototype.set=Jo;function Ir(b){var N=-1,Q=b==null?0:b.length;for(this.clear();++N<Q;){var pe=b[N];this.set(pe[0],pe[1])}}function Xo(){this.__data__=[],this.size=0}function Zo(b){var N=this.__data__,Q=Ui(N,b);if(Q<0)return!1;var pe=N.length-1;return Q==pe?N.pop():Gr.call(N,Q,1),--this.size,!0}function Qo(b){var N=this.__data__,Q=Ui(N,b);return Q<0?void 0:N[Q][1]}function ea(b){return Ui(this.__data__,b)>-1}function ta(b,N){var Q=this.__data__,pe=Ui(Q,b);return pe<0?(++this.size,Q.push([b,N])):Q[pe][1]=N,this}Ir.prototype.clear=Xo,Ir.prototype.delete=Zo,Ir.prototype.get=Qo,Ir.prototype.has=ea,Ir.prototype.set=ta;function ii(b){var N=-1,Q=b==null?0:b.length;for(this.clear();++N<Q;){var pe=b[N];this.set(pe[0],pe[1])}}function tn(){this.size=0,this.__data__={hash:new ht,map:new(gt||Ir),string:new ht}}function ra(b){var N=vi(this,b).delete(b);return this.size-=N?1:0,N}function rn(b){return vi(this,b).get(b)}function ia(b){return vi(this,b).has(b)}function na(b,N){var Q=vi(this,b),pe=Q.size;return Q.set(b,N),this.size+=Q.size==pe?0:1,this}ii.prototype.clear=tn,ii.prototype.delete=ra,ii.prototype.get=rn,ii.prototype.has=ia,ii.prototype.set=na;function nn(b){var N=-1,Q=b==null?0:b.length;for(this.__data__=new ii;++N<Q;)this.add(b[N])}function ps(b){return this.__data__.set(b,s),this}function gs(b){return this.__data__.has(b)}nn.prototype.add=nn.prototype.push=ps,nn.prototype.has=gs;function Mr(b){var N=this.__data__=new Ir(b);this.size=N.size}function sa(){this.__data__=new Ir,this.size=0}function oa(b){var N=this.__data__,Q=N.delete(b);return this.size=N.size,Q}function aa(b){return this.__data__.get(b)}function ca(b){return this.__data__.has(b)}function vs(b,N){var Q=this.__data__;if(Q instanceof Ir){var pe=Q.__data__;if(!gt||pe.length<r-1)return pe.push([b,N]),this.size=++Q.size,this;Q=this.__data__=new ii(pe)}return Q.set(b,N),this.size=Q.size,this}Mr.prototype.clear=sa,Mr.prototype.delete=oa,Mr.prototype.get=aa,Mr.prototype.has=ca,Mr.prototype.set=vs;function ys(b,N){var Q=an(b),pe=!Q&&Cs(b),at=!Q&&!pe&&Tn(b),Te=!Q&&!pe&&!at&&Ns(b),lt=Q||pe||at||Te,Mt=lt?dt(b.length,String):[],Xe=Mt.length;for(var ct in b)(N||Ae.call(b,ct))&&!(lt&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ss(ct,Xe)))&&Mt.push(ct);return Mt}function Ui(b,N){for(var Q=b.length;Q--;)if(Os(b[Q][0],N))return Q;return-1}function Cn(b,N,Q){var pe=N(b);return an(b)?pe:ke(pe,Q(b))}function Fi(b){return b==null?b===void 0?X:re:er&&er in Object(b)?Es(b):la(b)}function Pn(b){return $i(b)&&Fi(b)==f}function Li(b,N,Q,pe,at){return b===N?!0:b==null||N==null||!$i(b)&&!$i(N)?b!==b&&N!==N:_s(b,N,Q,pe,Li,at)}function _s(b,N,Q,pe,at,Te){var lt=an(b),Mt=an(N),Xe=lt?g:Wr(b),ct=Mt?g:Wr(N);Xe=Xe==f?oe:Xe,ct=ct==f?oe:ct;var Ct=Xe==oe,lr=ct==oe,jt=Xe==ct;if(jt&&Tn(b)){if(!Tn(N))return!1;lt=!0,Ct=!1}if(jt&&!Ct)return Te||(Te=new Mr),lt||Ns(b)?sn(b,N,Q,pe,at,Te):ha(b,N,Xe,Q,pe,at,Te);if(!(Q&a)){var ft=Ct&&Ae.call(b,"__wrapped__"),tr=lr&&Ae.call(N,"__wrapped__");if(ft||tr){var jr=ft?b.value():b,xr=tr?N.value():N;return Te||(Te=new Mr),at(jr,xr,Q,pe,Te)}}return jt?(Te||(Te=new Mr),ws(b,N,Q,pe,at,Te)):!1}function ua(b){if(!Ts(b)||xs(b))return!1;var N=cn(b)?et:se;return N.test(ni(b))}function ms(b){return $i(b)&&Ps(b.length)&&!!le[Fi(b)]}function bs(b){if(!As(b))return Ri(b);var N=[];for(var Q in Object(b))Ae.call(b,Q)&&Q!="constructor"&&N.push(Q);return N}function sn(b,N,Q,pe,at,Te){var lt=Q&a,Mt=b.length,Xe=N.length;if(Mt!=Xe&&!(lt&&Xe>Mt))return!1;var ct=Te.get(b);if(ct&&Te.get(N))return ct==N;var Ct=-1,lr=!0,jt=Q&l?new nn:void 0;for(Te.set(b,N),Te.set(N,b);++Ct<Mt;){var ft=b[Ct],tr=N[Ct];if(pe)var jr=lt?pe(tr,ft,Ct,N,b,Te):pe(ft,tr,Ct,b,N,Te);if(jr!==void 0){if(jr)continue;lr=!1;break}if(jt){if(!$e(N,function(xr,Yr){if(!je(jt,Yr)&&(ft===xr||at(ft,xr,Q,pe,Te)))return jt.push(Yr)})){lr=!1;break}}else if(!(ft===tr||at(ft,tr,Q,pe,Te))){lr=!1;break}}return Te.delete(b),Te.delete(N),lr}function ha(b,N,Q,pe,at,Te,lt){switch(Q){case ce:if(b.byteLength!=N.byteLength||b.byteOffset!=N.byteOffset)return!1;b=b.buffer,N=N.buffer;case ne:return!(b.byteLength!=N.byteLength||!Te(new Qt(b),new Qt(N)));case x:case C:case L:return Os(+b,+N);case U:return b.name==N.name&&b.message==N.message;case H:case u:return b==N+"";case q:var Mt=Re;case D:var Xe=pe&a;if(Mt||(Mt=qe),b.size!=N.size&&!Xe)return!1;var ct=lt.get(b);if(ct)return ct==N;pe|=l,lt.set(b,N);var Ct=sn(Mt(b),Mt(N),pe,at,Te,lt);return lt.delete(b),Ct;case m:if(It)return It.call(b)==It.call(N)}return!1}function ws(b,N,Q,pe,at,Te){var lt=Q&a,Mt=on(b),Xe=Mt.length,ct=on(N),Ct=ct.length;if(Xe!=Ct&&!lt)return!1;for(var lr=Xe;lr--;){var jt=Mt[lr];if(!(lt?jt in N:Ae.call(N,jt)))return!1}var ft=Te.get(b);if(ft&&Te.get(N))return ft==N;var tr=!0;Te.set(b,N),Te.set(N,b);for(var jr=lt;++lr<Xe;){jt=Mt[lr];var xr=b[jt],Yr=N[jt];if(pe)var Nn=lt?pe(Yr,xr,jt,N,b,Te):pe(xr,Yr,jt,b,N,Te);if(!(Nn===void 0?xr===Yr||at(xr,Yr,Q,pe,Te):Nn)){tr=!1;break}jr||(jr=jt=="constructor")}if(tr&&!jr){var Mi=b.constructor,Bt=N.constructor;Mi!=Bt&&"constructor"in b&&"constructor"in N&&!(typeof Mi=="function"&&Mi instanceof Mi&&typeof Bt=="function"&&Bt instanceof Bt)&&(tr=!1)}return Te.delete(b),Te.delete(N),tr}function on(b){return Cn(b,pa,Ds)}function vi(b,N){var Q=b.__data__;return Is(N)?Q[typeof N=="string"?"string":"hash"]:Q.map}function _r(b,N){var Q=xe(b,N);return ua(Q)?Q:void 0}function Es(b){var N=Ae.call(b,er),Q=b[er];try{b[er]=void 0;var pe=!0}catch{}var at=We.call(b);return pe&&(N?b[er]=Q:delete b[er]),at}var Ds=ri?function(b){return b==null?[]:(b=Object(b),He(ri(b),function(N){return hr.call(b,N)}))}:ot,Wr=Fi;(bt&&Wr(new bt(new ArrayBuffer(1)))!=ce||gt&&Wr(new gt)!=q||wt&&Wr(wt.resolve())!=ie||Et&&Wr(new Et)!=D||_t&&Wr(new _t)!=V)&&(Wr=function(b){var N=Fi(b),Q=N==oe?b.constructor:void 0,pe=Q?ni(Q):"";if(pe)switch(pe){case Rt:return ce;case Ut:return q;case Dt:return ie;case Ft:return D;case St:return V}return N});function Ss(b,N){return N=N??p,!!N&&(typeof b=="number"||we.test(b))&&b>-1&&b%1==0&&b<N}function Is(b){var N=typeof b;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?b!=="__proto__":b===null}function xs(b){return!!Ve&&Ve in b}function As(b){var N=b&&b.constructor,Q=typeof N=="function"&&N.prototype||Se;return b===Q}function la(b){return We.call(b)}function ni(b){if(b!=null){try{return Be.call(b)}catch{}try{return b+""}catch{}}return""}function Os(b,N){return b===N||b!==b&&N!==N}var Cs=Pn(function(){return arguments}())?Pn:function(b){return $i(b)&&Ae.call(b,"callee")&&!hr.call(b,"callee")},an=Array.isArray;function fa(b){return b!=null&&Ps(b.length)&&!cn(b)}var Tn=gi||st;function da(b,N){return Li(b,N)}function cn(b){if(!Ts(b))return!1;var N=Fi(b);return N==P||N==O||N==w||N==M}function Ps(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=p}function Ts(b){var N=typeof b;return b!=null&&(N=="object"||N=="function")}function $i(b){return b!=null&&typeof b=="object"}var Ns=Ie?pt(Ie):ms;function pa(b){return fa(b)?ys(b):bs(b)}function ot(){return[]}function st(){return!1}n.exports=da})(o3,Ro);function a3(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var l=n.charAt(a),p=l.charCodeAt(0);if(r[p]!==255)throw new TypeError(l+" is ambiguous");r[p]=a}var f=n.length,g=n.charAt(0),w=Math.log(f)/Math.log(256),x=Math.log(256)/Math.log(f);function C(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var q=0,L=0,re=0,oe=O.length;re!==oe&&O[re]===0;)re++,q++;for(var ie=(oe-re)*x+1>>>0,M=new Uint8Array(ie);re!==oe;){for(var H=O[re],D=0,u=ie-1;(H!==0||D<L)&&u!==-1;u--,D++)H+=256*M[u]>>>0,M[u]=H%f>>>0,H=H/f>>>0;if(H!==0)throw new Error("Non-zero carry");L=D,re++}for(var m=ie-L;m!==ie&&M[m]===0;)m++;for(var X=g.repeat(q);m<ie;++m)X+=n.charAt(M[m]);return X}function U(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var q=0;if(O[q]!==" "){for(var L=0,re=0;O[q]===g;)L++,q++;for(var oe=(O.length-q)*w+1>>>0,ie=new Uint8Array(oe);O[q];){var M=r[O.charCodeAt(q)];if(M===255)return;for(var H=0,D=oe-1;(M!==0||H<re)&&D!==-1;D--,H++)M+=f*ie[D]>>>0,ie[D]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");re=H,q++}if(O[q]!==" "){for(var u=oe-re;u!==oe&&ie[u]===0;)u++;for(var m=new Uint8Array(L+(oe-u)),X=L;u!==oe;)m[X++]=ie[u++];return m}}}function P(O){var q=U(O);if(q)return q;throw new Error(`Non-${t} character`)}return{encode:C,decodeUnsafe:U,decode:P}}var c3=a3,u3=c3;const Gd=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},h3=n=>new TextEncoder().encode(n),l3=n=>new TextDecoder().decode(n);class f3{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class d3{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Wd(this,t)}}class p3{constructor(t){this.decoders=t}or(t){return Wd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Wd=(n,t)=>new p3({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class g3{constructor(t,r,s,a){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new f3(t,r,s),this.decoder=new d3(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Vo=({name:n,prefix:t,encode:r,decode:s})=>new g3(n,t,r,s),ds=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:a}=u3(r,t);return Vo({prefix:n,name:t,encode:s,decode:l=>Gd(a(l))})},v3=(n,t,r,s)=>{const a={};for(let x=0;x<t.length;++x)a[t[x]]=x;let l=n.length;for(;n[l-1]==="=";)--l;const p=new Uint8Array(l*r/8|0);let f=0,g=0,w=0;for(let x=0;x<l;++x){const C=a[n[x]];if(C===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|C,f+=r,f>=8&&(f-=8,p[w++]=255&g>>f)}if(f>=r||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return p},y3=(n,t,r)=>{const s=t[t.length-1]==="=",a=(1<<r)-1;let l="",p=0,f=0;for(let g=0;g<n.length;++g)for(f=f<<8|n[g],p+=8;p>r;)p-=r,l+=t[a&f>>p];if(p&&(l+=t[a&f<<r-p]),s)for(;l.length*r&7;)l+="=";return l},Yt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>Vo({prefix:t,name:n,encode(a){return y3(a,s,r)},decode(a){return v3(a,s,r,n)}}),_3=Vo({prefix:"\0",name:"identity",encode:n=>l3(n),decode:n=>h3(n)});var m3=Object.freeze({__proto__:null,identity:_3});const b3=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var w3=Object.freeze({__proto__:null,base2:b3});const E3=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var D3=Object.freeze({__proto__:null,base8:E3});const S3=ds({prefix:"9",name:"base10",alphabet:"0123456789"});var I3=Object.freeze({__proto__:null,base10:S3});const x3=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),A3=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var O3=Object.freeze({__proto__:null,base16:x3,base16upper:A3});const C3=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),P3=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),T3=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),N3=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),R3=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),U3=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F3=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),L3=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$3=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var M3=Object.freeze({__proto__:null,base32:C3,base32upper:P3,base32pad:T3,base32padupper:N3,base32hex:R3,base32hexupper:U3,base32hexpad:F3,base32hexpadupper:L3,base32z:$3});const j3=ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),q3=ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var z3=Object.freeze({__proto__:null,base36:j3,base36upper:q3});const H3=ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),B3=ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var K3=Object.freeze({__proto__:null,base58btc:H3,base58flickr:B3});const k3=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V3=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),G3=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),W3=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Y3=Object.freeze({__proto__:null,base64:k3,base64pad:V3,base64url:G3,base64urlpad:W3});const Yd=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),J3=Yd.reduce((n,t,r)=>(n[r]=t,n),[]),X3=Yd.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function Z3(n){return n.reduce((t,r)=>(t+=J3[r],t),"")}function Q3(n){const t=[];for(const r of n){const s=X3[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const eD=Vo({prefix:"ðŸš€",name:"base256emoji",encode:Z3,decode:Q3});var tD=Object.freeze({__proto__:null,base256emoji:eD}),rD=Jd,Df=128,iD=127,nD=~iD,sD=Math.pow(2,31);function Jd(n,t,r){t=t||[],r=r||0;for(var s=r;n>=sD;)t[r++]=n&255|Df,n/=128;for(;n&nD;)t[r++]=n&255|Df,n>>>=7;return t[r]=n|0,Jd.bytes=r-s+1,t}var oD=Zc,aD=128,Sf=127;function Zc(n,s){var r=0,s=s||0,a=0,l=s,p,f=n.length;do{if(l>=f)throw Zc.bytes=0,new RangeError("Could not decode varint");p=n[l++],r+=a<28?(p&Sf)<<a:(p&Sf)*Math.pow(2,a),a+=7}while(p>=aD);return Zc.bytes=l-s,r}var cD=Math.pow(2,7),uD=Math.pow(2,14),hD=Math.pow(2,21),lD=Math.pow(2,28),fD=Math.pow(2,35),dD=Math.pow(2,42),pD=Math.pow(2,49),gD=Math.pow(2,56),vD=Math.pow(2,63),yD=function(n){return n<cD?1:n<uD?2:n<hD?3:n<lD?4:n<fD?5:n<dD?6:n<pD?7:n<gD?8:n<vD?9:10},_D={encode:rD,decode:oD,encodingLength:yD},Xd=_D;const If=(n,t,r=0)=>(Xd.encode(n,t,r),t),xf=n=>Xd.encodingLength(n),Qc=(n,t)=>{const r=t.byteLength,s=xf(n),a=s+xf(r),l=new Uint8Array(a+r);return If(n,l,0),If(r,l,s),l.set(t,a),new mD(n,r,t,l)};class mD{constructor(t,r,s,a){this.code=t,this.size=r,this.digest=s,this.bytes=a}}const Zd=({name:n,code:t,encode:r})=>new bD(n,t,r);class bD{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Qc(this.code,r):r.then(s=>Qc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Qd=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),wD=Zd({name:"sha2-256",code:18,encode:Qd("SHA-256")}),ED=Zd({name:"sha2-512",code:19,encode:Qd("SHA-512")});var DD=Object.freeze({__proto__:null,sha256:wD,sha512:ED});const ep=0,SD="identity",tp=Gd,ID=n=>Qc(ep,tp(n)),xD={code:ep,name:SD,encode:tp,digest:ID};var AD=Object.freeze({__proto__:null,identity:xD});new TextEncoder,new TextDecoder;const Af={...m3,...w3,...D3,...I3,...O3,...M3,...z3,...K3,...Y3,...tD};({...DD,...AD});function rp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function OD(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?rp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function ip(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const Of=ip("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Tc=ip("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=OD(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),CD={utf8:Of,"utf-8":Of,hex:Af.base16,latin1:Tc,ascii:Tc,binary:Tc,...Af};function PD(n,t="utf8"){const r=CD[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?rp(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const np="wc",TD=2,Eu="core",Ci=`${np}@2:${Eu}:`,ND={name:Eu,logger:"error"},RD={database:":memory:"},UD="crypto",Cf="client_ed25519_seed",FD=ye.ONE_DAY,LD="keychain",$D="0.3",MD="messages",jD="0.3",qD=ye.SIX_HOURS,zD="publisher",sp="irn",HD="error",op="wss://relay.walletconnect.com",Pf="wss://relay.walletconnect.org",BD="relayer",At={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},KD="_subscription",es={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},kD=ye.ONE_SECOND/2,VD="2.9.0",GD=1e4,WD="0.3",YD="WALLETCONNECT_CLIENT_ID",ti={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},JD="subscription",XD="0.3",ZD=ye.FIVE_SECONDS*1e3,QD="pairing",e6="0.3",ts={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},ei={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},t6="history",r6="0.3",i6="expirer",Fr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},n6="0.3",Nc="verify-api",Tf="https://verify.walletconnect.com";class s6{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=LD,this.version=$D,this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:l}=he("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,zd(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Hd(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}}class o6{constructor(t,r,s){this.core=t,this.logger=r,this.name=UD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),l=af(a);return Ud(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=Ww();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const l=await this.getClientSeed(),p=af(l),f=Jc();return await kw(f,a,FD,p)},this.generateSharedKey=(a,l,p)=>{this.isInitialized();const f=this.getPrivateKey(a),g=Yw(f,l);return this.setSymKey(g,p)},this.setSymKey=async(a,l)=>{this.isInitialized();const p=l||Jw(a);return await this.keychain.set(p,a),p},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,l,p)=>{this.isInitialized();const f=jd(p),g=as(l);if(hf(f)){const U=f.senderPublicKey,P=f.receiverPublicKey;a=await this.generateSharedKey(U,P)}const w=this.getSymKey(a),{type:x,senderPublicKey:C}=f;return Zw({type:x,symKey:w,message:g,senderPublicKey:C})},this.decode=async(a,l,p)=>{this.isInitialized();const f=tE(l,p);if(hf(f)){const x=f.receiverPublicKey,C=f.senderPublicKey;a=await this.generateSharedKey(x,C)}const g=this.getSymKey(a),w=Qw({symKey:g,encoded:l});return du(w)},this.getPayloadType=a=>{const l=Po(a);return ls(l.type)},this.getPayloadSenderPublicKey=a=>{const l=Po(a);return l.senderPublicKey?cr(l.senderPublicKey,ar):void 0},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new s6(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Cf)}catch{t=Jc(),await this.keychain.set(Cf,t)}return PD(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}}class a6 extends ww{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=MD,this.version=jD,this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const l=In(a);let p=this.messages.get(s);return typeof p>"u"&&(p={}),typeof p[l]<"u"||(p[l]=a,this.messages.set(s,p),await this.persist()),l},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const l=this.get(s),p=In(a);return typeof l[p]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(t,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,zd(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Hd(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}}class c6 extends Ew{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new ur.EventEmitter,this.name=zD,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.queueTimeout=ye.toMiliseconds(ye.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,a,l)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}});try{const p=(l==null?void 0:l.ttl)||qD,f=Xc(l),g=(l==null?void 0:l.prompt)||!1,w=(l==null?void 0:l.tag)||0,x=(l==null?void 0:l.id)||nu().toString(),C={topic:s,message:a,opts:{ttl:p,relay:f,prompt:g,tag:w,id:x}},U=setTimeout(()=>this.queue.set(x,C),this.queueTimeout);try{await await To(this.rpcPublish(s,a,p,f,g,w,x),this.publishTimeout),clearTimeout(U),this.relayer.events.emit(At.publish,C)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}})}catch(p){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(p),p}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(t,r,s,a,l,p,f){var g,w,x,C;const U={method:Eo(a.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:l,tag:p},id:f};return or((g=U.params)==null?void 0:g.prompt)&&((w=U.params)==null||delete w.prompt),or((x=U.params)==null?void 0:x.tag)&&((C=U.params)==null||delete C.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:U}),this.relayer.request(U)}onPublish(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:a}=t;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(At.connection_stalled);return}this.checkQueue()}),this.relayer.on(At.message_ack,t=>{this.onPublish(t.id.toString())})}}class u6{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const a=s.filter(l=>l!==r);if(!a.length){this.map.delete(t);return}this.map.set(t,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var h6=Object.defineProperty,l6=Object.defineProperties,f6=Object.getOwnPropertyDescriptors,Nf=Object.getOwnPropertySymbols,d6=Object.prototype.hasOwnProperty,p6=Object.prototype.propertyIsEnumerable,Rf=(n,t,r)=>t in n?h6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,rs=(n,t)=>{for(var r in t||(t={}))d6.call(t,r)&&Rf(n,r,t[r]);if(Nf)for(var r of Nf(t))p6.call(t,r)&&Rf(n,r,t[r]);return n},Rc=(n,t)=>l6(n,f6(t));class g6 extends Iw{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new u6,this.events=new ur.EventEmitter,this.name=JD,this.version=XD,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ci,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const l=Xc(a),p={topic:s,relay:l};this.pending.set(s,p);const f=await this.rpcSubscribe(s,l);return this.onSubscribe(f,p),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),f}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,l)=>{const p=new ye.Watch;p.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),p.stop(this.pendingSubscriptionWatchLabel),a(!0)),p.elapsed(this.pendingSubscriptionWatchLabel)>=ZD&&(clearInterval(f),p.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async a=>await this.unsubscribeById(t,a,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const a=Xc(s);await this.rpcUnsubscribe(t,r,a);const l=kt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(t,r){const s={method:Eo(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await To(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(At.connection_stalled)}return In(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:Eo(r.protocol).batchSubscribe,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await To(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(At.connection_stalled)}}rpcUnsubscribe(t,r,s){const a={method:Eo(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(t,r){this.setSubscription(t,Rc(rs({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,rs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,rs({},r)),this.topicMap.set(r.topic,t),this.events.emit(ti.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(ti.deleted,Rc(rs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ti.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ti.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);fs(r)&&this.onBatchSubscribe(r.map((s,a)=>Rc(rs({},t[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(At.connect,async()=>{await this.onConnect()}),this.relayer.on(At.disconnect,()=>{this.onDisconnect()}),this.events.on(ti.created,async t=>{const r=ti.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(ti.deleted,async t=>{const r=ti.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var v6=Object.defineProperty,Uf=Object.getOwnPropertySymbols,y6=Object.prototype.hasOwnProperty,_6=Object.prototype.propertyIsEnumerable,Ff=(n,t,r)=>t in n?v6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,m6=(n,t)=>{for(var r in t||(t={}))y6.call(t,r)&&Ff(n,r,t[r]);if(Uf)for(var r of Uf(t))_6.call(t,r)&&Ff(n,r,t[r]);return n};class b6 extends Dw{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new ur.EventEmitter,this.name=BD,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Qe.generateChildLogger(t.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:t.logger||HD})),this.messages=new a6(this.logger,t.core),this.subscriber=new g6(this,this.logger),this.publisher=new c6(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||op,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Pf}...`),await this.restartTransport(Pf)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},GD)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var s;this.isInitialized();let a=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"";return a||(await Promise.all([new Promise(l=>{this.subscriber.once(ti.created,p=>{p.topic===t&&l()})}),new Promise(async l=>{a=await this.subscriber.subscribe(t,r),l()})]),a)}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(At.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(ti.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await To(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>s(a)).then(()=>r()).finally(()=>this.removeListener(At.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(At.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(At.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(es.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ti(new s3(fE({sdkVersion:VD,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),au(t)){if(!t.method.endsWith(KD))return;const r=t.params,{topic:s,message:a,publishedAt:l}=r.data,p={topic:s,message:a,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(m6({type:"event",event:r.id},p)),this.events.emit(r.id,p),await this.acknowledgePayload(t),await this.onMessageEvent(p)}else Mo(t)&&this.events.emit(At.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(At.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=su(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(es.payload,t=>this.onProviderPayload(t)),this.provider.on(es.connect,()=>{this.events.emit(At.connect)}),this.provider.on(es.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(es.error,t=>{this.logger.error(t),this.events.emit(At.error,t)})}registerEventListeners(){this.events.on(At.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(At.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ye.toMiliseconds(kD))}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var w6=Object.defineProperty,Lf=Object.getOwnPropertySymbols,E6=Object.prototype.hasOwnProperty,D6=Object.prototype.propertyIsEnumerable,$f=(n,t,r)=>t in n?w6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Mf=(n,t)=>{for(var r in t||(t={}))E6.call(t,r)&&$f(n,r,t[r]);if(Lf)for(var r of Lf(t))D6.call(t,r)&&$f(n,r,t[r]);return n};class Go extends Sw{constructor(t,r,s,a=Ci,l=void 0){super(t,r,s,a),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=WD,this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(p=>{this.getKey&&p!==null&&!or(p)?this.map.set(this.getKey(p),p):FE(p)?this.map.set(p.id,p):LE(p)&&this.map.set(p.topic,p)}),this.cached=[],this.initialized=!0)},this.set=async(p,f)=>{this.isInitialized(),this.map.has(p)?await this.update(p,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:p,value:f}),this.map.set(p,f),await this.persist())},this.get=p=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:p}),this.getData(p)),this.getAll=p=>(this.isInitialized(),p?this.values.filter(f=>Object.keys(p).every(g=>Ro(f[g],p[g]))):this.values),this.update=async(p,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:p,update:f});const g=Mf(Mf({},this.getData(p)),f);this.map.set(p,g),await this.persist()},this.delete=async(p,f)=>{this.isInitialized(),this.map.has(p)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:p,reason:f}),this.map.delete(p),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=l}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}}class S6{constructor(t,r){this.core=t,this.logger=r,this.name=QD,this.version=e6,this.events=new ur,this.initialized=!1,this.storagePrefix=Ci,this.ignoredPayloadTypes=[Qi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Jc(),a=await this.core.crypto.setSymKey(s),l=kr(ye.FIVE_MINUTES),p={protocol:sp},f={topic:a,expiry:l,relay:p,active:!1},g=IE({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:p});return await this.pairings.set(a,f),await this.core.relayer.subscribe(a),this.core.expirer.set(a,l),{topic:a,uri:g}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:l,relay:p}=EE(s.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const f=kr(ye.FIVE_MINUTES),g={topic:a,relay:p,expiry:f,active:!1};return await this.pairings.set(a,g),await this.core.crypto.setSymKey(l,a),await this.core.relayer.subscribe(a,{relay:p}),this.core.expirer.set(a,f),s.activatePairing&&await this.activate({topic:a}),g},this.activate=async({topic:s})=>{this.isInitialized();const a=kr(ye.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const l=await this.sendRequest(a,"wc_pairingPing",{}),{done:p,resolve:f,reject:g}=Sn();this.events.once(qt("pairing_ping",l),({error:w})=>{w?g(w):f()}),await p()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",kt("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,l)=>{const p=Lo(a,l),f=await this.core.crypto.encode(s,p),g=ts[a].req;return this.core.history.set(s,p),this.core.relayer.publish(s,f,g),p.id},this.sendResult=async(s,a,l)=>{const p=su(s,l),f=await this.core.crypto.encode(a,p),g=await this.core.history.get(a,s),w=ts[g.request.method].res;await this.core.relayer.publish(a,f,w),await this.core.history.resolve(p)},this.sendError=async(s,a,l)=>{const p=$o(s,l),f=await this.core.crypto.encode(a,p),g=await this.core.history.get(a,s),w=ts[g.request.method]?ts[g.request.method].res:ts.unregistered_method.res;await this.core.relayer.publish(a,f,w),await this.core.history.resolve(p)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,kt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>xi(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:l}=s,p=l.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingRequest(a,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,l);default:return this.onUnknownRpcMethodRequest(a,l)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:l}=s,p=(await this.core.history.get(a,l.id)).request.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingResponse(a,l);default:return this.onUnknownRpcMethodResponse(p)}},this.onPairingPingRequest=async(s,a)=>{const{id:l}=a;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit("pairing_ping",{id:l,topic:s})}catch(p){await this.sendError(l,s,p),this.logger.error(p)}},this.onPairingPingResponse=(s,a)=>{const{id:l}=a;setTimeout(()=>{pi(a)?this.events.emit(qt("pairing_ping",l),{}):Kr(a)&&this.events.emit(qt("pairing_ping",l),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:l}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:l,topic:s})}catch(p){await this.sendError(l,s,p),this.logger.error(p)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:l,method:p}=a;try{if(this.registeredMethods.includes(p))return;const f=kt("WC_METHOD_UNSUPPORTED",p);await this.sendError(l,s,f),this.logger.error(f)}catch(f){await this.sendError(l,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(kt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:a}=he("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!UE(s.uri)){const{message:a}=he("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!vr(s)){const{message:l}=he("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:l}=he("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!Vt(s,!1)){const{message:a}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(xi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=he("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new Go(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(At.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);au(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Mo(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))})}registerExpirerEvents(){this.core.expirer.on(Fr.expired,async t=>{const{topic:r}=Kd(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class I6 extends bw{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new ur.EventEmitter,this.name=t6,this.version=r6,this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:l}),this.records.has(a.id))return;const p={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:l,expiry:kr(ye.THIRTY_DAYS)};this.records.set(p.id,p),this.events.emit(ei.created,p)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=Kr(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(ei.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(l=>{if(l.topic===s){if(typeof a<"u"&&l.id!==a)return;this.records.delete(l.id),this.events.emit(ei.deleted,l)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Lo(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ei.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(ei.created,t=>{const r=ei.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(ei.updated,t=>{const r=ei.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(ei.deleted,t=>{const r=ei.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{ye.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}}class x6 extends xw{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new ur.EventEmitter,this.name=i6,this.version=n6,this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const l=this.formatTarget(s),p={target:l,expiry:a};this.expirations.set(l,p),this.checkExpiry(l,p),this.events.emit(Fr.created,{target:l,expiration:p})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),l=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Fr.deleted,{target:a,expiration:l})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return dE(t);if(typeof t=="number")return pE(t);const{message:r}=he("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Fr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;ye.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Fr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(An.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Fr.created,t=>{const r=Fr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Fr.expired,t=>{const r=Fr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Fr.deleted,t=>{const r=Fr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}}class A6 extends Aw{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Nc,this.initialized=!1,this.init=async s=>{qd()||!mu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||Tf,await this.createIframe())},this.register=async s=>{var a;if(this.initialized||await this.init(),!!this.iframe)try{(a=this.iframe.contentWindow)==null||a.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var a;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const l=this.startAbortTimer(ye.FIVE_SECONDS),p=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(l),p.status===200?(a=await p.json())==null?void 0:a.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,a)=>{if(document.getElementById(Nc))return s();const l=document.createElement("iframe");l.setAttribute("id",Nc),l.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),l.style.display="none",l.addEventListener("load",()=>{this.initialized=!0,s()}),l.addEventListener("error",p=>{a(p)}),document.body.append(l),this.iframe=l}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ye.toMiliseconds(ye.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=Tf,this.abortController=new AbortController,this.isDevEnv=_u()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(t))}}var O6=Object.defineProperty,jf=Object.getOwnPropertySymbols,C6=Object.prototype.hasOwnProperty,P6=Object.prototype.propertyIsEnumerable,qf=(n,t,r)=>t in n?O6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,zf=(n,t)=>{for(var r in t||(t={}))C6.call(t,r)&&qf(n,r,t[r]);if(jf)for(var r of jf(t))P6.call(t,r)&&qf(n,r,t[r]);return n};class Du extends mw{constructor(t){super(t),this.protocol=np,this.version=TD,this.name=Eu,this.events=new ur.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||op;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||ND.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new An.HeartBeat,this.crypto=new o6(this,this.logger,t==null?void 0:t.keychain),this.history=new I6(this,this.logger),this.expirer=new x6(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new hw(zf(zf({},RD),t==null?void 0:t.storageOptions)),this.relayer=new b6({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new S6(this,this.logger),this.verify=new A6(this.projectId||"",this.logger)}static async init(t){const r=new Du(t);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(YD,s),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const T6=Du,ap="wc",cp=2,up="client",Su=`${ap}@${cp}:${up}:`,Uc={name:up,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},N6="WALLETCONNECT_DEEPLINK_CHOICE",R6="proposal",hp="Proposal expired",U6="session",mo=ye.SEVEN_DAYS,F6="engine",is={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Fc={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},L6="request",$6=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var M6=Object.defineProperty,j6=Object.defineProperties,q6=Object.getOwnPropertyDescriptors,Hf=Object.getOwnPropertySymbols,z6=Object.prototype.hasOwnProperty,H6=Object.prototype.propertyIsEnumerable,Bf=(n,t,r)=>t in n?M6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Ur=(n,t)=>{for(var r in t||(t={}))z6.call(t,r)&&Bf(n,r,t[r]);if(Hf)for(var r of Hf(t))H6.call(t,r)&&Bf(n,r,t[r]);return n},Lc=(n,t)=>j6(n,q6(t));class B6 extends Cw{constructor(t){super(t),this.name=F6,this.events=new ur,this.initialized=!1,this.ignoredPayloadTypes=[Qi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(is)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Lc(Ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:l,optionalNamespaces:p,sessionProperties:f,relays:g}=s;let w=a,x,C=!1;if(w&&(C=this.client.core.pairing.pairings.get(w).active),!w||!C){const{topic:ie,uri:M}=await this.client.core.pairing.create();w=ie,x=M}const U=await this.client.core.crypto.generateKeyPair(),P=Ur({requiredNamespaces:l,optionalNamespaces:p,relays:g??[{protocol:sp}],proposer:{publicKey:U,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:O,resolve:q,done:L}=Sn(ye.FIVE_MINUTES,hp);if(this.events.once(qt("session_connect"),async({error:ie,session:M})=>{if(ie)O(ie);else if(M){M.self.publicKey=U;const H=Lc(Ur({},M),{requiredNamespaces:M.requiredNamespaces,optionalNamespaces:M.optionalNamespaces});await this.client.session.set(M.topic,H),await this.setExpiry(M.topic,M.expiry),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:M.peer.metadata}),q(H)}}),!w){const{message:ie}=he("NO_MATCHING_KEY",`connect() pairing topic: ${w}`);throw new Error(ie)}const re=await this.sendRequest(w,"wc_sessionPropose",P),oe=kr(ye.FIVE_MINUTES);return await this.setProposal(re,Ur({id:re,expiry:oe},P)),{uri:x,approval:L}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:l,sessionProperties:p}=r,f=this.client.proposal.get(s);let{pairingTopic:g,proposer:w,requiredNamespaces:x,optionalNamespaces:C}=f;g=g||"",os(x)||(x=CE(l,"approve()"));const U=await this.client.core.crypto.generateKeyPair(),P=w.publicKey,O=await this.client.core.crypto.generateSharedKey(U,P);g&&s&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:w.metadata}),await this.sendResult(s,g,{relay:{protocol:a??"irn"},responderPublicKey:U}),await this.client.proposal.delete(s,kt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const q=Ur({relay:{protocol:a??"irn"},namespaces:l,requiredNamespaces:x,optionalNamespaces:C,pairingTopic:g,controller:{publicKey:U,metadata:this.client.metadata},expiry:kr(mo)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(O),await this.sendRequest(O,"wc_sessionSettle",q);const L=Lc(Ur({},q),{topic:O,pairingTopic:g,acknowledged:!1,self:q.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:U});return await this.client.session.set(O,L),await this.setExpiry(O,kr(mo)),{topic:O,acknowledged:()=>new Promise(re=>setTimeout(()=>re(this.client.session.get(O)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,a),await this.client.proposal.delete(s,kt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,l=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:a}),{done:p,resolve:f,reject:g}=Sn();return this.events.once(qt("session_update",l),({error:w})=>{w?g(w):f()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:p}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest(s,"wc_sessionExtend",{}),{done:l,resolve:p,reject:f}=Sn();return this.events.once(qt("session_extend",a),({error:g})=>{g?f(g):p()}),await this.setExpiry(s,kr(mo)),{acknowledged:l}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:l,expiry:p}=r,f=await this.sendRequest(l,"wc_sessionRequest",{request:a,chainId:s},p),{done:g,resolve:w,reject:x}=Sn(p);this.events.once(qt("session_request",f),({error:U,result:P})=>{U?x(U):w(P)}),this.client.events.emit("session_request_sent",{topic:l,request:a,chainId:s,id:f});const C=await this.client.core.storage.getItem(N6);return gE({id:f,topic:l,wcDeepLink:C}),await g()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:l}=a;pi(a)?await this.sendResult(l,s,a.result):Kr(a)&&await this.sendError(l,s,a.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest(s,"wc_sessionPing",{}),{done:l,resolve:p,reject:f}=Sn();this.events.once(qt("session_ping",a),({error:g})=>{g?f(g):p()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:l}=r;await this.sendRequest(s,"wc_sessionEvent",{event:a,chainId:l})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=nu().toString();let l;const p=f=>{(f==null?void 0:f.id.toString())===a&&(this.client.core.relayer.events.removeListener(At.message_ack,p),l())};await Promise.all([new Promise(f=>{l=f,this.client.core.relayer.on(At.message_ack,p)}),this.sendRequest(s,"wc_sessionDelete",kt("USER_DISCONNECTED"),void 0,a)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>NE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(l=>{var p,f;return((p=l.peerMetadata)==null?void 0:p.url)&&((f=l.peerMetadata)==null?void 0:f.url)===r.peer.metadata.url&&l.topic&&l.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,kt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r)},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,kt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=is.wc_sessionRequest.req.ttl,{id:a,topic:l,params:p}=r;await this.client.pendingRequest.set(a,{id:a,topic:l,params:p}),s&&this.client.core.expirer.set(a,kr(s))},this.sendRequest=async(r,s,a,l,p)=>{const f=Lo(s,a);if(mu()&&$6.includes(s)){const x=In(JSON.stringify(f));await this.client.core.verify.register({attestationId:x})}const g=await this.client.core.crypto.encode(r,f),w=is[s].req;return l&&(w.ttl=l),p&&(w.id=p),this.client.core.history.set(r,f),this.client.core.relayer.publish(r,g,w),f.id},this.sendResult=async(r,s,a)=>{const l=su(r,a),p=await this.client.core.crypto.encode(s,l),f=await this.client.core.history.get(s,r),g=is[f.request.method].res;this.client.core.relayer.publish(s,p,g),await this.client.core.history.resolve(l)},this.sendError=async(r,s,a)=>{const l=$o(r,a),p=await this.client.core.crypto.encode(s,l),f=await this.client.core.history.get(s,r),g=is[f.request.method].res;this.client.core.relayer.publish(s,p,g),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{xi(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{xi(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=r=>{const{topic:s,payload:a}=r,l=a.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,l=(await this.client.core.history.get(s,a.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:a}=he("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidConnect(Ur({},s.params));const p=kr(ye.FIVE_MINUTES),f=Ur({id:l,pairingTopic:r,expiry:p},a);await this.setProposal(l,f);const g=In(JSON.stringify(s)),w=await this.getVerifyContext(g,f.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:f,verifyContext:w})}catch(p){await this.sendError(l,r,p),this.client.logger.error(p)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(pi(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const p=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});const f=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const g=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const w=await this.client.core.crypto.generateSharedKey(f,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});const x=await this.client.core.relayer.subscribe(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:x}),await this.client.core.pairing.activate({topic:r})}else Kr(s)&&(await this.client.proposal.delete(a,kt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:p,controller:f,expiry:g,namespaces:w,requiredNamespaces:x,optionalNamespaces:C,sessionProperties:U,pairingTopic:P}=s.params,O=Ur({topic:r,relay:p,expiry:g,namespaces:w,acknowledged:!0,pairingTopic:P,requiredNamespaces:x,optionalNamespaces:C,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},U&&{sessionProperties:U});await this.sendResult(s.id,r,!0),this.events.emit(qt("session_connect"),{session:O}),this.cleanupDuplicatePairings(O)}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;pi(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(qt("session_approve",a),{})):Kr(s)&&(await this.client.session.delete(r,kt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidUpdate(Ur({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult(l,r,!0),this.client.events.emit("session_update",{id:l,topic:r,params:a})}catch(p){await this.sendError(l,r,p),this.client.logger.error(p)}},this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;pi(s)?this.events.emit(qt("session_update",a),{}):Kr(s)&&this.events.emit(qt("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,kr(mo)),await this.sendResult(a,r,!0),this.client.events.emit("session_extend",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;pi(s)?this.events.emit(qt("session_extend",a),{}):Kr(s)&&this.events.emit(qt("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.client.events.emit("session_ping",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{pi(s)?this.events.emit(qt("session_ping",a),{}):Kr(s)&&this.events.emit(qt("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(At.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult(a,r,!0)]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidRequest(Ur({topic:r},l)),await this.setPendingSessionRequest({id:a,topic:r,params:l});const p=In(JSON.stringify(s)),f=this.client.session.get(r),g=await this.getVerifyContext(p,f.peer.metadata);this.client.events.emit("session_request",{id:a,topic:r,params:l,verifyContext:g})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;pi(s)?this.events.emit(qt("session_request",a),{result:s.result}):Kr(s)&&this.events.emit(qt("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidEmit(Ur({topic:r},l)),this.client.events.emit("session_event",{id:a,topic:r,params:l})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.isValidConnect=async r=>{if(!vr(r)){const{message:g}=he("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(g)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:l,sessionProperties:p,relays:f}=r;if(or(s)||await this.isValidPairingTopic(s),!KE(f,!0)){const{message:g}=he("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(g)}!or(a)&&os(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!or(l)&&os(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),or(p)||this.validateSessionProps(p,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=BE(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!vr(r))throw new Error(he("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:l,sessionProperties:p}=r;await this.isValidProposalId(s);const f=this.client.proposal.get(s),g=Do(a,"approve()");if(g)throw new Error(g.message);const w=_f(f.requiredNamespaces,a,"approve()");if(w)throw new Error(w.message);if(!Vt(l,!0)){const{message:x}=he("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(x)}or(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async r=>{if(!vr(r)){const{message:l}=he("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!VE(a)){const{message:l}=he("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!vr(r)){const{message:w}=he("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(w)}const{relay:s,controller:a,namespaces:l,expiry:p}=r;if(!Vd(s)){const{message:w}=he("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(w)}const f=$E(a,"onSessionSettleRequest()");if(f)throw new Error(f.message);const g=Do(l,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(xi(p)){const{message:w}=he("EXPIRED","onSessionSettleRequest()");throw new Error(w)}},this.isValidUpdate=async r=>{if(!vr(r)){const{message:g}=he("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(g)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),p=Do(a,"update()");if(p)throw new Error(p.message);const f=_f(l.requiredNamespaces,a,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async r=>{if(!vr(r)){const{message:a}=he("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!vr(r)){const{message:g}=he("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(g)}const{topic:s,request:a,chainId:l,expiry:p}=r;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!yf(f,l)){const{message:g}=he("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(g)}if(!GE(a)){const{message:g}=he("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(g)}if(!JE(f,l,a.method)){const{message:g}=he("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(g)}if(p&&!e3(p,Fc)){const{message:g}=he("MISSING_OR_INVALID",`request() expiry: ${p}. Expiry must be a number (in seconds) between ${Fc.min} and ${Fc.max}`);throw new Error(g)}},this.isValidRespond=async r=>{if(!vr(r)){const{message:l}=he("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:s,response:a}=r;if(await this.isValidSessionTopic(s),!WE(a)){const{message:l}=he("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!vr(r)){const{message:a}=he("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!vr(r)){const{message:f}=he("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(f)}const{topic:s,event:a,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:p}=this.client.session.get(s);if(!yf(p,l)){const{message:f}=he("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(f)}if(!YE(a)){const{message:f}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(f)}if(!XE(p,l,a.name)){const{message:f}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidDisconnect=async r=>{if(!vr(r)){const{message:a}=he("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(a.verified.origin=l,a.verified.validation=l===s.url?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!Vt(a,!1)){const{message:l}=he("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(l)}})}}isInitialized(){if(!this.initialized){const{message:t}=he("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(At.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);au(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Mo(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})})}registerExpirerEvents(){this.client.core.expirer.on(Fr.expired,async t=>{const{topic:r,id:s}=Kd(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,he("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(t){if(!Vt(t,!1)){const{message:r}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=he("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Vt(t,!1)){const{message:r}=he("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=he("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=he("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Vt(t,!1)){const{message:r}=he("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=he("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!kE(t)){const{message:r}=he("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=he("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(xi(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=he("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class K6 extends Go{constructor(t,r){super(t,r,R6,Su),this.core=t,this.logger=r}}class k6 extends Go{constructor(t,r){super(t,r,U6,Su),this.core=t,this.logger=r}}class V6 extends Go{constructor(t,r){super(t,r,L6,Su,s=>s.id),this.core=t,this.logger=r}}let G6=class lp extends Ow{constructor(t){super(t),this.protocol=ap,this.version=cp,this.name=Uc.name,this.events=new ur.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||Uc.name,this.metadata=(t==null?void 0:t.metadata)||cE();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Uc.logger}));this.core=(t==null?void 0:t.core)||new T6(t),this.logger=Qe.generateChildLogger(r,this.name),this.session=new k6(this.core,this.logger),this.proposal=new K6(this.core,this.logger),this.pendingRequest=new V6(this.core,this.logger),this.engine=new B6(this)}static async init(t){const r=new lp(t);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.getWindowMetadata=void 0;const Kf=ou;function W6(){let n,t;try{n=Kf.getDocumentOrThrow(),t=Kf.getLocationOrThrow()}catch{return null}function r(){const C=n.getElementsByTagName("link"),U=[];for(let P=0;P<C.length;P++){const O=C[P],q=O.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const L=O.getAttribute("href");if(L)if(L.toLowerCase().indexOf("https:")===-1&&L.toLowerCase().indexOf("http:")===-1&&L.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(L.indexOf("/")===0)re+=L;else{const oe=t.pathname.split("/");oe.pop();const ie=oe.join("/");re+=ie+"/"+L}U.push(re)}else if(L.indexOf("//")===0){const re=t.protocol+L;U.push(re)}else U.push(L)}}return U}function s(...C){const U=n.getElementsByTagName("meta");for(let P=0;P<U.length;P++){const O=U[P],q=["itemprop","property","name"].map(L=>O.getAttribute(L)).filter(L=>L?C.includes(L):!1);if(q.length&&q){const L=O.getAttribute("content");if(L)return L}}return""}function a(){let C=s("name","og:site_name","og:title","twitter:title");return C||(C=n.title),C}function l(){return s("description","og:description","twitter:description","keywords")}const p=a(),f=l(),g=t.origin,w=r();return{description:f,url:g,icons:w,name:p}}Iu.getWindowMetadata=W6;function $c(n=[],t=[]){return[...new Set([...n,...t])]}function xu(n){return n.includes(":")}function So(n){return xu(n)?n.split(":")[0]:n}const Y6={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function kf(n,t){const{message:r,code:s}=Y6[n];return{message:t?`${r} ${t}`:r,code:s}}function Vf(n,t){return Array.isArray(n)?typeof t<"u"&&n.length?n.every(t):!0:!1}function J6(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}var Uo={},X6={get exports(){return Uo},set exports(n){Uo=n}};(function(n,t){var r=typeof self<"u"?self:Ai,s=function(){function l(){this.fetch=!1,this.DOMException=r.DOMException}return l.prototype=r,new l}();(function(l){(function(p){var f={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function g(_){return _&&DataView.prototype.isPrototypeOf(_)}if(f.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=ArrayBuffer.isView||function(_){return _&&w.indexOf(Object.prototype.toString.call(_))>-1};function C(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function U(_){return typeof _!="string"&&(_=String(_)),_}function P(_){var S={next:function(){var Z=_.shift();return{done:Z===void 0,value:Z}}};return f.iterable&&(S[Symbol.iterator]=function(){return S}),S}function O(_){this.map={},_ instanceof O?_.forEach(function(S,Z){this.append(Z,S)},this):Array.isArray(_)?_.forEach(function(S){this.append(S[0],S[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(S){this.append(S,_[S])},this)}O.prototype.append=function(_,S){_=C(_),S=U(S);var Z=this.map[_];this.map[_]=Z?Z+", "+S:S},O.prototype.delete=function(_){delete this.map[C(_)]},O.prototype.get=function(_){return _=C(_),this.has(_)?this.map[_]:null},O.prototype.has=function(_){return this.map.hasOwnProperty(C(_))},O.prototype.set=function(_,S){this.map[C(_)]=U(S)},O.prototype.forEach=function(_,S){for(var Z in this.map)this.map.hasOwnProperty(Z)&&_.call(S,this.map[Z],Z,this)},O.prototype.keys=function(){var _=[];return this.forEach(function(S,Z){_.push(Z)}),P(_)},O.prototype.values=function(){var _=[];return this.forEach(function(S){_.push(S)}),P(_)},O.prototype.entries=function(){var _=[];return this.forEach(function(S,Z){_.push([Z,S])}),P(_)},f.iterable&&(O.prototype[Symbol.iterator]=O.prototype.entries);function q(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function L(_){return new Promise(function(S,Z){_.onload=function(){S(_.result)},_.onerror=function(){Z(_.error)}})}function re(_){var S=new FileReader,Z=L(S);return S.readAsArrayBuffer(_),Z}function oe(_){var S=new FileReader,Z=L(S);return S.readAsText(_),Z}function ie(_){for(var S=new Uint8Array(_),Z=new Array(S.length),W=0;W<S.length;W++)Z[W]=String.fromCharCode(S[W]);return Z.join("")}function M(_){if(_.slice)return _.slice(0);var S=new Uint8Array(_.byteLength);return S.set(new Uint8Array(_)),S.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:f.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:f.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():f.arrayBuffer&&f.blob&&g(_)?(this._bodyArrayBuffer=M(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||x(_))?this._bodyArrayBuffer=M(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var _=q(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?q(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(re)}),this.text=function(){var _=q(this);if(_)return _;if(this._bodyBlob)return oe(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ie(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(_){var S=_.toUpperCase();return D.indexOf(S)>-1?S:_}function m(_,S){S=S||{};var Z=S.body;if(_ instanceof m){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,S.headers||(this.headers=new O(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!Z&&_._bodyInit!=null&&(Z=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new O(S.headers)),this.method=u(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Z)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function X(_){var S=new FormData;return _.trim().split("&").forEach(function(Z){if(Z){var W=Z.split("="),B=W.shift().replace(/\+/g," "),K=W.join("=").replace(/\+/g," ");S.append(decodeURIComponent(B),decodeURIComponent(K))}}),S}function V(_){var S=new O,Z=_.replace(/\r?\n[\t ]+/g," ");return Z.split(/\r?\n/).forEach(function(W){var B=W.split(":"),K=B.shift().trim();if(K){var G=B.join(":").trim();S.append(K,G)}}),S}H.call(m.prototype);function ne(_,S){S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in S?S.statusText:"OK",this.headers=new O(S.headers),this.url=S.url||"",this._initBody(_)}H.call(ne.prototype),ne.prototype.clone=function(){return new ne(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new O(this.headers),url:this.url})},ne.error=function(){var _=new ne(null,{status:0,statusText:""});return _.type="error",_};var ce=[301,302,303,307,308];ne.redirect=function(_,S){if(ce.indexOf(S)===-1)throw new RangeError("Invalid status code");return new ne(null,{status:S,headers:{location:_}})},p.DOMException=l.DOMException;try{new p.DOMException}catch{p.DOMException=function(S,Z){this.message=S,this.name=Z;var W=Error(S);this.stack=W.stack},p.DOMException.prototype=Object.create(Error.prototype),p.DOMException.prototype.constructor=p.DOMException}function de(_,S){return new Promise(function(Z,W){var B=new m(_,S);if(B.signal&&B.signal.aborted)return W(new p.DOMException("Aborted","AbortError"));var K=new XMLHttpRequest;function G(){K.abort()}K.onload=function(){var ee={status:K.status,statusText:K.statusText,headers:V(K.getAllResponseHeaders()||"")};ee.url="responseURL"in K?K.responseURL:ee.headers.get("X-Request-URL");var be="response"in K?K.response:K.responseText;Z(new ne(be,ee))},K.onerror=function(){W(new TypeError("Network request failed"))},K.ontimeout=function(){W(new TypeError("Network request failed"))},K.onabort=function(){W(new p.DOMException("Aborted","AbortError"))},K.open(B.method,B.url,!0),B.credentials==="include"?K.withCredentials=!0:B.credentials==="omit"&&(K.withCredentials=!1),"responseType"in K&&f.blob&&(K.responseType="blob"),B.headers.forEach(function(ee,be){K.setRequestHeader(be,ee)}),B.signal&&(B.signal.addEventListener("abort",G),K.onreadystatechange=function(){K.readyState===4&&B.signal.removeEventListener("abort",G)}),K.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return de.polyfill=!0,l.fetch||(l.fetch=de,l.Headers=O,l.Request=m,l.Response=ne),p.Headers=O,p.Request=m,p.Response=ne,p.fetch=de,Object.defineProperty(p,"__esModule",{value:!0}),p})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var a=s;t=a.fetch,t.default=a.fetch,t.fetch=a.fetch,t.Headers=a.Headers,t.Request=a.Request,t.Response=a.Response,n.exports=t})(X6,Uo);const Gf=W_(Uo),Z6={Accept:"application/json","Content-Type":"application/json"},Q6="POST",Wf={headers:Z6,method:Q6},Yf=10;class en{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new ur.EventEmitter,this.isAvailable=!1,this.registering=!1,!Ol(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t,r){this.isAvailable||await this.register();try{const s=as(t),l=await(await Gf(this.url,Object.assign(Object.assign({},Wf),{body:s}))).json();this.onPayload({data:l})}catch(s){this.onError(t.id,s)}}async register(t=this.url){if(!Ol(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));s()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=as({id:1,jsonrpc:"2.0",method:"test",params:[]});await Gf(t,Object.assign(Object.assign({},Wf),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?du(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),a=s.message||s.toString(),l=$o(t,a);this.events.emit("payload",l)}parseError(t,r=this.url){return od(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Yf&&this.events.setMaxListeners(Yf)}}const Jf="error",e2="wss://relay.walletconnect.com",t2="wc",r2="universal_provider",Xf=`${t2}@2:${r2}:`,i2="https://rpc.walletconnect.com/v1",Ni={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Lr<"u"?Lr:typeof self<"u"?self:{},eu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,t){(function(){var r,s="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",f="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",w=500,x="__lodash_placeholder__",C=1,U=2,P=4,O=1,q=2,L=1,re=2,oe=4,ie=8,M=16,H=32,D=64,u=128,m=256,X=512,V=30,ne="...",ce=800,de=16,_=1,S=2,Z=3,W=1/0,B=9007199254740991,K=17976931348623157e292,G=0/0,ee=4294967295,be=ee-1,se=ee>>>1,we=[["ary",u],["bind",L],["bindKey",re],["curry",ie],["curryRight",M],["flip",X],["partial",H],["partialRight",D],["rearg",m]],le="[object Arguments]",_e="[object Array]",j="[object AsyncFunction]",$="[object Boolean]",T="[object Date]",h="[object DOMException]",I="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",Ie="[object Map]",He="[object Number]",ke="[object Null]",$e="[object Object]",dt="[object Promise]",pt="[object Proxy]",je="[object RegExp]",xe="[object Set]",Re="[object String]",Ue="[object Symbol]",qe="[object Undefined]",Oe="[object WeakMap]",Fe="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",Ae="[object Float64Array]",Ve="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",Qt="[object Uint16Array]",hr="[object Uint32Array]",Gr=/\b__p \+= '';/g,er=/\b(__p \+=) '' \+/g,ri=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gi=/&(?:amp|lt|gt|quot|#39);/g,Ri=/[&<>"']/g,bt=RegExp(gi.source),gt=RegExp(Ri.source),wt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(Dt.source),St=/^\s+/,Ot=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,$t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wo=/[()=,{}\[\]\/\s]/,Yo=/\\(\\)?/g,Jo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ir=/\w*$/,Xo=/^[-+]0x[0-9a-f]+$/i,Zo=/^0b[01]+$/i,Qo=/^\[object .+?Constructor\]$/,ea=/^0o[0-7]+$/i,ta=/^(?:0|[1-9]\d*)$/,ii=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,ra=/['\n\r\u2028\u2029\\]/g,rn="\\ud800-\\udfff",ia="\\u0300-\\u036f",na="\\ufe20-\\ufe2f",nn="\\u20d0-\\u20ff",ps=ia+na+nn,gs="\\u2700-\\u27bf",Mr="a-z\\xdf-\\xf6\\xf8-\\xff",sa="\\xac\\xb1\\xd7\\xf7",oa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",aa="\\u2000-\\u206f",ca=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vs="A-Z\\xc0-\\xd6\\xd8-\\xde",ys="\\ufe0e\\ufe0f",Ui=sa+oa+aa+ca,Cn="['â€™]",Fi="["+rn+"]",Pn="["+Ui+"]",Li="["+ps+"]",_s="\\d+",ua="["+gs+"]",ms="["+Mr+"]",bs="[^"+rn+Ui+_s+gs+Mr+vs+"]",sn="\\ud83c[\\udffb-\\udfff]",ha="(?:"+Li+"|"+sn+")",ws="[^"+rn+"]",on="(?:\\ud83c[\\udde6-\\uddff]){2}",vi="[\\ud800-\\udbff][\\udc00-\\udfff]",_r="["+vs+"]",Es="\\u200d",Ds="(?:"+ms+"|"+bs+")",Wr="(?:"+_r+"|"+bs+")",Ss="(?:"+Cn+"(?:d|ll|m|re|s|t|ve))?",Is="(?:"+Cn+"(?:D|LL|M|RE|S|T|VE))?",xs=ha+"?",As="["+ys+"]?",la="(?:"+Es+"(?:"+[ws,on,vi].join("|")+")"+As+xs+")*",ni="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Os="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cs=As+xs+la,an="(?:"+[ua,on,vi].join("|")+")"+Cs,fa="(?:"+[ws+Li+"?",Li,on,vi,Fi].join("|")+")",Tn=RegExp(Cn,"g"),da=RegExp(Li,"g"),cn=RegExp(sn+"(?="+sn+")|"+fa+Cs,"g"),Ps=RegExp([_r+"?"+ms+"+"+Ss+"(?="+[Pn,_r,"$"].join("|")+")",Wr+"+"+Is+"(?="+[Pn,_r+Ds,"$"].join("|")+")",_r+"?"+Ds+"+"+Ss,_r+"+"+Is,Os,ni,_s,an].join("|"),"g"),Ts=RegExp("["+Es+rn+ps+ys+"]"),$i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ns=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pa=-1,ot={};ot[Be]=ot[Ae]=ot[Ve]=ot[We]=ot[et]=ot[tt]=ot[Je]=ot[Qt]=ot[hr]=!0,ot[le]=ot[_e]=ot[Se]=ot[$]=ot[Ce]=ot[T]=ot[I]=ot[ae]=ot[Ie]=ot[He]=ot[$e]=ot[je]=ot[xe]=ot[Re]=ot[Oe]=!1;var st={};st[le]=st[_e]=st[Se]=st[Ce]=st[$]=st[T]=st[Be]=st[Ae]=st[Ve]=st[We]=st[et]=st[Ie]=st[He]=st[$e]=st[je]=st[xe]=st[Re]=st[Ue]=st[tt]=st[Je]=st[Qt]=st[hr]=!0,st[I]=st[ae]=st[Oe]=!1;var b={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Q={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Te=parseInt,lt=typeof ns=="object"&&ns&&ns.Object===Object&&ns,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=lt||Mt||Function("return this")(),ct=t&&!t.nodeType&&t,Ct=ct&&!0&&n&&!n.nodeType&&n,lr=Ct&&Ct.exports===ct,jt=lr&&lt.process,ft=function(){try{var R=Ct&&Ct.require&&Ct.require("util").types;return R||jt&&jt.binding&&jt.binding("util")}catch{}}(),tr=ft&&ft.isArrayBuffer,jr=ft&&ft.isDate,xr=ft&&ft.isMap,Yr=ft&&ft.isRegExp,Nn=ft&&ft.isSet,Mi=ft&&ft.isTypedArray;function Bt(R,k,z){switch(z.length){case 0:return R.call(k);case 1:return R.call(k,z[0]);case 2:return R.call(k,z[0],z[1]);case 3:return R.call(k,z[0],z[1],z[2])}return R.apply(k,z)}function pp(R,k,z,ge){for(var Pe=-1,rt=R==null?0:R.length;++Pe<rt;){var zt=R[Pe];k(ge,zt,z(zt),R)}return ge}function Ar(R,k){for(var z=-1,ge=R==null?0:R.length;++z<ge&&k(R[z],z,R)!==!1;);return R}function gp(R,k){for(var z=R==null?0:R.length;z--&&k(R[z],z,R)!==!1;);return R}function Cu(R,k){for(var z=-1,ge=R==null?0:R.length;++z<ge;)if(!k(R[z],z,R))return!1;return!0}function yi(R,k){for(var z=-1,ge=R==null?0:R.length,Pe=0,rt=[];++z<ge;){var zt=R[z];k(zt,z,R)&&(rt[Pe++]=zt)}return rt}function Rs(R,k){var z=R==null?0:R.length;return!!z&&un(R,k,0)>-1}function ga(R,k,z){for(var ge=-1,Pe=R==null?0:R.length;++ge<Pe;)if(z(k,R[ge]))return!0;return!1}function yt(R,k){for(var z=-1,ge=R==null?0:R.length,Pe=Array(ge);++z<ge;)Pe[z]=k(R[z],z,R);return Pe}function _i(R,k){for(var z=-1,ge=k.length,Pe=R.length;++z<ge;)R[Pe+z]=k[z];return R}function va(R,k,z,ge){var Pe=-1,rt=R==null?0:R.length;for(ge&&rt&&(z=R[++Pe]);++Pe<rt;)z=k(z,R[Pe],Pe,R);return z}function vp(R,k,z,ge){var Pe=R==null?0:R.length;for(ge&&Pe&&(z=R[--Pe]);Pe--;)z=k(z,R[Pe],Pe,R);return z}function ya(R,k){for(var z=-1,ge=R==null?0:R.length;++z<ge;)if(k(R[z],z,R))return!0;return!1}var yp=_a("length");function _p(R){return R.split("")}function mp(R){return R.match($t)||[]}function Pu(R,k,z){var ge;return z(R,function(Pe,rt,zt){if(k(Pe,rt,zt))return ge=rt,!1}),ge}function Us(R,k,z,ge){for(var Pe=R.length,rt=z+(ge?1:-1);ge?rt--:++rt<Pe;)if(k(R[rt],rt,R))return rt;return-1}function un(R,k,z){return k===k?Tp(R,k,z):Us(R,Tu,z)}function bp(R,k,z,ge){for(var Pe=z-1,rt=R.length;++Pe<rt;)if(ge(R[Pe],k))return Pe;return-1}function Tu(R){return R!==R}function Nu(R,k){var z=R==null?0:R.length;return z?ba(R,k)/z:G}function _a(R){return function(k){return k==null?r:k[R]}}function ma(R){return function(k){return R==null?r:R[k]}}function Ru(R,k,z,ge,Pe){return Pe(R,function(rt,zt,ut){z=ge?(ge=!1,rt):k(z,rt,zt,ut)}),z}function wp(R,k){var z=R.length;for(R.sort(k);z--;)R[z]=R[z].value;return R}function ba(R,k){for(var z,ge=-1,Pe=R.length;++ge<Pe;){var rt=k(R[ge]);rt!==r&&(z=z===r?rt:z+rt)}return z}function wa(R,k){for(var z=-1,ge=Array(R);++z<R;)ge[z]=k(z);return ge}function Ep(R,k){return yt(k,function(z){return[z,R[z]]})}function Uu(R){return R&&R.slice(0,Mu(R)+1).replace(St,"")}function mr(R){return function(k){return R(k)}}function Ea(R,k){return yt(k,function(z){return R[z]})}function Rn(R,k){return R.has(k)}function Fu(R,k){for(var z=-1,ge=R.length;++z<ge&&un(k,R[z],0)>-1;);return z}function Lu(R,k){for(var z=R.length;z--&&un(k,R[z],0)>-1;);return z}function Dp(R,k){for(var z=R.length,ge=0;z--;)R[z]===k&&++ge;return ge}var Sp=ma(b),Ip=ma(N);function xp(R){return"\\"+pe[R]}function Ap(R,k){return R==null?r:R[k]}function hn(R){return Ts.test(R)}function Op(R){return $i.test(R)}function Cp(R){for(var k,z=[];!(k=R.next()).done;)z.push(k.value);return z}function Da(R){var k=-1,z=Array(R.size);return R.forEach(function(ge,Pe){z[++k]=[Pe,ge]}),z}function $u(R,k){return function(z){return R(k(z))}}function mi(R,k){for(var z=-1,ge=R.length,Pe=0,rt=[];++z<ge;){var zt=R[z];(zt===k||zt===x)&&(R[z]=x,rt[Pe++]=z)}return rt}function Fs(R){var k=-1,z=Array(R.size);return R.forEach(function(ge){z[++k]=ge}),z}function Pp(R){var k=-1,z=Array(R.size);return R.forEach(function(ge){z[++k]=[ge,ge]}),z}function Tp(R,k,z){for(var ge=z-1,Pe=R.length;++ge<Pe;)if(R[ge]===k)return ge;return-1}function Np(R,k,z){for(var ge=z+1;ge--;)if(R[ge]===k)return ge;return ge}function ln(R){return hn(R)?Up(R):yp(R)}function qr(R){return hn(R)?Fp(R):_p(R)}function Mu(R){for(var k=R.length;k--&&Ot.test(R.charAt(k)););return k}var Rp=ma(Q);function Up(R){for(var k=cn.lastIndex=0;cn.test(R);)++k;return k}function Fp(R){return R.match(cn)||[]}function Lp(R){return R.match(Ps)||[]}var $p=function R(k){k=k==null?Xe:fn.defaults(Xe.Object(),k,fn.pick(Xe,Ns));var z=k.Array,ge=k.Date,Pe=k.Error,rt=k.Function,zt=k.Math,ut=k.Object,Sa=k.RegExp,Mp=k.String,Or=k.TypeError,Ls=z.prototype,jp=rt.prototype,dn=ut.prototype,$s=k["__core-js_shared__"],Ms=jp.toString,nt=dn.hasOwnProperty,qp=0,ju=function(){var e=/[^.]+$/.exec($s&&$s.keys&&$s.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),js=dn.toString,zp=Ms.call(ut),Hp=Xe._,Bp=Sa("^"+Ms.call(nt).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qs=lr?k.Buffer:r,bi=k.Symbol,zs=k.Uint8Array,qu=qs?qs.allocUnsafe:r,Hs=$u(ut.getPrototypeOf,ut),zu=ut.create,Hu=dn.propertyIsEnumerable,Bs=Ls.splice,Bu=bi?bi.isConcatSpreadable:r,Un=bi?bi.iterator:r,ji=bi?bi.toStringTag:r,Ks=function(){try{var e=Ki(ut,"defineProperty");return e({},"",{}),e}catch{}}(),Kp=k.clearTimeout!==Xe.clearTimeout&&k.clearTimeout,kp=ge&&ge.now!==Xe.Date.now&&ge.now,Vp=k.setTimeout!==Xe.setTimeout&&k.setTimeout,ks=zt.ceil,Vs=zt.floor,Ia=ut.getOwnPropertySymbols,Gp=qs?qs.isBuffer:r,Ku=k.isFinite,Wp=Ls.join,Yp=$u(ut.keys,ut),Ht=zt.max,Jt=zt.min,Jp=ge.now,Xp=k.parseInt,ku=zt.random,Zp=Ls.reverse,xa=Ki(k,"DataView"),Fn=Ki(k,"Map"),Aa=Ki(k,"Promise"),pn=Ki(k,"Set"),Ln=Ki(k,"WeakMap"),$n=Ki(ut,"create"),Gs=Ln&&new Ln,gn={},Qp=ki(xa),eg=ki(Fn),tg=ki(Aa),rg=ki(pn),ig=ki(Ln),Ws=bi?bi.prototype:r,Mn=Ws?Ws.valueOf:r,Vu=Ws?Ws.toString:r;function v(e){if(xt(e)&&!Ne(e)&&!(e instanceof Ye)){if(e instanceof Cr)return e;if(nt.call(e,"__wrapped__"))return Gh(e)}return new Cr(e)}var vn=function(){function e(){}return function(i){if(!mt(i))return{};if(zu)return zu(i);e.prototype=i;var o=new e;return e.prototype=r,o}}();function Ys(){}function Cr(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}v.templateSettings={escape:wt,evaluate:Et,interpolate:_t,variable:"",imports:{_:v}},v.prototype=Ys.prototype,v.prototype.constructor=v,Cr.prototype=vn(Ys.prototype),Cr.prototype.constructor=Cr;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ee,this.__views__=[]}function ng(){var e=new Ye(this.__wrapped__);return e.__actions__=fr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=fr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=fr(this.__views__),e}function sg(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function og(){var e=this.__wrapped__.value(),i=this.__dir__,o=Ne(e),c=i<0,d=o?e.length:0,y=_0(0,d,this.__views__),E=y.start,A=y.end,F=A-E,Y=c?A:E-1,J=this.__iteratees__,te=J.length,ue=0,ve=Jt(F,this.__takeCount__);if(!o||!c&&d==F&&ve==F)return vh(e,this.__actions__);var Ee=[];e:for(;F--&&ue<ve;){Y+=i;for(var ze=-1,De=e[Y];++ze<te;){var Ge=J[ze],Ze=Ge.iteratee,Er=Ge.type,nr=Ze(De);if(Er==S)De=nr;else if(!nr){if(Er==_)continue e;break e}}Ee[ue++]=De}return Ee}Ye.prototype=vn(Ys.prototype),Ye.prototype.constructor=Ye;function qi(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var c=e[i];this.set(c[0],c[1])}}function ag(){this.__data__=$n?$n(null):{},this.size=0}function cg(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function ug(e){var i=this.__data__;if($n){var o=i[e];return o===g?r:o}return nt.call(i,e)?i[e]:r}function hg(e){var i=this.__data__;return $n?i[e]!==r:nt.call(i,e)}function lg(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=$n&&i===r?g:i,this}qi.prototype.clear=ag,qi.prototype.delete=cg,qi.prototype.get=ug,qi.prototype.has=hg,qi.prototype.set=lg;function si(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var c=e[i];this.set(c[0],c[1])}}function fg(){this.__data__=[],this.size=0}function dg(e){var i=this.__data__,o=Js(i,e);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():Bs.call(i,o,1),--this.size,!0}function pg(e){var i=this.__data__,o=Js(i,e);return o<0?r:i[o][1]}function gg(e){return Js(this.__data__,e)>-1}function vg(e,i){var o=this.__data__,c=Js(o,e);return c<0?(++this.size,o.push([e,i])):o[c][1]=i,this}si.prototype.clear=fg,si.prototype.delete=dg,si.prototype.get=pg,si.prototype.has=gg,si.prototype.set=vg;function oi(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var c=e[i];this.set(c[0],c[1])}}function yg(){this.size=0,this.__data__={hash:new qi,map:new(Fn||si),string:new qi}}function _g(e){var i=co(this,e).delete(e);return this.size-=i?1:0,i}function mg(e){return co(this,e).get(e)}function bg(e){return co(this,e).has(e)}function wg(e,i){var o=co(this,e),c=o.size;return o.set(e,i),this.size+=o.size==c?0:1,this}oi.prototype.clear=yg,oi.prototype.delete=_g,oi.prototype.get=mg,oi.prototype.has=bg,oi.prototype.set=wg;function zi(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new oi;++i<o;)this.add(e[i])}function Eg(e){return this.__data__.set(e,g),this}function Dg(e){return this.__data__.has(e)}zi.prototype.add=zi.prototype.push=Eg,zi.prototype.has=Dg;function zr(e){var i=this.__data__=new si(e);this.size=i.size}function Sg(){this.__data__=new si,this.size=0}function Ig(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function xg(e){return this.__data__.get(e)}function Ag(e){return this.__data__.has(e)}function Og(e,i){var o=this.__data__;if(o instanceof si){var c=o.__data__;if(!Fn||c.length<a-1)return c.push([e,i]),this.size=++o.size,this;o=this.__data__=new oi(c)}return o.set(e,i),this.size=o.size,this}zr.prototype.clear=Sg,zr.prototype.delete=Ig,zr.prototype.get=xg,zr.prototype.has=Ag,zr.prototype.set=Og;function Gu(e,i){var o=Ne(e),c=!o&&Vi(e),d=!o&&!c&&Ii(e),y=!o&&!c&&!d&&bn(e),E=o||c||d||y,A=E?wa(e.length,Mp):[],F=A.length;for(var Y in e)(i||nt.call(e,Y))&&!(E&&(Y=="length"||d&&(Y=="offset"||Y=="parent")||y&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||hi(Y,F)))&&A.push(Y);return A}function Wu(e){var i=e.length;return i?e[Ma(0,i-1)]:r}function Cg(e,i){return uo(fr(e),Hi(i,0,e.length))}function Pg(e){return uo(fr(e))}function Oa(e,i,o){(o!==r&&!Hr(e[i],o)||o===r&&!(i in e))&&ai(e,i,o)}function jn(e,i,o){var c=e[i];(!(nt.call(e,i)&&Hr(c,o))||o===r&&!(i in e))&&ai(e,i,o)}function Js(e,i){for(var o=e.length;o--;)if(Hr(e[o][0],i))return o;return-1}function Tg(e,i,o,c){return wi(e,function(d,y,E){i(c,d,o(d),E)}),c}function Yu(e,i){return e&&Xr(i,Kt(i),e)}function Ng(e,i){return e&&Xr(i,pr(i),e)}function ai(e,i,o){i=="__proto__"&&Ks?Ks(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function Ca(e,i){for(var o=-1,c=i.length,d=z(c),y=e==null;++o<c;)d[o]=y?r:uc(e,i[o]);return d}function Hi(e,i,o){return e===e&&(o!==r&&(e=e<=o?e:o),i!==r&&(e=e>=i?e:i)),e}function Pr(e,i,o,c,d,y){var E,A=i&C,F=i&U,Y=i&P;if(o&&(E=d?o(e,c,d,y):o(e)),E!==r)return E;if(!mt(e))return e;var J=Ne(e);if(J){if(E=b0(e),!A)return fr(e,E)}else{var te=Xt(e),ue=te==ae||te==fe;if(Ii(e))return mh(e,A);if(te==$e||te==le||ue&&!d){if(E=F||ue?{}:Mh(e),!A)return F?u0(e,Ng(E,e)):c0(e,Yu(E,e))}else{if(!st[te])return d?e:{};E=w0(e,te,A)}}y||(y=new zr);var ve=y.get(e);if(ve)return ve;y.set(e,E),dl(e)?e.forEach(function(De){E.add(Pr(De,i,o,De,e,y))}):ll(e)&&e.forEach(function(De,Ge){E.set(Ge,Pr(De,i,o,Ge,e,y))});var Ee=Y?F?Ya:Wa:F?pr:Kt,ze=J?r:Ee(e);return Ar(ze||e,function(De,Ge){ze&&(Ge=De,De=e[Ge]),jn(E,Ge,Pr(De,i,o,Ge,e,y))}),E}function Rg(e){var i=Kt(e);return function(o){return Ju(o,e,i)}}function Ju(e,i,o){var c=o.length;if(e==null)return!c;for(e=ut(e);c--;){var d=o[c],y=i[d],E=e[d];if(E===r&&!(d in e)||!y(E))return!1}return!0}function Xu(e,i,o){if(typeof e!="function")throw new Or(p);return Vn(function(){e.apply(r,o)},i)}function qn(e,i,o,c){var d=-1,y=Rs,E=!0,A=e.length,F=[],Y=i.length;if(!A)return F;o&&(i=yt(i,mr(o))),c?(y=ga,E=!1):i.length>=a&&(y=Rn,E=!1,i=new zi(i));e:for(;++d<A;){var J=e[d],te=o==null?J:o(J);if(J=c||J!==0?J:0,E&&te===te){for(var ue=Y;ue--;)if(i[ue]===te)continue e;F.push(J)}else y(i,te,c)||F.push(J)}return F}var wi=Sh(Jr),Zu=Sh(Ta,!0);function Ug(e,i){var o=!0;return wi(e,function(c,d,y){return o=!!i(c,d,y),o}),o}function Xs(e,i,o){for(var c=-1,d=e.length;++c<d;){var y=e[c],E=i(y);if(E!=null&&(A===r?E===E&&!wr(E):o(E,A)))var A=E,F=y}return F}function Fg(e,i,o,c){var d=e.length;for(o=Me(o),o<0&&(o=-o>d?0:d+o),c=c===r||c>d?d:Me(c),c<0&&(c+=d),c=o>c?0:gl(c);o<c;)e[o++]=i;return e}function Qu(e,i){var o=[];return wi(e,function(c,d,y){i(c,d,y)&&o.push(c)}),o}function Gt(e,i,o,c,d){var y=-1,E=e.length;for(o||(o=D0),d||(d=[]);++y<E;){var A=e[y];i>0&&o(A)?i>1?Gt(A,i-1,o,c,d):_i(d,A):c||(d[d.length]=A)}return d}var Pa=Ih(),eh=Ih(!0);function Jr(e,i){return e&&Pa(e,i,Kt)}function Ta(e,i){return e&&eh(e,i,Kt)}function Zs(e,i){return yi(i,function(o){return li(e[o])})}function Bi(e,i){i=Di(i,e);for(var o=0,c=i.length;e!=null&&o<c;)e=e[Zr(i[o++])];return o&&o==c?e:r}function th(e,i,o){var c=i(e);return Ne(e)?c:_i(c,o(e))}function rr(e){return e==null?e===r?qe:ke:ji&&ji in ut(e)?y0(e):P0(e)}function Na(e,i){return e>i}function Lg(e,i){return e!=null&&nt.call(e,i)}function $g(e,i){return e!=null&&i in ut(e)}function Mg(e,i,o){return e>=Jt(i,o)&&e<Ht(i,o)}function Ra(e,i,o){for(var c=o?ga:Rs,d=e[0].length,y=e.length,E=y,A=z(y),F=1/0,Y=[];E--;){var J=e[E];E&&i&&(J=yt(J,mr(i))),F=Jt(J.length,F),A[E]=!o&&(i||d>=120&&J.length>=120)?new zi(E&&J):r}J=e[0];var te=-1,ue=A[0];e:for(;++te<d&&Y.length<F;){var ve=J[te],Ee=i?i(ve):ve;if(ve=o||ve!==0?ve:0,!(ue?Rn(ue,Ee):c(Y,Ee,o))){for(E=y;--E;){var ze=A[E];if(!(ze?Rn(ze,Ee):c(e[E],Ee,o)))continue e}ue&&ue.push(Ee),Y.push(ve)}}return Y}function jg(e,i,o,c){return Jr(e,function(d,y,E){i(c,o(d),y,E)}),c}function zn(e,i,o){i=Di(i,e),e=Hh(e,i);var c=e==null?e:e[Zr(Nr(i))];return c==null?r:Bt(c,e,o)}function rh(e){return xt(e)&&rr(e)==le}function qg(e){return xt(e)&&rr(e)==Se}function zg(e){return xt(e)&&rr(e)==T}function Hn(e,i,o,c,d){return e===i?!0:e==null||i==null||!xt(e)&&!xt(i)?e!==e&&i!==i:Hg(e,i,o,c,Hn,d)}function Hg(e,i,o,c,d,y){var E=Ne(e),A=Ne(i),F=E?_e:Xt(e),Y=A?_e:Xt(i);F=F==le?$e:F,Y=Y==le?$e:Y;var J=F==$e,te=Y==$e,ue=F==Y;if(ue&&Ii(e)){if(!Ii(i))return!1;E=!0,J=!1}if(ue&&!J)return y||(y=new zr),E||bn(e)?Fh(e,i,o,c,d,y):g0(e,i,F,o,c,d,y);if(!(o&O)){var ve=J&&nt.call(e,"__wrapped__"),Ee=te&&nt.call(i,"__wrapped__");if(ve||Ee){var ze=ve?e.value():e,De=Ee?i.value():i;return y||(y=new zr),d(ze,De,o,c,y)}}return ue?(y||(y=new zr),v0(e,i,o,c,d,y)):!1}function Bg(e){return xt(e)&&Xt(e)==Ie}function Ua(e,i,o,c){var d=o.length,y=d,E=!c;if(e==null)return!y;for(e=ut(e);d--;){var A=o[d];if(E&&A[2]?A[1]!==e[A[0]]:!(A[0]in e))return!1}for(;++d<y;){A=o[d];var F=A[0],Y=e[F],J=A[1];if(E&&A[2]){if(Y===r&&!(F in e))return!1}else{var te=new zr;if(c)var ue=c(Y,J,F,e,i,te);if(!(ue===r?Hn(J,Y,O|q,c,te):ue))return!1}}return!0}function ih(e){if(!mt(e)||I0(e))return!1;var i=li(e)?Bp:Qo;return i.test(ki(e))}function Kg(e){return xt(e)&&rr(e)==je}function kg(e){return xt(e)&&Xt(e)==xe}function Vg(e){return xt(e)&&vo(e.length)&&!!ot[rr(e)]}function nh(e){return typeof e=="function"?e:e==null?gr:typeof e=="object"?Ne(e)?ah(e[0],e[1]):oh(e):xl(e)}function Fa(e){if(!kn(e))return Yp(e);var i=[];for(var o in ut(e))nt.call(e,o)&&o!="constructor"&&i.push(o);return i}function Gg(e){if(!mt(e))return C0(e);var i=kn(e),o=[];for(var c in e)c=="constructor"&&(i||!nt.call(e,c))||o.push(c);return o}function La(e,i){return e<i}function sh(e,i){var o=-1,c=dr(e)?z(e.length):[];return wi(e,function(d,y,E){c[++o]=i(d,y,E)}),c}function oh(e){var i=Xa(e);return i.length==1&&i[0][2]?qh(i[0][0],i[0][1]):function(o){return o===e||Ua(o,e,i)}}function ah(e,i){return Qa(e)&&jh(i)?qh(Zr(e),i):function(o){var c=uc(o,e);return c===r&&c===i?hc(o,e):Hn(i,c,O|q)}}function Qs(e,i,o,c,d){e!==i&&Pa(i,function(y,E){if(d||(d=new zr),mt(y))Wg(e,i,E,o,Qs,c,d);else{var A=c?c(tc(e,E),y,E+"",e,i,d):r;A===r&&(A=y),Oa(e,E,A)}},pr)}function Wg(e,i,o,c,d,y,E){var A=tc(e,o),F=tc(i,o),Y=E.get(F);if(Y){Oa(e,o,Y);return}var J=y?y(A,F,o+"",e,i,E):r,te=J===r;if(te){var ue=Ne(F),ve=!ue&&Ii(F),Ee=!ue&&!ve&&bn(F);J=F,ue||ve||Ee?Ne(A)?J=A:Pt(A)?J=fr(A):ve?(te=!1,J=mh(F,!0)):Ee?(te=!1,J=bh(F,!0)):J=[]:Gn(F)||Vi(F)?(J=A,Vi(A)?J=vl(A):(!mt(A)||li(A))&&(J=Mh(F))):te=!1}te&&(E.set(F,J),d(J,F,c,y,E),E.delete(F)),Oa(e,o,J)}function ch(e,i){var o=e.length;if(o)return i+=i<0?o:0,hi(i,o)?e[i]:r}function uh(e,i,o){i.length?i=yt(i,function(y){return Ne(y)?function(E){return Bi(E,y.length===1?y[0]:y)}:y}):i=[gr];var c=-1;i=yt(i,mr(me()));var d=sh(e,function(y,E,A){var F=yt(i,function(Y){return Y(y)});return{criteria:F,index:++c,value:y}});return wp(d,function(y,E){return a0(y,E,o)})}function Yg(e,i){return hh(e,i,function(o,c){return hc(e,c)})}function hh(e,i,o){for(var c=-1,d=i.length,y={};++c<d;){var E=i[c],A=Bi(e,E);o(A,E)&&Bn(y,Di(E,e),A)}return y}function Jg(e){return function(i){return Bi(i,e)}}function $a(e,i,o,c){var d=c?bp:un,y=-1,E=i.length,A=e;for(e===i&&(i=fr(i)),o&&(A=yt(e,mr(o)));++y<E;)for(var F=0,Y=i[y],J=o?o(Y):Y;(F=d(A,J,F,c))>-1;)A!==e&&Bs.call(A,F,1),Bs.call(e,F,1);return e}function lh(e,i){for(var o=e?i.length:0,c=o-1;o--;){var d=i[o];if(o==c||d!==y){var y=d;hi(d)?Bs.call(e,d,1):za(e,d)}}return e}function Ma(e,i){return e+Vs(ku()*(i-e+1))}function Xg(e,i,o,c){for(var d=-1,y=Ht(ks((i-e)/(o||1)),0),E=z(y);y--;)E[c?y:++d]=e,e+=o;return E}function ja(e,i){var o="";if(!e||i<1||i>B)return o;do i%2&&(o+=e),i=Vs(i/2),i&&(e+=e);while(i);return o}function Ke(e,i){return rc(zh(e,i,gr),e+"")}function Zg(e){return Wu(wn(e))}function Qg(e,i){var o=wn(e);return uo(o,Hi(i,0,o.length))}function Bn(e,i,o,c){if(!mt(e))return e;i=Di(i,e);for(var d=-1,y=i.length,E=y-1,A=e;A!=null&&++d<y;){var F=Zr(i[d]),Y=o;if(F==="__proto__"||F==="constructor"||F==="prototype")return e;if(d!=E){var J=A[F];Y=c?c(J,F,A):r,Y===r&&(Y=mt(J)?J:hi(i[d+1])?[]:{})}jn(A,F,Y),A=A[F]}return e}var fh=Gs?function(e,i){return Gs.set(e,i),e}:gr,e0=Ks?function(e,i){return Ks(e,"toString",{configurable:!0,enumerable:!1,value:fc(i),writable:!0})}:gr;function t0(e){return uo(wn(e))}function Tr(e,i,o){var c=-1,d=e.length;i<0&&(i=-i>d?0:d+i),o=o>d?d:o,o<0&&(o+=d),d=i>o?0:o-i>>>0,i>>>=0;for(var y=z(d);++c<d;)y[c]=e[c+i];return y}function r0(e,i){var o;return wi(e,function(c,d,y){return o=i(c,d,y),!o}),!!o}function eo(e,i,o){var c=0,d=e==null?c:e.length;if(typeof i=="number"&&i===i&&d<=se){for(;c<d;){var y=c+d>>>1,E=e[y];E!==null&&!wr(E)&&(o?E<=i:E<i)?c=y+1:d=y}return d}return qa(e,i,gr,o)}function qa(e,i,o,c){var d=0,y=e==null?0:e.length;if(y===0)return 0;i=o(i);for(var E=i!==i,A=i===null,F=wr(i),Y=i===r;d<y;){var J=Vs((d+y)/2),te=o(e[J]),ue=te!==r,ve=te===null,Ee=te===te,ze=wr(te);if(E)var De=c||Ee;else Y?De=Ee&&(c||ue):A?De=Ee&&ue&&(c||!ve):F?De=Ee&&ue&&!ve&&(c||!ze):ve||ze?De=!1:De=c?te<=i:te<i;De?d=J+1:y=J}return Jt(y,be)}function dh(e,i){for(var o=-1,c=e.length,d=0,y=[];++o<c;){var E=e[o],A=i?i(E):E;if(!o||!Hr(A,F)){var F=A;y[d++]=E===0?0:E}}return y}function ph(e){return typeof e=="number"?e:wr(e)?G:+e}function br(e){if(typeof e=="string")return e;if(Ne(e))return yt(e,br)+"";if(wr(e))return Vu?Vu.call(e):"";var i=e+"";return i=="0"&&1/e==-W?"-0":i}function Ei(e,i,o){var c=-1,d=Rs,y=e.length,E=!0,A=[],F=A;if(o)E=!1,d=ga;else if(y>=a){var Y=i?null:d0(e);if(Y)return Fs(Y);E=!1,d=Rn,F=new zi}else F=i?[]:A;e:for(;++c<y;){var J=e[c],te=i?i(J):J;if(J=o||J!==0?J:0,E&&te===te){for(var ue=F.length;ue--;)if(F[ue]===te)continue e;i&&F.push(te),A.push(J)}else d(F,te,o)||(F!==A&&F.push(te),A.push(J))}return A}function za(e,i){return i=Di(i,e),e=Hh(e,i),e==null||delete e[Zr(Nr(i))]}function gh(e,i,o,c){return Bn(e,i,o(Bi(e,i)),c)}function to(e,i,o,c){for(var d=e.length,y=c?d:-1;(c?y--:++y<d)&&i(e[y],y,e););return o?Tr(e,c?0:y,c?y+1:d):Tr(e,c?y+1:0,c?d:y)}function vh(e,i){var o=e;return o instanceof Ye&&(o=o.value()),va(i,function(c,d){return d.func.apply(d.thisArg,_i([c],d.args))},o)}function Ha(e,i,o){var c=e.length;if(c<2)return c?Ei(e[0]):[];for(var d=-1,y=z(c);++d<c;)for(var E=e[d],A=-1;++A<c;)A!=d&&(y[d]=qn(y[d]||E,e[A],i,o));return Ei(Gt(y,1),i,o)}function yh(e,i,o){for(var c=-1,d=e.length,y=i.length,E={};++c<d;){var A=c<y?i[c]:r;o(E,e[c],A)}return E}function Ba(e){return Pt(e)?e:[]}function Ka(e){return typeof e=="function"?e:gr}function Di(e,i){return Ne(e)?e:Qa(e,i)?[e]:Vh(it(e))}var i0=Ke;function Si(e,i,o){var c=e.length;return o=o===r?c:o,!i&&o>=c?e:Tr(e,i,o)}var _h=Kp||function(e){return Xe.clearTimeout(e)};function mh(e,i){if(i)return e.slice();var o=e.length,c=qu?qu(o):new e.constructor(o);return e.copy(c),c}function ka(e){var i=new e.constructor(e.byteLength);return new zs(i).set(new zs(e)),i}function n0(e,i){var o=i?ka(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function s0(e){var i=new e.constructor(e.source,Ir.exec(e));return i.lastIndex=e.lastIndex,i}function o0(e){return Mn?ut(Mn.call(e)):{}}function bh(e,i){var o=i?ka(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function wh(e,i){if(e!==i){var o=e!==r,c=e===null,d=e===e,y=wr(e),E=i!==r,A=i===null,F=i===i,Y=wr(i);if(!A&&!Y&&!y&&e>i||y&&E&&F&&!A&&!Y||c&&E&&F||!o&&F||!d)return 1;if(!c&&!y&&!Y&&e<i||Y&&o&&d&&!c&&!y||A&&o&&d||!E&&d||!F)return-1}return 0}function a0(e,i,o){for(var c=-1,d=e.criteria,y=i.criteria,E=d.length,A=o.length;++c<E;){var F=wh(d[c],y[c]);if(F){if(c>=A)return F;var Y=o[c];return F*(Y=="desc"?-1:1)}}return e.index-i.index}function Eh(e,i,o,c){for(var d=-1,y=e.length,E=o.length,A=-1,F=i.length,Y=Ht(y-E,0),J=z(F+Y),te=!c;++A<F;)J[A]=i[A];for(;++d<E;)(te||d<y)&&(J[o[d]]=e[d]);for(;Y--;)J[A++]=e[d++];return J}function Dh(e,i,o,c){for(var d=-1,y=e.length,E=-1,A=o.length,F=-1,Y=i.length,J=Ht(y-A,0),te=z(J+Y),ue=!c;++d<J;)te[d]=e[d];for(var ve=d;++F<Y;)te[ve+F]=i[F];for(;++E<A;)(ue||d<y)&&(te[ve+o[E]]=e[d++]);return te}function fr(e,i){var o=-1,c=e.length;for(i||(i=z(c));++o<c;)i[o]=e[o];return i}function Xr(e,i,o,c){var d=!o;o||(o={});for(var y=-1,E=i.length;++y<E;){var A=i[y],F=c?c(o[A],e[A],A,o,e):r;F===r&&(F=e[A]),d?ai(o,A,F):jn(o,A,F)}return o}function c0(e,i){return Xr(e,Za(e),i)}function u0(e,i){return Xr(e,Lh(e),i)}function ro(e,i){return function(o,c){var d=Ne(o)?pp:Tg,y=i?i():{};return d(o,e,me(c,2),y)}}function yn(e){return Ke(function(i,o){var c=-1,d=o.length,y=d>1?o[d-1]:r,E=d>2?o[2]:r;for(y=e.length>3&&typeof y=="function"?(d--,y):r,E&&ir(o[0],o[1],E)&&(y=d<3?r:y,d=1),i=ut(i);++c<d;){var A=o[c];A&&e(i,A,c,y)}return i})}function Sh(e,i){return function(o,c){if(o==null)return o;if(!dr(o))return e(o,c);for(var d=o.length,y=i?d:-1,E=ut(o);(i?y--:++y<d)&&c(E[y],y,E)!==!1;);return o}}function Ih(e){return function(i,o,c){for(var d=-1,y=ut(i),E=c(i),A=E.length;A--;){var F=E[e?A:++d];if(o(y[F],F,y)===!1)break}return i}}function h0(e,i,o){var c=i&L,d=Kn(e);function y(){var E=this&&this!==Xe&&this instanceof y?d:e;return E.apply(c?o:this,arguments)}return y}function xh(e){return function(i){i=it(i);var o=hn(i)?qr(i):r,c=o?o[0]:i.charAt(0),d=o?Si(o,1).join(""):i.slice(1);return c[e]()+d}}function _n(e){return function(i){return va(Sl(Dl(i).replace(Tn,"")),e,"")}}function Kn(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=vn(e.prototype),c=e.apply(o,i);return mt(c)?c:o}}function l0(e,i,o){var c=Kn(e);function d(){for(var y=arguments.length,E=z(y),A=y,F=mn(d);A--;)E[A]=arguments[A];var Y=y<3&&E[0]!==F&&E[y-1]!==F?[]:mi(E,F);if(y-=Y.length,y<o)return Th(e,i,io,d.placeholder,r,E,Y,r,r,o-y);var J=this&&this!==Xe&&this instanceof d?c:e;return Bt(J,this,E)}return d}function Ah(e){return function(i,o,c){var d=ut(i);if(!dr(i)){var y=me(o,3);i=Kt(i),o=function(A){return y(d[A],A,d)}}var E=e(i,o,c);return E>-1?d[y?i[E]:E]:r}}function Oh(e){return ui(function(i){var o=i.length,c=o,d=Cr.prototype.thru;for(e&&i.reverse();c--;){var y=i[c];if(typeof y!="function")throw new Or(p);if(d&&!E&&ao(y)=="wrapper")var E=new Cr([],!0)}for(c=E?c:o;++c<o;){y=i[c];var A=ao(y),F=A=="wrapper"?Ja(y):r;F&&ec(F[0])&&F[1]==(u|ie|H|m)&&!F[4].length&&F[9]==1?E=E[ao(F[0])].apply(E,F[3]):E=y.length==1&&ec(y)?E[A]():E.thru(y)}return function(){var Y=arguments,J=Y[0];if(E&&Y.length==1&&Ne(J))return E.plant(J).value();for(var te=0,ue=o?i[te].apply(this,Y):J;++te<o;)ue=i[te].call(this,ue);return ue}})}function io(e,i,o,c,d,y,E,A,F,Y){var J=i&u,te=i&L,ue=i&re,ve=i&(ie|M),Ee=i&X,ze=ue?r:Kn(e);function De(){for(var Ge=arguments.length,Ze=z(Ge),Er=Ge;Er--;)Ze[Er]=arguments[Er];if(ve)var nr=mn(De),Dr=Dp(Ze,nr);if(c&&(Ze=Eh(Ze,c,d,ve)),y&&(Ze=Dh(Ze,y,E,ve)),Ge-=Dr,ve&&Ge<Y){var Tt=mi(Ze,nr);return Th(e,i,io,De.placeholder,o,Ze,Tt,A,F,Y-Ge)}var Br=te?o:this,di=ue?Br[e]:e;return Ge=Ze.length,A?Ze=T0(Ze,A):Ee&&Ge>1&&Ze.reverse(),J&&F<Ge&&(Ze.length=F),this&&this!==Xe&&this instanceof De&&(di=ze||Kn(di)),di.apply(Br,Ze)}return De}function Ch(e,i){return function(o,c){return jg(o,e,i(c),{})}}function no(e,i){return function(o,c){var d;if(o===r&&c===r)return i;if(o!==r&&(d=o),c!==r){if(d===r)return c;typeof o=="string"||typeof c=="string"?(o=br(o),c=br(c)):(o=ph(o),c=ph(c)),d=e(o,c)}return d}}function Va(e){return ui(function(i){return i=yt(i,mr(me())),Ke(function(o){var c=this;return e(i,function(d){return Bt(d,c,o)})})})}function so(e,i){i=i===r?" ":br(i);var o=i.length;if(o<2)return o?ja(i,e):i;var c=ja(i,ks(e/ln(i)));return hn(i)?Si(qr(c),0,e).join(""):c.slice(0,e)}function f0(e,i,o,c){var d=i&L,y=Kn(e);function E(){for(var A=-1,F=arguments.length,Y=-1,J=c.length,te=z(J+F),ue=this&&this!==Xe&&this instanceof E?y:e;++Y<J;)te[Y]=c[Y];for(;F--;)te[Y++]=arguments[++A];return Bt(ue,d?o:this,te)}return E}function Ph(e){return function(i,o,c){return c&&typeof c!="number"&&ir(i,o,c)&&(o=c=r),i=fi(i),o===r?(o=i,i=0):o=fi(o),c=c===r?i<o?1:-1:fi(c),Xg(i,o,c,e)}}function oo(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Rr(i),o=Rr(o)),e(i,o)}}function Th(e,i,o,c,d,y,E,A,F,Y){var J=i&ie,te=J?E:r,ue=J?r:E,ve=J?y:r,Ee=J?r:y;i|=J?H:D,i&=~(J?D:H),i&oe||(i&=~(L|re));var ze=[e,i,d,ve,te,Ee,ue,A,F,Y],De=o.apply(r,ze);return ec(e)&&Bh(De,ze),De.placeholder=c,Kh(De,e,i)}function Ga(e){var i=zt[e];return function(o,c){if(o=Rr(o),c=c==null?0:Jt(Me(c),292),c&&Ku(o)){var d=(it(o)+"e").split("e"),y=i(d[0]+"e"+(+d[1]+c));return d=(it(y)+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return i(o)}}var d0=pn&&1/Fs(new pn([,-0]))[1]==W?function(e){return new pn(e)}:gc;function Nh(e){return function(i){var o=Xt(i);return o==Ie?Da(i):o==xe?Pp(i):Ep(i,e(i))}}function ci(e,i,o,c,d,y,E,A){var F=i&re;if(!F&&typeof e!="function")throw new Or(p);var Y=c?c.length:0;if(Y||(i&=~(H|D),c=d=r),E=E===r?E:Ht(Me(E),0),A=A===r?A:Me(A),Y-=d?d.length:0,i&D){var J=c,te=d;c=d=r}var ue=F?r:Ja(e),ve=[e,i,o,c,d,J,te,y,E,A];if(ue&&O0(ve,ue),e=ve[0],i=ve[1],o=ve[2],c=ve[3],d=ve[4],A=ve[9]=ve[9]===r?F?0:e.length:Ht(ve[9]-Y,0),!A&&i&(ie|M)&&(i&=~(ie|M)),!i||i==L)var Ee=h0(e,i,o);else i==ie||i==M?Ee=l0(e,i,A):(i==H||i==(L|H))&&!d.length?Ee=f0(e,i,o,c):Ee=io.apply(r,ve);var ze=ue?fh:Bh;return Kh(ze(Ee,ve),e,i)}function Rh(e,i,o,c){return e===r||Hr(e,dn[o])&&!nt.call(c,o)?i:e}function Uh(e,i,o,c,d,y){return mt(e)&&mt(i)&&(y.set(i,e),Qs(e,i,r,Uh,y),y.delete(i)),e}function p0(e){return Gn(e)?r:e}function Fh(e,i,o,c,d,y){var E=o&O,A=e.length,F=i.length;if(A!=F&&!(E&&F>A))return!1;var Y=y.get(e),J=y.get(i);if(Y&&J)return Y==i&&J==e;var te=-1,ue=!0,ve=o&q?new zi:r;for(y.set(e,i),y.set(i,e);++te<A;){var Ee=e[te],ze=i[te];if(c)var De=E?c(ze,Ee,te,i,e,y):c(Ee,ze,te,e,i,y);if(De!==r){if(De)continue;ue=!1;break}if(ve){if(!ya(i,function(Ge,Ze){if(!Rn(ve,Ze)&&(Ee===Ge||d(Ee,Ge,o,c,y)))return ve.push(Ze)})){ue=!1;break}}else if(!(Ee===ze||d(Ee,ze,o,c,y))){ue=!1;break}}return y.delete(e),y.delete(i),ue}function g0(e,i,o,c,d,y,E){switch(o){case Ce:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Se:return!(e.byteLength!=i.byteLength||!y(new zs(e),new zs(i)));case $:case T:case He:return Hr(+e,+i);case I:return e.name==i.name&&e.message==i.message;case je:case Re:return e==i+"";case Ie:var A=Da;case xe:var F=c&O;if(A||(A=Fs),e.size!=i.size&&!F)return!1;var Y=E.get(e);if(Y)return Y==i;c|=q,E.set(e,i);var J=Fh(A(e),A(i),c,d,y,E);return E.delete(e),J;case Ue:if(Mn)return Mn.call(e)==Mn.call(i)}return!1}function v0(e,i,o,c,d,y){var E=o&O,A=Wa(e),F=A.length,Y=Wa(i),J=Y.length;if(F!=J&&!E)return!1;for(var te=F;te--;){var ue=A[te];if(!(E?ue in i:nt.call(i,ue)))return!1}var ve=y.get(e),Ee=y.get(i);if(ve&&Ee)return ve==i&&Ee==e;var ze=!0;y.set(e,i),y.set(i,e);for(var De=E;++te<F;){ue=A[te];var Ge=e[ue],Ze=i[ue];if(c)var Er=E?c(Ze,Ge,ue,i,e,y):c(Ge,Ze,ue,e,i,y);if(!(Er===r?Ge===Ze||d(Ge,Ze,o,c,y):Er)){ze=!1;break}De||(De=ue=="constructor")}if(ze&&!De){var nr=e.constructor,Dr=i.constructor;nr!=Dr&&"constructor"in e&&"constructor"in i&&!(typeof nr=="function"&&nr instanceof nr&&typeof Dr=="function"&&Dr instanceof Dr)&&(ze=!1)}return y.delete(e),y.delete(i),ze}function ui(e){return rc(zh(e,r,Jh),e+"")}function Wa(e){return th(e,Kt,Za)}function Ya(e){return th(e,pr,Lh)}var Ja=Gs?function(e){return Gs.get(e)}:gc;function ao(e){for(var i=e.name+"",o=gn[i],c=nt.call(gn,i)?o.length:0;c--;){var d=o[c],y=d.func;if(y==null||y==e)return d.name}return i}function mn(e){var i=nt.call(v,"placeholder")?v:e;return i.placeholder}function me(){var e=v.iteratee||dc;return e=e===dc?nh:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,i){var o=e.__data__;return S0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function Xa(e){for(var i=Kt(e),o=i.length;o--;){var c=i[o],d=e[c];i[o]=[c,d,jh(d)]}return i}function Ki(e,i){var o=Ap(e,i);return ih(o)?o:r}function y0(e){var i=nt.call(e,ji),o=e[ji];try{e[ji]=r;var c=!0}catch{}var d=js.call(e);return c&&(i?e[ji]=o:delete e[ji]),d}var Za=Ia?function(e){return e==null?[]:(e=ut(e),yi(Ia(e),function(i){return Hu.call(e,i)}))}:vc,Lh=Ia?function(e){for(var i=[];e;)_i(i,Za(e)),e=Hs(e);return i}:vc,Xt=rr;(xa&&Xt(new xa(new ArrayBuffer(1)))!=Ce||Fn&&Xt(new Fn)!=Ie||Aa&&Xt(Aa.resolve())!=dt||pn&&Xt(new pn)!=xe||Ln&&Xt(new Ln)!=Oe)&&(Xt=function(e){var i=rr(e),o=i==$e?e.constructor:r,c=o?ki(o):"";if(c)switch(c){case Qp:return Ce;case eg:return Ie;case tg:return dt;case rg:return xe;case ig:return Oe}return i});function _0(e,i,o){for(var c=-1,d=o.length;++c<d;){var y=o[c],E=y.size;switch(y.type){case"drop":e+=E;break;case"dropRight":i-=E;break;case"take":i=Jt(i,e+E);break;case"takeRight":e=Ht(e,i-E);break}}return{start:e,end:i}}function m0(e){var i=e.match(ht);return i?i[1].split(Lt):[]}function $h(e,i,o){i=Di(i,e);for(var c=-1,d=i.length,y=!1;++c<d;){var E=Zr(i[c]);if(!(y=e!=null&&o(e,E)))break;e=e[E]}return y||++c!=d?y:(d=e==null?0:e.length,!!d&&vo(d)&&hi(E,d)&&(Ne(e)||Vi(e)))}function b0(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&nt.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function Mh(e){return typeof e.constructor=="function"&&!kn(e)?vn(Hs(e)):{}}function w0(e,i,o){var c=e.constructor;switch(i){case Se:return ka(e);case $:case T:return new c(+e);case Ce:return n0(e,o);case Be:case Ae:case Ve:case We:case et:case tt:case Je:case Qt:case hr:return bh(e,o);case Ie:return new c;case He:case Re:return new c(e);case je:return s0(e);case xe:return new c;case Ue:return o0(e)}}function E0(e,i){var o=i.length;if(!o)return e;var c=o-1;return i[c]=(o>1?"& ":"")+i[c],i=i.join(o>2?", ":" "),e.replace(It,`{
/* [wrapped with `+i+`] */
`)}function D0(e){return Ne(e)||Vi(e)||!!(Bu&&e&&e[Bu])}function hi(e,i){var o=typeof e;return i=i??B,!!i&&(o=="number"||o!="symbol"&&ta.test(e))&&e>-1&&e%1==0&&e<i}function ir(e,i,o){if(!mt(o))return!1;var c=typeof i;return(c=="number"?dr(o)&&hi(i,o.length):c=="string"&&i in o)?Hr(o[i],e):!1}function Qa(e,i){if(Ne(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||wr(e)?!0:Rt.test(e)||!vt.test(e)||i!=null&&e in ut(i)}function S0(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function ec(e){var i=ao(e),o=v[i];if(typeof o!="function"||!(i in Ye.prototype))return!1;if(e===o)return!0;var c=Ja(o);return!!c&&e===c[0]}function I0(e){return!!ju&&ju in e}var x0=$s?li:yc;function kn(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||dn;return e===o}function jh(e){return e===e&&!mt(e)}function qh(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==r||e in ut(o))}}function A0(e){var i=po(e,function(c){return o.size===w&&o.clear(),c}),o=i.cache;return i}function O0(e,i){var o=e[1],c=i[1],d=o|c,y=d<(L|re|u),E=c==u&&o==ie||c==u&&o==m&&e[7].length<=i[8]||c==(u|m)&&i[7].length<=i[8]&&o==ie;if(!(y||E))return e;c&L&&(e[2]=i[2],d|=o&L?0:oe);var A=i[3];if(A){var F=e[3];e[3]=F?Eh(F,A,i[4]):A,e[4]=F?mi(e[3],x):i[4]}return A=i[5],A&&(F=e[5],e[5]=F?Dh(F,A,i[6]):A,e[6]=F?mi(e[5],x):i[6]),A=i[7],A&&(e[7]=A),c&u&&(e[8]=e[8]==null?i[8]:Jt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=d,e}function C0(e){var i=[];if(e!=null)for(var o in ut(e))i.push(o);return i}function P0(e){return js.call(e)}function zh(e,i,o){return i=Ht(i===r?e.length-1:i,0),function(){for(var c=arguments,d=-1,y=Ht(c.length-i,0),E=z(y);++d<y;)E[d]=c[i+d];d=-1;for(var A=z(i+1);++d<i;)A[d]=c[d];return A[i]=o(E),Bt(e,this,A)}}function Hh(e,i){return i.length<2?e:Bi(e,Tr(i,0,-1))}function T0(e,i){for(var o=e.length,c=Jt(i.length,o),d=fr(e);c--;){var y=i[c];e[c]=hi(y,o)?d[y]:r}return e}function tc(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Bh=kh(fh),Vn=Vp||function(e,i){return Xe.setTimeout(e,i)},rc=kh(e0);function Kh(e,i,o){var c=i+"";return rc(e,E0(c,N0(m0(c),o)))}function kh(e){var i=0,o=0;return function(){var c=Jp(),d=de-(c-o);if(o=c,d>0){if(++i>=ce)return arguments[0]}else i=0;return e.apply(r,arguments)}}function uo(e,i){var o=-1,c=e.length,d=c-1;for(i=i===r?c:i;++o<i;){var y=Ma(o,d),E=e[y];e[y]=e[o],e[o]=E}return e.length=i,e}var Vh=A0(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Ut,function(o,c,d,y){i.push(d?y.replace(Yo,"$1"):c||o)}),i});function Zr(e){if(typeof e=="string"||wr(e))return e;var i=e+"";return i=="0"&&1/e==-W?"-0":i}function ki(e){if(e!=null){try{return Ms.call(e)}catch{}try{return e+""}catch{}}return""}function N0(e,i){return Ar(we,function(o){var c="_."+o[0];i&o[1]&&!Rs(e,c)&&e.push(c)}),e.sort()}function Gh(e){if(e instanceof Ye)return e.clone();var i=new Cr(e.__wrapped__,e.__chain__);return i.__actions__=fr(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function R0(e,i,o){(o?ir(e,i,o):i===r)?i=1:i=Ht(Me(i),0);var c=e==null?0:e.length;if(!c||i<1)return[];for(var d=0,y=0,E=z(ks(c/i));d<c;)E[y++]=Tr(e,d,d+=i);return E}function U0(e){for(var i=-1,o=e==null?0:e.length,c=0,d=[];++i<o;){var y=e[i];y&&(d[c++]=y)}return d}function F0(){var e=arguments.length;if(!e)return[];for(var i=z(e-1),o=arguments[0],c=e;c--;)i[c-1]=arguments[c];return _i(Ne(o)?fr(o):[o],Gt(i,1))}var L0=Ke(function(e,i){return Pt(e)?qn(e,Gt(i,1,Pt,!0)):[]}),$0=Ke(function(e,i){var o=Nr(i);return Pt(o)&&(o=r),Pt(e)?qn(e,Gt(i,1,Pt,!0),me(o,2)):[]}),M0=Ke(function(e,i){var o=Nr(i);return Pt(o)&&(o=r),Pt(e)?qn(e,Gt(i,1,Pt,!0),r,o):[]});function j0(e,i,o){var c=e==null?0:e.length;return c?(i=o||i===r?1:Me(i),Tr(e,i<0?0:i,c)):[]}function q0(e,i,o){var c=e==null?0:e.length;return c?(i=o||i===r?1:Me(i),i=c-i,Tr(e,0,i<0?0:i)):[]}function z0(e,i){return e&&e.length?to(e,me(i,3),!0,!0):[]}function H0(e,i){return e&&e.length?to(e,me(i,3),!0):[]}function B0(e,i,o,c){var d=e==null?0:e.length;return d?(o&&typeof o!="number"&&ir(e,i,o)&&(o=0,c=d),Fg(e,i,o,c)):[]}function Wh(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var d=o==null?0:Me(o);return d<0&&(d=Ht(c+d,0)),Us(e,me(i,3),d)}function Yh(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var d=c-1;return o!==r&&(d=Me(o),d=o<0?Ht(c+d,0):Jt(d,c-1)),Us(e,me(i,3),d,!0)}function Jh(e){var i=e==null?0:e.length;return i?Gt(e,1):[]}function K0(e){var i=e==null?0:e.length;return i?Gt(e,W):[]}function k0(e,i){var o=e==null?0:e.length;return o?(i=i===r?1:Me(i),Gt(e,i)):[]}function V0(e){for(var i=-1,o=e==null?0:e.length,c={};++i<o;){var d=e[i];c[d[0]]=d[1]}return c}function Xh(e){return e&&e.length?e[0]:r}function G0(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var d=o==null?0:Me(o);return d<0&&(d=Ht(c+d,0)),un(e,i,d)}function W0(e){var i=e==null?0:e.length;return i?Tr(e,0,-1):[]}var Y0=Ke(function(e){var i=yt(e,Ba);return i.length&&i[0]===e[0]?Ra(i):[]}),J0=Ke(function(e){var i=Nr(e),o=yt(e,Ba);return i===Nr(o)?i=r:o.pop(),o.length&&o[0]===e[0]?Ra(o,me(i,2)):[]}),X0=Ke(function(e){var i=Nr(e),o=yt(e,Ba);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===e[0]?Ra(o,r,i):[]});function Z0(e,i){return e==null?"":Wp.call(e,i)}function Nr(e){var i=e==null?0:e.length;return i?e[i-1]:r}function Q0(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var d=c;return o!==r&&(d=Me(o),d=d<0?Ht(c+d,0):Jt(d,c-1)),i===i?Np(e,i,d):Us(e,Tu,d,!0)}function e1(e,i){return e&&e.length?ch(e,Me(i)):r}var t1=Ke(Zh);function Zh(e,i){return e&&e.length&&i&&i.length?$a(e,i):e}function r1(e,i,o){return e&&e.length&&i&&i.length?$a(e,i,me(o,2)):e}function i1(e,i,o){return e&&e.length&&i&&i.length?$a(e,i,r,o):e}var n1=ui(function(e,i){var o=e==null?0:e.length,c=Ca(e,i);return lh(e,yt(i,function(d){return hi(d,o)?+d:d}).sort(wh)),c});function s1(e,i){var o=[];if(!(e&&e.length))return o;var c=-1,d=[],y=e.length;for(i=me(i,3);++c<y;){var E=e[c];i(E,c,e)&&(o.push(E),d.push(c))}return lh(e,d),o}function ic(e){return e==null?e:Zp.call(e)}function o1(e,i,o){var c=e==null?0:e.length;return c?(o&&typeof o!="number"&&ir(e,i,o)?(i=0,o=c):(i=i==null?0:Me(i),o=o===r?c:Me(o)),Tr(e,i,o)):[]}function a1(e,i){return eo(e,i)}function c1(e,i,o){return qa(e,i,me(o,2))}function u1(e,i){var o=e==null?0:e.length;if(o){var c=eo(e,i);if(c<o&&Hr(e[c],i))return c}return-1}function h1(e,i){return eo(e,i,!0)}function l1(e,i,o){return qa(e,i,me(o,2),!0)}function f1(e,i){var o=e==null?0:e.length;if(o){var c=eo(e,i,!0)-1;if(Hr(e[c],i))return c}return-1}function d1(e){return e&&e.length?dh(e):[]}function p1(e,i){return e&&e.length?dh(e,me(i,2)):[]}function g1(e){var i=e==null?0:e.length;return i?Tr(e,1,i):[]}function v1(e,i,o){return e&&e.length?(i=o||i===r?1:Me(i),Tr(e,0,i<0?0:i)):[]}function y1(e,i,o){var c=e==null?0:e.length;return c?(i=o||i===r?1:Me(i),i=c-i,Tr(e,i<0?0:i,c)):[]}function _1(e,i){return e&&e.length?to(e,me(i,3),!1,!0):[]}function m1(e,i){return e&&e.length?to(e,me(i,3)):[]}var b1=Ke(function(e){return Ei(Gt(e,1,Pt,!0))}),w1=Ke(function(e){var i=Nr(e);return Pt(i)&&(i=r),Ei(Gt(e,1,Pt,!0),me(i,2))}),E1=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,Ei(Gt(e,1,Pt,!0),r,i)});function D1(e){return e&&e.length?Ei(e):[]}function S1(e,i){return e&&e.length?Ei(e,me(i,2)):[]}function I1(e,i){return i=typeof i=="function"?i:r,e&&e.length?Ei(e,r,i):[]}function nc(e){if(!(e&&e.length))return[];var i=0;return e=yi(e,function(o){if(Pt(o))return i=Ht(o.length,i),!0}),wa(i,function(o){return yt(e,_a(o))})}function Qh(e,i){if(!(e&&e.length))return[];var o=nc(e);return i==null?o:yt(o,function(c){return Bt(i,r,c)})}var x1=Ke(function(e,i){return Pt(e)?qn(e,i):[]}),A1=Ke(function(e){return Ha(yi(e,Pt))}),O1=Ke(function(e){var i=Nr(e);return Pt(i)&&(i=r),Ha(yi(e,Pt),me(i,2))}),C1=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,Ha(yi(e,Pt),r,i)}),P1=Ke(nc);function T1(e,i){return yh(e||[],i||[],jn)}function N1(e,i){return yh(e||[],i||[],Bn)}var R1=Ke(function(e){var i=e.length,o=i>1?e[i-1]:r;return o=typeof o=="function"?(e.pop(),o):r,Qh(e,o)});function el(e){var i=v(e);return i.__chain__=!0,i}function U1(e,i){return i(e),e}function ho(e,i){return i(e)}var F1=ui(function(e){var i=e.length,o=i?e[0]:0,c=this.__wrapped__,d=function(y){return Ca(y,e)};return i>1||this.__actions__.length||!(c instanceof Ye)||!hi(o)?this.thru(d):(c=c.slice(o,+o+(i?1:0)),c.__actions__.push({func:ho,args:[d],thisArg:r}),new Cr(c,this.__chain__).thru(function(y){return i&&!y.length&&y.push(r),y}))});function L1(){return el(this)}function $1(){return new Cr(this.value(),this.__chain__)}function M1(){this.__values__===r&&(this.__values__=pl(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function j1(){return this}function q1(e){for(var i,o=this;o instanceof Ys;){var c=Gh(o);c.__index__=0,c.__values__=r,i?d.__wrapped__=c:i=c;var d=c;o=o.__wrapped__}return d.__wrapped__=e,i}function z1(){var e=this.__wrapped__;if(e instanceof Ye){var i=e;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:ho,args:[ic],thisArg:r}),new Cr(i,this.__chain__)}return this.thru(ic)}function H1(){return vh(this.__wrapped__,this.__actions__)}var B1=ro(function(e,i,o){nt.call(e,o)?++e[o]:ai(e,o,1)});function K1(e,i,o){var c=Ne(e)?Cu:Ug;return o&&ir(e,i,o)&&(i=r),c(e,me(i,3))}function k1(e,i){var o=Ne(e)?yi:Qu;return o(e,me(i,3))}var V1=Ah(Wh),G1=Ah(Yh);function W1(e,i){return Gt(lo(e,i),1)}function Y1(e,i){return Gt(lo(e,i),W)}function J1(e,i,o){return o=o===r?1:Me(o),Gt(lo(e,i),o)}function tl(e,i){var o=Ne(e)?Ar:wi;return o(e,me(i,3))}function rl(e,i){var o=Ne(e)?gp:Zu;return o(e,me(i,3))}var X1=ro(function(e,i,o){nt.call(e,o)?e[o].push(i):ai(e,o,[i])});function Z1(e,i,o,c){e=dr(e)?e:wn(e),o=o&&!c?Me(o):0;var d=e.length;return o<0&&(o=Ht(d+o,0)),yo(e)?o<=d&&e.indexOf(i,o)>-1:!!d&&un(e,i,o)>-1}var Q1=Ke(function(e,i,o){var c=-1,d=typeof i=="function",y=dr(e)?z(e.length):[];return wi(e,function(E){y[++c]=d?Bt(i,E,o):zn(E,i,o)}),y}),ev=ro(function(e,i,o){ai(e,o,i)});function lo(e,i){var o=Ne(e)?yt:sh;return o(e,me(i,3))}function tv(e,i,o,c){return e==null?[]:(Ne(i)||(i=i==null?[]:[i]),o=c?r:o,Ne(o)||(o=o==null?[]:[o]),uh(e,i,o))}var rv=ro(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function iv(e,i,o){var c=Ne(e)?va:Ru,d=arguments.length<3;return c(e,me(i,4),o,d,wi)}function nv(e,i,o){var c=Ne(e)?vp:Ru,d=arguments.length<3;return c(e,me(i,4),o,d,Zu)}function sv(e,i){var o=Ne(e)?yi:Qu;return o(e,go(me(i,3)))}function ov(e){var i=Ne(e)?Wu:Zg;return i(e)}function av(e,i,o){(o?ir(e,i,o):i===r)?i=1:i=Me(i);var c=Ne(e)?Cg:Qg;return c(e,i)}function cv(e){var i=Ne(e)?Pg:t0;return i(e)}function uv(e){if(e==null)return 0;if(dr(e))return yo(e)?ln(e):e.length;var i=Xt(e);return i==Ie||i==xe?e.size:Fa(e).length}function hv(e,i,o){var c=Ne(e)?ya:r0;return o&&ir(e,i,o)&&(i=r),c(e,me(i,3))}var lv=Ke(function(e,i){if(e==null)return[];var o=i.length;return o>1&&ir(e,i[0],i[1])?i=[]:o>2&&ir(i[0],i[1],i[2])&&(i=[i[0]]),uh(e,Gt(i,1),[])}),fo=kp||function(){return Xe.Date.now()};function fv(e,i){if(typeof i!="function")throw new Or(p);return e=Me(e),function(){if(--e<1)return i.apply(this,arguments)}}function il(e,i,o){return i=o?r:i,i=e&&i==null?e.length:i,ci(e,u,r,r,r,r,i)}function nl(e,i){var o;if(typeof i!="function")throw new Or(p);return e=Me(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=r),o}}var sc=Ke(function(e,i,o){var c=L;if(o.length){var d=mi(o,mn(sc));c|=H}return ci(e,c,i,o,d)}),sl=Ke(function(e,i,o){var c=L|re;if(o.length){var d=mi(o,mn(sl));c|=H}return ci(i,c,e,o,d)});function ol(e,i,o){i=o?r:i;var c=ci(e,ie,r,r,r,r,r,i);return c.placeholder=ol.placeholder,c}function al(e,i,o){i=o?r:i;var c=ci(e,M,r,r,r,r,r,i);return c.placeholder=al.placeholder,c}function cl(e,i,o){var c,d,y,E,A,F,Y=0,J=!1,te=!1,ue=!0;if(typeof e!="function")throw new Or(p);i=Rr(i)||0,mt(o)&&(J=!!o.leading,te="maxWait"in o,y=te?Ht(Rr(o.maxWait)||0,i):y,ue="trailing"in o?!!o.trailing:ue);function ve(Tt){var Br=c,di=d;return c=d=r,Y=Tt,E=e.apply(di,Br),E}function Ee(Tt){return Y=Tt,A=Vn(Ge,i),J?ve(Tt):E}function ze(Tt){var Br=Tt-F,di=Tt-Y,Al=i-Br;return te?Jt(Al,y-di):Al}function De(Tt){var Br=Tt-F,di=Tt-Y;return F===r||Br>=i||Br<0||te&&di>=y}function Ge(){var Tt=fo();if(De(Tt))return Ze(Tt);A=Vn(Ge,ze(Tt))}function Ze(Tt){return A=r,ue&&c?ve(Tt):(c=d=r,E)}function Er(){A!==r&&_h(A),Y=0,c=F=d=A=r}function nr(){return A===r?E:Ze(fo())}function Dr(){var Tt=fo(),Br=De(Tt);if(c=arguments,d=this,F=Tt,Br){if(A===r)return Ee(F);if(te)return _h(A),A=Vn(Ge,i),ve(F)}return A===r&&(A=Vn(Ge,i)),E}return Dr.cancel=Er,Dr.flush=nr,Dr}var dv=Ke(function(e,i){return Xu(e,1,i)}),pv=Ke(function(e,i,o){return Xu(e,Rr(i)||0,o)});function gv(e){return ci(e,X)}function po(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Or(p);var o=function(){var c=arguments,d=i?i.apply(this,c):c[0],y=o.cache;if(y.has(d))return y.get(d);var E=e.apply(this,c);return o.cache=y.set(d,E)||y,E};return o.cache=new(po.Cache||oi),o}po.Cache=oi;function go(e){if(typeof e!="function")throw new Or(p);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function vv(e){return nl(2,e)}var yv=i0(function(e,i){i=i.length==1&&Ne(i[0])?yt(i[0],mr(me())):yt(Gt(i,1),mr(me()));var o=i.length;return Ke(function(c){for(var d=-1,y=Jt(c.length,o);++d<y;)c[d]=i[d].call(this,c[d]);return Bt(e,this,c)})}),oc=Ke(function(e,i){var o=mi(i,mn(oc));return ci(e,H,r,i,o)}),ul=Ke(function(e,i){var o=mi(i,mn(ul));return ci(e,D,r,i,o)}),_v=ui(function(e,i){return ci(e,m,r,r,r,i)});function mv(e,i){if(typeof e!="function")throw new Or(p);return i=i===r?i:Me(i),Ke(e,i)}function bv(e,i){if(typeof e!="function")throw new Or(p);return i=i==null?0:Ht(Me(i),0),Ke(function(o){var c=o[i],d=Si(o,0,i);return c&&_i(d,c),Bt(e,this,d)})}function wv(e,i,o){var c=!0,d=!0;if(typeof e!="function")throw new Or(p);return mt(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),cl(e,i,{leading:c,maxWait:i,trailing:d})}function Ev(e){return il(e,1)}function Dv(e,i){return oc(Ka(i),e)}function Sv(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function Iv(e){return Pr(e,P)}function xv(e,i){return i=typeof i=="function"?i:r,Pr(e,P,i)}function Av(e){return Pr(e,C|P)}function Ov(e,i){return i=typeof i=="function"?i:r,Pr(e,C|P,i)}function Cv(e,i){return i==null||Ju(e,i,Kt(i))}function Hr(e,i){return e===i||e!==e&&i!==i}var Pv=oo(Na),Tv=oo(function(e,i){return e>=i}),Vi=rh(function(){return arguments}())?rh:function(e){return xt(e)&&nt.call(e,"callee")&&!Hu.call(e,"callee")},Ne=z.isArray,Nv=tr?mr(tr):qg;function dr(e){return e!=null&&vo(e.length)&&!li(e)}function Pt(e){return xt(e)&&dr(e)}function Rv(e){return e===!0||e===!1||xt(e)&&rr(e)==$}var Ii=Gp||yc,Uv=jr?mr(jr):zg;function Fv(e){return xt(e)&&e.nodeType===1&&!Gn(e)}function Lv(e){if(e==null)return!0;if(dr(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||Ii(e)||bn(e)||Vi(e)))return!e.length;var i=Xt(e);if(i==Ie||i==xe)return!e.size;if(kn(e))return!Fa(e).length;for(var o in e)if(nt.call(e,o))return!1;return!0}function $v(e,i){return Hn(e,i)}function Mv(e,i,o){o=typeof o=="function"?o:r;var c=o?o(e,i):r;return c===r?Hn(e,i,r,o):!!c}function ac(e){if(!xt(e))return!1;var i=rr(e);return i==I||i==h||typeof e.message=="string"&&typeof e.name=="string"&&!Gn(e)}function jv(e){return typeof e=="number"&&Ku(e)}function li(e){if(!mt(e))return!1;var i=rr(e);return i==ae||i==fe||i==j||i==pt}function hl(e){return typeof e=="number"&&e==Me(e)}function vo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=B}function mt(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function xt(e){return e!=null&&typeof e=="object"}var ll=xr?mr(xr):Bg;function qv(e,i){return e===i||Ua(e,i,Xa(i))}function zv(e,i,o){return o=typeof o=="function"?o:r,Ua(e,i,Xa(i),o)}function Hv(e){return fl(e)&&e!=+e}function Bv(e){if(x0(e))throw new Pe(l);return ih(e)}function Kv(e){return e===null}function kv(e){return e==null}function fl(e){return typeof e=="number"||xt(e)&&rr(e)==He}function Gn(e){if(!xt(e)||rr(e)!=$e)return!1;var i=Hs(e);if(i===null)return!0;var o=nt.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&Ms.call(o)==zp}var cc=Yr?mr(Yr):Kg;function Vv(e){return hl(e)&&e>=-B&&e<=B}var dl=Nn?mr(Nn):kg;function yo(e){return typeof e=="string"||!Ne(e)&&xt(e)&&rr(e)==Re}function wr(e){return typeof e=="symbol"||xt(e)&&rr(e)==Ue}var bn=Mi?mr(Mi):Vg;function Gv(e){return e===r}function Wv(e){return xt(e)&&Xt(e)==Oe}function Yv(e){return xt(e)&&rr(e)==Fe}var Jv=oo(La),Xv=oo(function(e,i){return e<=i});function pl(e){if(!e)return[];if(dr(e))return yo(e)?qr(e):fr(e);if(Un&&e[Un])return Cp(e[Un]());var i=Xt(e),o=i==Ie?Da:i==xe?Fs:wn;return o(e)}function fi(e){if(!e)return e===0?e:0;if(e=Rr(e),e===W||e===-W){var i=e<0?-1:1;return i*K}return e===e?e:0}function Me(e){var i=fi(e),o=i%1;return i===i?o?i-o:i:0}function gl(e){return e?Hi(Me(e),0,ee):0}function Rr(e){if(typeof e=="number")return e;if(wr(e))return G;if(mt(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=mt(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Uu(e);var o=Zo.test(e);return o||ea.test(e)?Te(e.slice(2),o?2:8):Xo.test(e)?G:+e}function vl(e){return Xr(e,pr(e))}function Zv(e){return e?Hi(Me(e),-B,B):e===0?e:0}function it(e){return e==null?"":br(e)}var Qv=yn(function(e,i){if(kn(i)||dr(i)){Xr(i,Kt(i),e);return}for(var o in i)nt.call(i,o)&&jn(e,o,i[o])}),yl=yn(function(e,i){Xr(i,pr(i),e)}),_o=yn(function(e,i,o,c){Xr(i,pr(i),e,c)}),ey=yn(function(e,i,o,c){Xr(i,Kt(i),e,c)}),ty=ui(Ca);function ry(e,i){var o=vn(e);return i==null?o:Yu(o,i)}var iy=Ke(function(e,i){e=ut(e);var o=-1,c=i.length,d=c>2?i[2]:r;for(d&&ir(i[0],i[1],d)&&(c=1);++o<c;)for(var y=i[o],E=pr(y),A=-1,F=E.length;++A<F;){var Y=E[A],J=e[Y];(J===r||Hr(J,dn[Y])&&!nt.call(e,Y))&&(e[Y]=y[Y])}return e}),ny=Ke(function(e){return e.push(r,Uh),Bt(_l,r,e)});function sy(e,i){return Pu(e,me(i,3),Jr)}function oy(e,i){return Pu(e,me(i,3),Ta)}function ay(e,i){return e==null?e:Pa(e,me(i,3),pr)}function cy(e,i){return e==null?e:eh(e,me(i,3),pr)}function uy(e,i){return e&&Jr(e,me(i,3))}function hy(e,i){return e&&Ta(e,me(i,3))}function ly(e){return e==null?[]:Zs(e,Kt(e))}function fy(e){return e==null?[]:Zs(e,pr(e))}function uc(e,i,o){var c=e==null?r:Bi(e,i);return c===r?o:c}function dy(e,i){return e!=null&&$h(e,i,Lg)}function hc(e,i){return e!=null&&$h(e,i,$g)}var py=Ch(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=js.call(i)),e[i]=o},fc(gr)),gy=Ch(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=js.call(i)),nt.call(e,i)?e[i].push(o):e[i]=[o]},me),vy=Ke(zn);function Kt(e){return dr(e)?Gu(e):Fa(e)}function pr(e){return dr(e)?Gu(e,!0):Gg(e)}function yy(e,i){var o={};return i=me(i,3),Jr(e,function(c,d,y){ai(o,i(c,d,y),c)}),o}function _y(e,i){var o={};return i=me(i,3),Jr(e,function(c,d,y){ai(o,d,i(c,d,y))}),o}var my=yn(function(e,i,o){Qs(e,i,o)}),_l=yn(function(e,i,o,c){Qs(e,i,o,c)}),by=ui(function(e,i){var o={};if(e==null)return o;var c=!1;i=yt(i,function(y){return y=Di(y,e),c||(c=y.length>1),y}),Xr(e,Ya(e),o),c&&(o=Pr(o,C|U|P,p0));for(var d=i.length;d--;)za(o,i[d]);return o});function wy(e,i){return ml(e,go(me(i)))}var Ey=ui(function(e,i){return e==null?{}:Yg(e,i)});function ml(e,i){if(e==null)return{};var o=yt(Ya(e),function(c){return[c]});return i=me(i),hh(e,o,function(c,d){return i(c,d[0])})}function Dy(e,i,o){i=Di(i,e);var c=-1,d=i.length;for(d||(d=1,e=r);++c<d;){var y=e==null?r:e[Zr(i[c])];y===r&&(c=d,y=o),e=li(y)?y.call(e):y}return e}function Sy(e,i,o){return e==null?e:Bn(e,i,o)}function Iy(e,i,o,c){return c=typeof c=="function"?c:r,e==null?e:Bn(e,i,o,c)}var bl=Nh(Kt),wl=Nh(pr);function xy(e,i,o){var c=Ne(e),d=c||Ii(e)||bn(e);if(i=me(i,4),o==null){var y=e&&e.constructor;d?o=c?new y:[]:mt(e)?o=li(y)?vn(Hs(e)):{}:o={}}return(d?Ar:Jr)(e,function(E,A,F){return i(o,E,A,F)}),o}function Ay(e,i){return e==null?!0:za(e,i)}function Oy(e,i,o){return e==null?e:gh(e,i,Ka(o))}function Cy(e,i,o,c){return c=typeof c=="function"?c:r,e==null?e:gh(e,i,Ka(o),c)}function wn(e){return e==null?[]:Ea(e,Kt(e))}function Py(e){return e==null?[]:Ea(e,pr(e))}function Ty(e,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Rr(o),o=o===o?o:0),i!==r&&(i=Rr(i),i=i===i?i:0),Hi(Rr(e),i,o)}function Ny(e,i,o){return i=fi(i),o===r?(o=i,i=0):o=fi(o),e=Rr(e),Mg(e,i,o)}function Ry(e,i,o){if(o&&typeof o!="boolean"&&ir(e,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof e=="boolean"&&(o=e,e=r)),e===r&&i===r?(e=0,i=1):(e=fi(e),i===r?(i=e,e=0):i=fi(i)),e>i){var c=e;e=i,i=c}if(o||e%1||i%1){var d=ku();return Jt(e+d*(i-e+at("1e-"+((d+"").length-1))),i)}return Ma(e,i)}var Uy=_n(function(e,i,o){return i=i.toLowerCase(),e+(o?El(i):i)});function El(e){return lc(it(e).toLowerCase())}function Dl(e){return e=it(e),e&&e.replace(ii,Sp).replace(da,"")}function Fy(e,i,o){e=it(e),i=br(i);var c=e.length;o=o===r?c:Hi(Me(o),0,c);var d=o;return o-=i.length,o>=0&&e.slice(o,d)==i}function Ly(e){return e=it(e),e&&gt.test(e)?e.replace(Ri,Ip):e}function $y(e){return e=it(e),e&&Ft.test(e)?e.replace(Dt,"\\$&"):e}var My=_n(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),jy=_n(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),qy=xh("toLowerCase");function zy(e,i,o){e=it(e),i=Me(i);var c=i?ln(e):0;if(!i||c>=i)return e;var d=(i-c)/2;return so(Vs(d),o)+e+so(ks(d),o)}function Hy(e,i,o){e=it(e),i=Me(i);var c=i?ln(e):0;return i&&c<i?e+so(i-c,o):e}function By(e,i,o){e=it(e),i=Me(i);var c=i?ln(e):0;return i&&c<i?so(i-c,o)+e:e}function Ky(e,i,o){return o||i==null?i=0:i&&(i=+i),Xp(it(e).replace(St,""),i||0)}function ky(e,i,o){return(o?ir(e,i,o):i===r)?i=1:i=Me(i),ja(it(e),i)}function Vy(){var e=arguments,i=it(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var Gy=_n(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function Wy(e,i,o){return o&&typeof o!="number"&&ir(e,i,o)&&(i=o=r),o=o===r?ee:o>>>0,o?(e=it(e),e&&(typeof i=="string"||i!=null&&!cc(i))&&(i=br(i),!i&&hn(e))?Si(qr(e),0,o):e.split(i,o)):[]}var Yy=_n(function(e,i,o){return e+(o?" ":"")+lc(i)});function Jy(e,i,o){return e=it(e),o=o==null?0:Hi(Me(o),0,e.length),i=br(i),e.slice(o,o+i.length)==i}function Xy(e,i,o){var c=v.templateSettings;o&&ir(e,i,o)&&(i=r),e=it(e),i=_o({},i,c,Rh);var d=_o({},i.imports,c.imports,Rh),y=Kt(d),E=Ea(d,y),A,F,Y=0,J=i.interpolate||tn,te="__p += '",ue=Sa((i.escape||tn).source+"|"+J.source+"|"+(J===_t?Jo:tn).source+"|"+(i.evaluate||tn).source+"|$","g"),ve="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pa+"]")+`
`;e.replace(ue,function(De,Ge,Ze,Er,nr,Dr){return Ze||(Ze=Er),te+=e.slice(Y,Dr).replace(ra,xp),Ge&&(A=!0,te+=`' +
__e(`+Ge+`) +
'`),nr&&(F=!0,te+=`';
`+nr+`;
__p += '`),Ze&&(te+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),Y=Dr+De.length,De}),te+=`';
`;var Ee=nt.call(i,"variable")&&i.variable;if(!Ee)te=`with (obj) {
`+te+`
}
`;else if(Wo.test(Ee))throw new Pe(f);te=(F?te.replace(Gr,""):te).replace(er,"$1").replace(ri,"$1;"),te="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(F?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+te+`return __p
}`;var ze=Il(function(){return rt(y,ve+"return "+te).apply(r,E)});if(ze.source=te,ac(ze))throw ze;return ze}function Zy(e){return it(e).toLowerCase()}function Qy(e){return it(e).toUpperCase()}function e_(e,i,o){if(e=it(e),e&&(o||i===r))return Uu(e);if(!e||!(i=br(i)))return e;var c=qr(e),d=qr(i),y=Fu(c,d),E=Lu(c,d)+1;return Si(c,y,E).join("")}function t_(e,i,o){if(e=it(e),e&&(o||i===r))return e.slice(0,Mu(e)+1);if(!e||!(i=br(i)))return e;var c=qr(e),d=Lu(c,qr(i))+1;return Si(c,0,d).join("")}function r_(e,i,o){if(e=it(e),e&&(o||i===r))return e.replace(St,"");if(!e||!(i=br(i)))return e;var c=qr(e),d=Fu(c,qr(i));return Si(c,d).join("")}function i_(e,i){var o=V,c=ne;if(mt(i)){var d="separator"in i?i.separator:d;o="length"in i?Me(i.length):o,c="omission"in i?br(i.omission):c}e=it(e);var y=e.length;if(hn(e)){var E=qr(e);y=E.length}if(o>=y)return e;var A=o-ln(c);if(A<1)return c;var F=E?Si(E,0,A).join(""):e.slice(0,A);if(d===r)return F+c;if(E&&(A+=F.length-A),cc(d)){if(e.slice(A).search(d)){var Y,J=F;for(d.global||(d=Sa(d.source,it(Ir.exec(d))+"g")),d.lastIndex=0;Y=d.exec(J);)var te=Y.index;F=F.slice(0,te===r?A:te)}}else if(e.indexOf(br(d),A)!=A){var ue=F.lastIndexOf(d);ue>-1&&(F=F.slice(0,ue))}return F+c}function n_(e){return e=it(e),e&&bt.test(e)?e.replace(gi,Rp):e}var s_=_n(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),lc=xh("toUpperCase");function Sl(e,i,o){return e=it(e),i=o?r:i,i===r?Op(e)?Lp(e):mp(e):e.match(i)||[]}var Il=Ke(function(e,i){try{return Bt(e,r,i)}catch(o){return ac(o)?o:new Pe(o)}}),o_=ui(function(e,i){return Ar(i,function(o){o=Zr(o),ai(e,o,sc(e[o],e))}),e});function a_(e){var i=e==null?0:e.length,o=me();return e=i?yt(e,function(c){if(typeof c[1]!="function")throw new Or(p);return[o(c[0]),c[1]]}):[],Ke(function(c){for(var d=-1;++d<i;){var y=e[d];if(Bt(y[0],this,c))return Bt(y[1],this,c)}})}function c_(e){return Rg(Pr(e,C))}function fc(e){return function(){return e}}function u_(e,i){return e==null||e!==e?i:e}var h_=Oh(),l_=Oh(!0);function gr(e){return e}function dc(e){return nh(typeof e=="function"?e:Pr(e,C))}function f_(e){return oh(Pr(e,C))}function d_(e,i){return ah(e,Pr(i,C))}var p_=Ke(function(e,i){return function(o){return zn(o,e,i)}}),g_=Ke(function(e,i){return function(o){return zn(e,o,i)}});function pc(e,i,o){var c=Kt(i),d=Zs(i,c);o==null&&!(mt(i)&&(d.length||!c.length))&&(o=i,i=e,e=this,d=Zs(i,Kt(i)));var y=!(mt(o)&&"chain"in o)||!!o.chain,E=li(e);return Ar(d,function(A){var F=i[A];e[A]=F,E&&(e.prototype[A]=function(){var Y=this.__chain__;if(y||Y){var J=e(this.__wrapped__),te=J.__actions__=fr(this.__actions__);return te.push({func:F,args:arguments,thisArg:e}),J.__chain__=Y,J}return F.apply(e,_i([this.value()],arguments))})}),e}function v_(){return Xe._===this&&(Xe._=Hp),this}function gc(){}function y_(e){return e=Me(e),Ke(function(i){return ch(i,e)})}var __=Va(yt),m_=Va(Cu),b_=Va(ya);function xl(e){return Qa(e)?_a(Zr(e)):Jg(e)}function w_(e){return function(i){return e==null?r:Bi(e,i)}}var E_=Ph(),D_=Ph(!0);function vc(){return[]}function yc(){return!1}function S_(){return{}}function I_(){return""}function x_(){return!0}function A_(e,i){if(e=Me(e),e<1||e>B)return[];var o=ee,c=Jt(e,ee);i=me(i),e-=ee;for(var d=wa(c,i);++o<e;)i(o);return d}function O_(e){return Ne(e)?yt(e,Zr):wr(e)?[e]:fr(Vh(it(e)))}function C_(e){var i=++qp;return it(e)+i}var P_=no(function(e,i){return e+i},0),T_=Ga("ceil"),N_=no(function(e,i){return e/i},1),R_=Ga("floor");function U_(e){return e&&e.length?Xs(e,gr,Na):r}function F_(e,i){return e&&e.length?Xs(e,me(i,2),Na):r}function L_(e){return Nu(e,gr)}function $_(e,i){return Nu(e,me(i,2))}function M_(e){return e&&e.length?Xs(e,gr,La):r}function j_(e,i){return e&&e.length?Xs(e,me(i,2),La):r}var q_=no(function(e,i){return e*i},1),z_=Ga("round"),H_=no(function(e,i){return e-i},0);function B_(e){return e&&e.length?ba(e,gr):0}function K_(e,i){return e&&e.length?ba(e,me(i,2)):0}return v.after=fv,v.ary=il,v.assign=Qv,v.assignIn=yl,v.assignInWith=_o,v.assignWith=ey,v.at=ty,v.before=nl,v.bind=sc,v.bindAll=o_,v.bindKey=sl,v.castArray=Sv,v.chain=el,v.chunk=R0,v.compact=U0,v.concat=F0,v.cond=a_,v.conforms=c_,v.constant=fc,v.countBy=B1,v.create=ry,v.curry=ol,v.curryRight=al,v.debounce=cl,v.defaults=iy,v.defaultsDeep=ny,v.defer=dv,v.delay=pv,v.difference=L0,v.differenceBy=$0,v.differenceWith=M0,v.drop=j0,v.dropRight=q0,v.dropRightWhile=z0,v.dropWhile=H0,v.fill=B0,v.filter=k1,v.flatMap=W1,v.flatMapDeep=Y1,v.flatMapDepth=J1,v.flatten=Jh,v.flattenDeep=K0,v.flattenDepth=k0,v.flip=gv,v.flow=h_,v.flowRight=l_,v.fromPairs=V0,v.functions=ly,v.functionsIn=fy,v.groupBy=X1,v.initial=W0,v.intersection=Y0,v.intersectionBy=J0,v.intersectionWith=X0,v.invert=py,v.invertBy=gy,v.invokeMap=Q1,v.iteratee=dc,v.keyBy=ev,v.keys=Kt,v.keysIn=pr,v.map=lo,v.mapKeys=yy,v.mapValues=_y,v.matches=f_,v.matchesProperty=d_,v.memoize=po,v.merge=my,v.mergeWith=_l,v.method=p_,v.methodOf=g_,v.mixin=pc,v.negate=go,v.nthArg=y_,v.omit=by,v.omitBy=wy,v.once=vv,v.orderBy=tv,v.over=__,v.overArgs=yv,v.overEvery=m_,v.overSome=b_,v.partial=oc,v.partialRight=ul,v.partition=rv,v.pick=Ey,v.pickBy=ml,v.property=xl,v.propertyOf=w_,v.pull=t1,v.pullAll=Zh,v.pullAllBy=r1,v.pullAllWith=i1,v.pullAt=n1,v.range=E_,v.rangeRight=D_,v.rearg=_v,v.reject=sv,v.remove=s1,v.rest=mv,v.reverse=ic,v.sampleSize=av,v.set=Sy,v.setWith=Iy,v.shuffle=cv,v.slice=o1,v.sortBy=lv,v.sortedUniq=d1,v.sortedUniqBy=p1,v.split=Wy,v.spread=bv,v.tail=g1,v.take=v1,v.takeRight=y1,v.takeRightWhile=_1,v.takeWhile=m1,v.tap=U1,v.throttle=wv,v.thru=ho,v.toArray=pl,v.toPairs=bl,v.toPairsIn=wl,v.toPath=O_,v.toPlainObject=vl,v.transform=xy,v.unary=Ev,v.union=b1,v.unionBy=w1,v.unionWith=E1,v.uniq=D1,v.uniqBy=S1,v.uniqWith=I1,v.unset=Ay,v.unzip=nc,v.unzipWith=Qh,v.update=Oy,v.updateWith=Cy,v.values=wn,v.valuesIn=Py,v.without=x1,v.words=Sl,v.wrap=Dv,v.xor=A1,v.xorBy=O1,v.xorWith=C1,v.zip=P1,v.zipObject=T1,v.zipObjectDeep=N1,v.zipWith=R1,v.entries=bl,v.entriesIn=wl,v.extend=yl,v.extendWith=_o,pc(v,v),v.add=P_,v.attempt=Il,v.camelCase=Uy,v.capitalize=El,v.ceil=T_,v.clamp=Ty,v.clone=Iv,v.cloneDeep=Av,v.cloneDeepWith=Ov,v.cloneWith=xv,v.conformsTo=Cv,v.deburr=Dl,v.defaultTo=u_,v.divide=N_,v.endsWith=Fy,v.eq=Hr,v.escape=Ly,v.escapeRegExp=$y,v.every=K1,v.find=V1,v.findIndex=Wh,v.findKey=sy,v.findLast=G1,v.findLastIndex=Yh,v.findLastKey=oy,v.floor=R_,v.forEach=tl,v.forEachRight=rl,v.forIn=ay,v.forInRight=cy,v.forOwn=uy,v.forOwnRight=hy,v.get=uc,v.gt=Pv,v.gte=Tv,v.has=dy,v.hasIn=hc,v.head=Xh,v.identity=gr,v.includes=Z1,v.indexOf=G0,v.inRange=Ny,v.invoke=vy,v.isArguments=Vi,v.isArray=Ne,v.isArrayBuffer=Nv,v.isArrayLike=dr,v.isArrayLikeObject=Pt,v.isBoolean=Rv,v.isBuffer=Ii,v.isDate=Uv,v.isElement=Fv,v.isEmpty=Lv,v.isEqual=$v,v.isEqualWith=Mv,v.isError=ac,v.isFinite=jv,v.isFunction=li,v.isInteger=hl,v.isLength=vo,v.isMap=ll,v.isMatch=qv,v.isMatchWith=zv,v.isNaN=Hv,v.isNative=Bv,v.isNil=kv,v.isNull=Kv,v.isNumber=fl,v.isObject=mt,v.isObjectLike=xt,v.isPlainObject=Gn,v.isRegExp=cc,v.isSafeInteger=Vv,v.isSet=dl,v.isString=yo,v.isSymbol=wr,v.isTypedArray=bn,v.isUndefined=Gv,v.isWeakMap=Wv,v.isWeakSet=Yv,v.join=Z0,v.kebabCase=My,v.last=Nr,v.lastIndexOf=Q0,v.lowerCase=jy,v.lowerFirst=qy,v.lt=Jv,v.lte=Xv,v.max=U_,v.maxBy=F_,v.mean=L_,v.meanBy=$_,v.min=M_,v.minBy=j_,v.stubArray=vc,v.stubFalse=yc,v.stubObject=S_,v.stubString=I_,v.stubTrue=x_,v.multiply=q_,v.nth=e1,v.noConflict=v_,v.noop=gc,v.now=fo,v.pad=zy,v.padEnd=Hy,v.padStart=By,v.parseInt=Ky,v.random=Ry,v.reduce=iv,v.reduceRight=nv,v.repeat=ky,v.replace=Vy,v.result=Dy,v.round=z_,v.runInContext=R,v.sample=ov,v.size=uv,v.snakeCase=Gy,v.some=hv,v.sortedIndex=a1,v.sortedIndexBy=c1,v.sortedIndexOf=u1,v.sortedLastIndex=h1,v.sortedLastIndexBy=l1,v.sortedLastIndexOf=f1,v.startCase=Yy,v.startsWith=Jy,v.subtract=H_,v.sum=B_,v.sumBy=K_,v.template=Xy,v.times=A_,v.toFinite=fi,v.toInteger=Me,v.toLength=gl,v.toLower=Zy,v.toNumber=Rr,v.toSafeInteger=Zv,v.toString=it,v.toUpper=Qy,v.trim=e_,v.trimEnd=t_,v.trimStart=r_,v.truncate=i_,v.unescape=n_,v.uniqueId=C_,v.upperCase=s_,v.upperFirst=lc,v.each=tl,v.eachRight=rl,v.first=Xh,pc(v,function(){var e={};return Jr(v,function(i,o){nt.call(v.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),v.VERSION=s,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){v[e].placeholder=v}),Ar(["drop","take"],function(e,i){Ye.prototype[e]=function(o){o=o===r?1:Ht(Me(o),0);var c=this.__filtered__&&!i?new Ye(this):this.clone();return c.__filtered__?c.__takeCount__=Jt(o,c.__takeCount__):c.__views__.push({size:Jt(o,ee),type:e+(c.__dir__<0?"Right":"")}),c},Ye.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),Ar(["filter","map","takeWhile"],function(e,i){var o=i+1,c=o==_||o==Z;Ye.prototype[e]=function(d){var y=this.clone();return y.__iteratees__.push({iteratee:me(d,3),type:o}),y.__filtered__=y.__filtered__||c,y}}),Ar(["head","last"],function(e,i){var o="take"+(i?"Right":"");Ye.prototype[e]=function(){return this[o](1).value()[0]}}),Ar(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[o](1)}}),Ye.prototype.compact=function(){return this.filter(gr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,i){return typeof e=="function"?new Ye(this):this.map(function(o){return zn(o,e,i)})}),Ye.prototype.reject=function(e){return this.filter(go(me(e)))},Ye.prototype.slice=function(e,i){e=Me(e);var o=this;return o.__filtered__&&(e>0||i<0)?new Ye(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==r&&(i=Me(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(ee)},Jr(Ye.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),c=/^(?:head|last)$/.test(i),d=v[c?"take"+(i=="last"?"Right":""):i],y=c||/^find/.test(i);d&&(v.prototype[i]=function(){var E=this.__wrapped__,A=c?[1]:arguments,F=E instanceof Ye,Y=A[0],J=F||Ne(E),te=function(Ge){var Ze=d.apply(v,_i([Ge],A));return c&&ue?Ze[0]:Ze};J&&o&&typeof Y=="function"&&Y.length!=1&&(F=J=!1);var ue=this.__chain__,ve=!!this.__actions__.length,Ee=y&&!ue,ze=F&&!ve;if(!y&&J){E=ze?E:new Ye(this);var De=e.apply(E,A);return De.__actions__.push({func:ho,args:[te],thisArg:r}),new Cr(De,ue)}return Ee&&ze?e.apply(this,A):(De=this.thru(te),Ee?c?De.value()[0]:De.value():De)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(e){var i=Ls[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",c=/^(?:pop|shift)$/.test(e);v.prototype[e]=function(){var d=arguments;if(c&&!this.__chain__){var y=this.value();return i.apply(Ne(y)?y:[],d)}return this[o](function(E){return i.apply(Ne(E)?E:[],d)})}}),Jr(Ye.prototype,function(e,i){var o=v[i];if(o){var c=o.name+"";nt.call(gn,c)||(gn[c]=[]),gn[c].push({name:i,func:o})}}),gn[io(r,re).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=ng,Ye.prototype.reverse=sg,Ye.prototype.value=og,v.prototype.at=F1,v.prototype.chain=L1,v.prototype.commit=$1,v.prototype.next=M1,v.prototype.plant=q1,v.prototype.reverse=z1,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=H1,v.prototype.first=v.prototype.head,Un&&(v.prototype[Un]=j1),v},fn=$p();Ct?((Ct.exports=fn)._=fn,ct._=fn):Xe._=fn}).call(ns)})(eu,eu.exports);var n2=Object.defineProperty,s2=Object.defineProperties,o2=Object.getOwnPropertyDescriptors,Zf=Object.getOwnPropertySymbols,a2=Object.prototype.hasOwnProperty,c2=Object.prototype.propertyIsEnumerable,Qf=(n,t,r)=>t in n?n2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,bo=(n,t)=>{for(var r in t||(t={}))a2.call(t,r)&&Qf(n,r,t[r]);if(Zf)for(var r of Zf(t))c2.call(t,r)&&Qf(n,r,t[r]);return n},u2=(n,t)=>s2(n,o2(t));function $r(n,t,r){let s;const a=tu(n);return t.rpcMap&&(s=t.rpcMap[a]),s||(s=`${i2}?chainId=eip155:${a}&projectId=${r}`),s}function tu(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function fp(n){return n.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function h2(n,t){const r=Object.keys(t.namespaces).filter(a=>a.includes(n));if(!r.length)return[];const s=[];return r.forEach(a=>{const l=t.namespaces[a].accounts;s.push(...l)}),s}function l2(n={},t={}){const r=ed(n),s=ed(t);return eu.exports.merge(r,s)}function ed(n){var t,r,s,a;const l={};if(!J6(n))return l;for(const[p,f]of Object.entries(n)){const g=xu(p)?[p]:f.chains,w=f.methods||[],x=f.events||[],C=f.rpcMap||{},U=So(p);l[U]=u2(bo(bo({},l[U]),f),{chains:$c(g,(t=l[U])==null?void 0:t.chains),methods:$c(w,(r=l[U])==null?void 0:r.methods),events:$c(x,(s=l[U])==null?void 0:s.events),rpcMap:bo(bo({},C),(a=l[U])==null?void 0:a.rpcMap)})}return l}function f2(n){return n.includes(":")?n.split(":")[2]:n}function d2(n){const t={};for(const[r,s]of Object.entries(n)){const a=s.methods||[],l=s.events||[],p=s.accounts||[],f=xu(r)?[r]:s.chains?s.chains:fp(s.accounts);t[r]={chains:f,methods:a,events:l,accounts:p}}return t}const dp={},Nt=n=>dp[n],Mc=(n,t)=>{dp[n]=t};class p2{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace);return typeof s>"u"?void 0:new Ti(new en(s,Nt("disableProviderPing")))}}class g2{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){const s=tu(t);if(!this.httpProviders[s]){const a=r||$r(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,a)}this.chainId=s,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ti(new en(s,Nt("disableProviderPing")))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const a=tu(r);t[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,s;let a=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const l=parseInt(a,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:a}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${l}`);else throw new Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class v2{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ti(new en(s,Nt("disableProviderPing")))}}class y2{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ti(new en(s,Nt("disableProviderPing")))}}class _2{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);t[r]=this.createHttpProvider(r,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);return typeof s>"u"?void 0:new Ti(new en(s,Nt("disableProviderPing")))}}class m2{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ti(new en(s,Nt("disableProviderPing")))}}class b2{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Nt("events"),this.client=Nt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||$r(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ni.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||$r(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Ti(new en(s,Nt("disableProviderPing")))}}var w2=Object.defineProperty,E2=Object.defineProperties,D2=Object.getOwnPropertyDescriptors,td=Object.getOwnPropertySymbols,S2=Object.prototype.hasOwnProperty,I2=Object.prototype.propertyIsEnumerable,rd=(n,t,r)=>t in n?w2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,wo=(n,t)=>{for(var r in t||(t={}))S2.call(t,r)&&rd(n,r,t[r]);if(td)for(var r of td(t))I2.call(t,r)&&rd(n,r,t[r]);return n},jc=(n,t)=>E2(n,D2(t));class Au{constructor(t){this.events=new ur,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Jf})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new Au(t);return await r.initialize(),r}async request(t,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:wo({},t),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:kf("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(l=>{this.session=l,this.namespaces||(this.namespaces=d2(l.namespaces),this.persist("namespaces",this.namespaces))}).catch(l=>{if(l.message!==hp)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[s,a]=this.validateChain(t);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Vf(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await G6.init({logger:this.providerOpts.logger||Jf,relayUrl:this.providerOpts.relayUrl||e2,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>So(r)))];Mc("client",this.client),Mc("events",this.events),Mc("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const s=h2(r,this.session),a=fp(s),l=l2(this.namespaces,this.optionalNamespaces),p=jc(wo({},l[r]),{accounts:s,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new g2({namespace:p});break;case"solana":this.rpcProviders[r]=new v2({namespace:p});break;case"cosmos":this.rpcProviders[r]=new y2({namespace:p});break;case"polkadot":this.rpcProviders[r]=new p2({namespace:p});break;case"cip34":this.rpcProviders[r]=new _2({namespace:p});break;case"elrond":this.rpcProviders[r]=new m2({namespace:p});break;case"multiversx":this.rpcProviders[r]=new b2({namespace:p});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;if(s.name==="accountsChanged"){const a=s.data;a&&Vf(a)&&this.events.emit("accountsChanged",a.map(f2))}else s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:a}=r,l=(s=this.client)==null?void 0:s.session.get(t);this.session=jc(wo({},l),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",jc(wo({},kf("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Ni.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=t;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(p=>So(p)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=So(Object.keys(this.namespaces)[0]),l=this.rpcProviders[a].getDefaultChain();return[a,l]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;if(!this.namespaces)return;const[a,l]=this.validateChain(t);r||this.getProvider(a).setDefaultChain(l),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${Xf}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${Xf}/${t}`)}}const x2=Au,A2="wc",O2="ethereum_provider",C2=`${A2}@2:${O2}:`,P2="https://rpc.walletconnect.com/v1/",ru=["eth_sendTransaction","personal_sign"],T2=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],iu=["chainChanged","accountsChanged"],N2=["message","disconnect","connect"];var R2=Object.defineProperty,U2=Object.defineProperties,F2=Object.getOwnPropertyDescriptors,id=Object.getOwnPropertySymbols,L2=Object.prototype.hasOwnProperty,$2=Object.prototype.propertyIsEnumerable,nd=(n,t,r)=>t in n?R2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ss=(n,t)=>{for(var r in t||(t={}))L2.call(t,r)&&nd(n,r,t[r]);if(id)for(var r of id(t))$2.call(t,r)&&nd(n,r,t[r]);return n},sd=(n,t)=>U2(n,F2(t));function Fo(n){return Number(n[0].split(":")[1])}function qc(n){return`0x${n.toString(16)}`}function M2(n){const{chains:t,optionalChains:r,methods:s,optionalMethods:a,events:l,optionalEvents:p,rpcMap:f}=n;if(!Gc(t))throw new Error("Invalid chains");const g={chains:t,methods:s||ru,events:l||iu,rpcMap:ss({},t.length?{[Fo(t)]:f[Fo(t)]}:{})},w=l==null?void 0:l.filter(P=>!iu.includes(P)),x=s==null?void 0:s.filter(P=>!ru.includes(P));if(!r&&!p&&!a&&!(w!=null&&w.length)&&!(x!=null&&x.length))return{required:t.length?g:void 0};const C=(w==null?void 0:w.length)&&(x==null?void 0:x.length)||!r,U={chains:[...new Set(C?g.chains.concat(r||[]):r)],methods:[...new Set(g.methods.concat(a!=null&&a.length?a:T2))],events:[...new Set(g.events.concat(p||N2))],rpcMap:f};return{required:t.length?g:void 0,optional:r.length?U:void 0}}class Ou{constructor(){this.events=new ur.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=C2,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new Ou;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=M2(this.rpc);try{const a=await new Promise(async(p,f)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(sd(ss({namespaces:ss({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(w=>{p(w)}).catch(w=>{f(new Error(w.message))})});if(!a)return;this.setChainIds(this.rpc.chains);const l=Qb(a.namespaces,[this.namespace]);this.setAccounts(l),this.events.emit("connect",{chainId:qc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",qc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",sd(ss({},tw("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",qc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,s,a]=t.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;const a=(r=t==null?void 0:t.chains)!=null?r:[],l=(s=t==null?void 0:t.optionalChains)!=null?s:[],p=a.concat(l);if(!p.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=a.length?(t==null?void 0:t.methods)||ru:[],g=a.length?(t==null?void 0:t.events)||iu:[],w=(t==null?void 0:t.optionalMethods)||[],x=(t==null?void 0:t.optionalEvents)||[],C=(t==null?void 0:t.rpcMap)||this.buildRpcMap(p,t.projectId),U=(t==null?void 0:t.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map(P=>this.formatChainId(P)),optionalChains:l.map(P=>this.formatChainId(P)),methods:f,events:g,optionalMethods:w,optionalEvents:x,rpcMap:C,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:U,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?Fo(this.rpc.chains):Fo(this.rpc.optionalChains),this.signer=await x2.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await Y_(()=>import("./index-a75998ff.js").then(a=>a.a),["assets/index-a75998ff.js","assets/index-40f6b818.js"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(ss({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:a}=t;r&&Gc(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=(a==null?void 0:a[l])||this.getRpcUrl(l)})),s&&Gc(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=(a==null?void 0:a[l])||this.getRpcUrl(l)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${P2}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const Q2=Ou;export{Q2 as EthereumProvider,N2 as OPTIONAL_EVENTS,T2 as OPTIONAL_METHODS,iu as REQUIRED_EVENTS,ru as REQUIRED_METHODS,Ou as default};
